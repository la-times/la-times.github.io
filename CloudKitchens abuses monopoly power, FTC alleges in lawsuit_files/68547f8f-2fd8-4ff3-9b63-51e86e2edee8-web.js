/*! permutive-javascript-sdk v19.97.4 (web) (built 2023-08-29T18:59:21.838Z) */(()=>{"use strict";var __webpack_modules__={2688:(e,t,n)=>{function r(e){return e instanceof Error?e:new Error("string"==typeof e?e:JSON.stringify(e))}n.d(t,{w:()=>r})},787:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(3735),a=n(6567);function i(e){return(0,r.zG)((0,a.Y3)((()=>JSON.parse(e))),(0,a.fS)(r.gn))}},7183:(e,t,n)=>{n.d(t,{h:()=>r});const r=e=>new a(e);class a{constructor(e){const t=this;this._worker=e,this._callbacks={},this._id=0,e.addEventListener("message",(function(e){a.onMessage(t,e)}))}set id(e){this._id=e}get id(){return this._id}newId(){const e=this.id;return this.id=this.id+1,e}static onMessage(e,t){if(n=t.data,!(Array.isArray(n)&&n.length>=2))return;var n;const[r,a,i]=t.data,s=e._callbacks[r];s&&(delete e._callbacks[r],s(a,i))}static isServiceWorker(e){return void 0!==e.controller}postMessage(e){const t=this,n=this.newId(),r=[n,e];return new Promise((function(e,i){var s;if(t._callbacks[n]=function(t,n){if(t)return i(new Error(t.message));e(n)},a.isServiceWorker(t._worker)){const e=new MessageChannel;e.port1.onmessage=function(e){a.onMessage(t,e)},null===(s=t._worker.controller)||void 0===s||s.postMessage(r,[e.port2])}else t._worker.postMessage(r)}))}}},5912:(e,t,n)=>{n.r(t),n.d(t,{CleanRoomAddon:()=>D,load:()=>I,segmentationService:()=>M});var r=n(655),a=n(3735),i=n(2688),s=n(1500),o=n(365),c=n(6567),u=n(6934),d=n(2851),l=n(2652),f=n(4730),g=n(7826);class p{putOrResetUnprocessed(e){return(0,r.mG)(this,void 0,void 0,(function*(){return(0,a.zG)(e,c.g_((()=>u.Y3((()=>this.unprocessedPrebidAuctions.reset()),i.w)),(e=>u.Y3((()=>this.unprocessedPrebidAuctions.put(e)),i.w))),u.vx((e=>(this.reportError(`Unprocessed auctions failed to put. Got ${e}`),u.F2((0,a.Q1)())))),(e=>e()))}))}get allAuctions(){return Object.assign(Object.assign({},this.stagedAuctions),this.trackableAuctions)}constructor(e){this.prefix="[clean_room]",this.debouncedPutOrResetUnprocessed=this.setupUnprocessedPrebidAuctions(),this.stagedAuctions={},this.trackableAuctions={},this.trackAuctionsInterval=null,this.permutive=e.permutive,this.api=e.api,this.logger=e.logger,this.unprocessedPrebidAuctions=e.unprocessedEvents.PrebidAuctions,this.sessionManager=e.sessionManager,this.clientContext=e.clientContext,this.viewId=e.viewId,(0,a.zG)(e.pbjs,d.UI(c.EQ((()=>{this.logInfo("Waiting for PrebidJS to start PrebidAuctions tracking...")}),(e=>this.startPrebidAuctions(e)))))}startPrebidAuctions(e){return(0,r.mG)(this,void 0,void 0,(function*(){yield this.trackUnprocessedPrebidAuctions(),this.logDebug("Starting PrebidAuctions tracking",{prebid:e});const t=(0,g.zi)(e),n=e=>0===e.bidsReceived.length&&0===e.noBids.length?null:(0,a.zG)(this.mapToStagedAuctions(e),o.tS((()=>o.Y3((()=>e.bidsReceived.forEach((e=>{var n;("rendered"===(n=e).status||"targetingSet"===n.status)&&this.setBidToWon(t,e)}))),(e=>{const t=`Failed to process auction. Got ${(0,i.w)(e)}`;return this.reportError(t),(0,i.w)(t)})))));e.onEvent("auctionEnd",(e=>{n(e),this.storeAuctionsAsUnprocessed(this.allAuctions)}));const c=n=>{const r=(0,l.qh)(n);this.logDebug("Processing setTargeting event",{adUnitCodes:r});const i=o.DT((e=>{let[t,n]=e;return!!t&&!!n.hb_adid}),(()=>new Error("Missing targeting data"))),c=(0,a.ls)(i,o.tS((t=>{let[n,{hb_adid:r}]=t;return(0,a.zG)(e.getAllPrebidWinningBids(),(0,s.Ew)((e=>e.adId===r&&e.adUnitCode===n)),o.Yo((()=>new Error("Prebid winning bid does not exist"))))})),o.UI((e=>{this.setBidToWon(t,e)})));return r.forEach(c)};e.onEvent("setTargeting",(e=>{c(e),this.storeAuctionsAsUnprocessed(this.allAuctions)})),e.onEvent("bidWon",(e=>{this.setBidToWon(t,e),this.storeAuctionsAsUnprocessed(this.allAuctions)}));const u=(e,n)=>{this.logDebug("Processing render event",{isRendered:e,props:n}),n.bid&&(e&&this.setBidToRendered(t,n.bid),this.promoteAuctionToTrackable(n.bid),this.storeAuctionsAsUnprocessed(this.allAuctions),this.trackEligibleAuctions())};e.onEvent("adRenderSucceeded",(e=>{u(!0,e)})),e.onEvent("adRenderFailed",(e=>{u(!1,e)})),e.getEvents().forEach((e=>"auctionEnd"===e.eventType?n(e.args):"setTargeting"===e.eventType?c(e.args):"bidWon"===e.eventType?this.setBidToWon(t,e.args):"adRenderSucceeded"===e.eventType?u(!0,e.args):"adRenderFailed"===e.eventType?u(!1,e.args):void 0)),this.storeAuctionsAsUnprocessed(this.allAuctions,{debounced:!1}),(0,l.aT)((()=>(0,r.mG)(this,void 0,void 0,(function*(){this.trackAuctionsInterval=null;const e=this.allAuctions;this.stagedAuctions={},this.trackableAuctions={},yield this.trackPrebidAuctions(e,{useBeacon:!0}),yield this.storeAuctionsAsUnprocessed(null,{debounced:!1})}))))}))}trackUnprocessedPrebidAuctions(){return(0,a.zG)(u.Y3((()=>(0,r.mG)(this,void 0,void 0,(function*(){return(0,a.zG)(yield this.unprocessedPrebidAuctions.getIfPresent(),c.g_((()=>this.logDebug("No unprocessed PrebidAuctions found")),(e=>{var{props:t}=e,n=(0,r._T)(e,["props"]);return this.logDebug("Found unprocessed PrebidAuctions",{props:t,unprocessedData:n}),Promise.all([this.permutive.track("PrebidAuctions",t,{unprocessedData:n}),this.unprocessedPrebidAuctions.reset()])})))}))),(e=>{const t=`Failed to track unprocessed PrebidAuctions. Got ${(0,i.w)(e)}`;return this.reportError(t),(0,i.w)(t)})),(e=>e()))}setupUnprocessedPrebidAuctions(){const e=new f.b(1e3,2500),t=this.putOrResetUnprocessed.bind(this);return e.schedule(t)}storeAuctionsAsUnprocessed(e){let{debounced:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,r.mG)(this,void 0,void 0,(function*(){this.logDebug("Store auctions as unprocessed",{auctionsToStore:e,debounced:t});const n=u.Y3((()=>(0,r.mG)(this,void 0,void 0,(function*(){const t=(0,l.qh)(null!=e?e:{}).map((e=>{let[t,n]=e;return Object.assign(Object.assign({},n),{auction_id:t})})),n=yield this.clientContext.getClient();return(0,a.zG)(t,c.DT((e=>e.length>0)),c.UI((e=>({props:{isp_info:"$ip_isp_info",geo_info:"$ip_geo_info",aggregations:{auctions:e}},client:n,viewId:this.viewId.get(),sessionId:this.sessionManager.getSessionId()}))))}))),i.w);return(0,a.zG)(n,u.EQ((e=>{this.reportError(`Failed to process auctions: ${e}`)}),(e=>{const n=this.debouncedPutOrResetUnprocessed(e);return t?n:Promise.all([this.putOrResetUnprocessed(e),n])})),(e=>e()))}))}mapBidProperties(e,t){var n;return{ad_id:t.adId,ad_unit_code:t.adUnitCode,advertiser_domains:(0,g.Cg)(t),advertiser_id:(e=>{var t,n;const r=e.rubicon&&"object"==typeof e.rubicon&&"advertiserId"in e.rubicon&&e.rubicon.advertiserId||(null===(t=null==e?void 0:e.meta)||void 0===t?void 0:t.buyerId)||(null===(n=null==e?void 0:e.meta)||void 0===n?void 0:n.advertiserId);return r?`${r}`:void 0})(t),advertiser_name:(e=>{var t,n,r;const a=(null===(t=e.meta)||void 0===t?void 0:t.clickUrl)||(null===(n=e.adomain)||void 0===n?void 0:n[0])||(null===(r=e.meta)||void 0===r?void 0:r.advertiserName);return a?`${a}`:void 0})(t),bid_available:"string"==typeof t.statusMessage&&t.statusMessage.indexOf("empty")<0,bidder:t.bidder,bidder_timeout:(0,l.rH)(e.bidderTimeout),brand_id:(e=>{var t;const n=null===(t=e.meta)||void 0===t?void 0:t.brandId;return n?`${n}`:void 0})(t),brand_name:(e=>{var t;return null===(t=e.meta)||void 0===t?void 0:t.brandName})(t),cpm:(0,g.Qd)(t),creative_id:`${t.creativeId}`,deal_id:(0,g.$7)(t),dsp_id:(0,g.cs)(t),hb_pb:null===(n=t.adserverTargeting)||void 0===n?void 0:n.hb_pb,height:(0,l.rH)(t.height),request_timestamp:t.requestTimestamp,response_timestamp:t.responseTimestamp,time_to_respond:t.timeToRespond,width:(0,l.rH)(t.width)}}collectAdUnitCodes(e){const t=new Set;return e.reduce(((e,n)=>{let{adUnitCode:r}=n;return!r||t.has(r)||(t.add(r),e.push({ad_unit_code:r})),e}),[])}mapToStagedAuctions(e){return o.Y3((()=>{const{auctionId:t,bidsReceived:n,noBids:r}=e,a=this.collectAdUnitCodes(n),i=this.collectAdUnitCodes(r);return this.stagedAuctions[t]={bids:a,no_bids:i},this.logDebug("Added auction",this.stagedAuctions[t]),this.stagedAuctions[t]}),(e=>{const t=`Failed to map auction. Got ${(0,i.w)(e)}`;return this.reportError(t),(0,i.w)(t)}))}findAuction(e){return(0,a.zG)(this.getStagedAuction(e.auctionId),o.vx((()=>this.getTrackableAuction(e.auctionId))),o.vx((()=>this.mapToStagedAuctions({auctionId:e.auctionId,bidsReceived:[e],bidderRequests:[],noBids:[]}))))}setBidByOperation(e,t,n){const r=e=>e.hasOwnProperty("ad_id"),c=(n,c)=>{const u=e=>e.ad_id===n.adId,d=e=>e.ad_unit_code===n.adUnitCode,[l,f]=(0,a.zG)(c,(0,s.uK)((e=>r(e)&&u(e)&&d(e))),(e=>[e.left,e.right]));this.logDebug(`Bids for ${t}`,{nonMatching:l,matching:f});const g=(0,a.ls)(o.DT((e=>1===e.length),(()=>new Error("No matching bids"))),o.UI((e=>{let[n]=e;return this.logDebug(`Found bid for ${t}`,{found:n}),{found:n,others:l}}))),p=o.DT((e=>e.length<=1),(()=>new Error("Ad ID is not unique"))),h=(0,a.ls)(g,o.vx((()=>o.Y3((()=>{const a=this.mapBidProperties(e,n),i=l.filter((e=>!(!d(e)||!r(e))||!d(e)));return this.logDebug(`Creating bid for ${t}`,{created:a,others:i}),{found:a,others:i}}),(e=>(0,i.w)(`Failed to create bid. Got ${(0,i.w)(e)}`))))));return(0,a.zG)(f,p,o.tS(h))};return(0,a.ls)((e=>(0,a.zG)(this.findAuction(e),o.tS((r=>(0,a.zG)(c(e,r.bids),o.tS((e=>{let{found:t,others:r}=e;return o.Y3((()=>({updated:n(t),others:r})),i.w)})),o.UI((e=>{let{updated:n,others:a}=e;const i=[n,...a];r.bids=i,this.logDebug(`Bid operation ${t} successful`,n,i)}))))))),o.Vn((e=>{const n=`Failed bid operation ${t}. Got ${(0,i.w)(e)}`;return this.reportError(n),(0,i.w)(n)})))}setBidToWon(e,t){return this.setBidByOperation(e,"setWon",(e=>Object.assign(Object.assign({},e),{winning_bid:!0})))(t)}setBidToRendered(e,t){return this.setBidByOperation(e,"setRendered",(e=>Object.assign(Object.assign({},e),{winning_bid:!0,is_rendered:!0,rendered_timestamp:(new Date).getTime()})))(t)}promoteAuctionToTrackable(e){let{auctionId:t}=e;const n=this.stagedAuctions[t];if(n){if(this.trackableAuctions[t])return this.logError("Auction is already promoted to trackable",{auction:this.trackableAuctions[t]});this.trackableAuctions[t]=n,delete this.stagedAuctions[t],this.logDebug("Auction promoted to trackable",{auctionId:t,trackableAuctions:this.trackableAuctions})}}trackEligibleAuctions(){if(this.trackAuctionsInterval)return;this.trackAuctionsInterval=(0,l.PQ)((()=>(0,r.mG)(this,void 0,void 0,(function*(){if(!this.trackAuctionsInterval)return;this.trackAuctionsInterval=null;const e=this.trackableAuctions;this.trackableAuctions={},yield this.trackPrebidAuctions(e),yield this.storeAuctionsAsUnprocessed(this.stagedAuctions,{debounced:!1})}))),{timeout:5e3})}trackPrebidAuctions(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){const n=(0,l.qh)(e).map((e=>{let[t,n]=e;return Object.assign(Object.assign({},n),{auction_id:t})}));n.length&&(yield this.permutive.track("PrebidAuctions",{isp_info:"$ip_isp_info",geo_info:"$ip_geo_info",aggregations:{auctions:n}},t),this.logDebug("Tracked auctions",{auctions:n}))}))}getStagedAuction(e){return(0,a.zG)(this.stagedAuctions[e],o.DT(Boolean,(()=>new Error("Staged auction not found"))),o.Vn((t=>(this.logError(t,{auctionId:e}),t))))}getTrackableAuction(e){return(0,a.zG)(this.trackableAuctions[e],o.DT(Boolean,(()=>new Error("Trackable auction not found"))),o.Vn((t=>(this.logError(t,{auctionId:e}),t))))}reportError(e){return this.api.reportError(`${this.prefix} ${e}`)}logInfo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.log(this.prefix,...t)}logDebug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.debug(this.prefix,...t)}logError(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.error(this.prefix,...t)}}var h=n(6930),_=n(167),m=n(2116);const b=(e,t)=>(0,a.zG)(y(e),(0,_.n)({backoffAfterErrorMs:6e5}),m.YO("fetchSegments"),m.ak("fullSegmentationResult",(e=>{let{fetchSegments:n}=e;return(0,h.m)(d.UI((e=>({validityKey:()=>e.userId,freshnessKey:()=>e.sessionId,refresh:()=>(0,a.zG)([e.customCohorts,e.standardCohorts],c.DT((()=>e.isInitd)),c.tS((t=>{let[r,a]=t;return n({userId:e.userId,fps:r,stds:a,newSession:!0})})),c.UI((t=>t.then((t=>{let{queries:n}=t;return{queries:n,viewId:e.viewId,sessionId:e.sessionId}})))))})),t))})),m.ak("deltaSegmentationResult",(e=>{let{fullSegmentationResult:n,fetchSegments:r}=e;return(0,h.m)((0,a.zG)(d.vP({input:t,fullSegmentationResult:n}),d.UI((e=>{let{input:t,fullSegmentationResult:n}=e;return{validityKey:()=>(0,a.zG)(n,c.UI((e=>e.sessionId)),c.fS((()=>"")),(e=>`${t.userId},${e}`)),freshnessKey:()=>t.viewId,refresh:()=>(0,a.zG)(n,c.hX((()=>t.isInitd)),c.hX((e=>e.sessionId===t.sessionId&&e.viewId!==t.viewId)),c.UI((()=>[t.customCohorts,t.standardCohorts])),c.tS((e=>{let[n,a]=e;return r({userId:t.userId,fps:n,stds:a,newSession:!1})})))}}))))})),m.UI((0,a.ls)((e=>{let{fullSegmentationResult:t,deltaSegmentationResult:n}=e;return d.vP(t,n)}),d.UI((e=>{let[t,n]=e;const r=(0,a.ls)(c.UI((e=>e.queries)),c.fS(w));return k.concat(r(n),r(t))}))))),v=(e,t)=>n=>{(0,a.zG)(n.segments.direct_buy,d.YP((t=>{0===t.length?e.removeExternalData(E):e.setExternalJsonData(E,t)}))),(0,a.zG)((0,a.zG)(d.vP(n.segments.programmatic,d.UI((e=>e.demandPartnerCohorts),t)),d.UI((e=>{let[t,n]=e;return[...n,...t]}))),d.YP((t=>{0===t.length?e.removeExternalData(P):e.setExternalJsonData(P,t)})))},y=e=>t=>{var{newSession:n}=t,a=(0,r._T)(t,["newSession"]);return e.permutiveApi.req({url:e.permutiveUrls.getAdvertiserEndpointUrl("/segment",c.G(e.config.advertiserApiVersion),[["new-session",n.toString()]]),method:"POST",payload:a,contentType:"text/plain",dataType:"json",withCredentials:!1}).then((e=>{var t,n;return{queries:{direct_buy:null!==(t=e.queries.direct_buy)&&void 0!==t?t:[],programmatic:null!==(n=e.queries.programmatic)&&void 0!==n?n:[]}}}))},w=()=>({direct_buy:[],programmatic:[]}),k={concat:(e,t)=>({direct_buy:[...new Set([...e.direct_buy,...t.direct_buy])],programmatic:[...new Set([...e.programmatic,...t.programmatic])]})},E="_pcrdbs",P="_pcrprs",S="clean_room",I=e=>{e.q.push({functionName:"addon",arguments:[S,{}]})};class D extends p{}function M(e,t){return(0,a.zG)(t,d.UI((e=>{var{initdAddons:t}=e,n=(0,r._T)(e,["initdAddons"]);return Object.assign(Object.assign({},n),{isInitd:t.has(S)})})),(t=>O(e,t)))}const O=function(e,t){const n=w();return(0,a.zG)(t,m.KD([[e=>!e.consent||e.addonsLoaded&&!e.isInitd,m.K4((()=>d.a9(n)))],b(e,t)]),m.UI((0,a.ls)(d.xH,(e=>({segments:{all:(0,a.zG)(e,d.UI((e=>[...new Set([...e.direct_buy,...e.programmatic])])),d.D8(l.cO)),direct_buy:(0,a.zG)(e,d.UI((e=>e.direct_buy)),d.D8(l.cO)),programmatic:(0,a.zG)(e,d.UI((e=>e.programmatic)),d.D8(l.cO))}})),(0,l.bw)(v(e.externalData,t)))))}},9557:(e,t,n)=>{n.r(t),n.d(t,{SspAddon:()=>h,load:()=>p,realService:()=>f,sspService:()=>d,stubService:()=>l});var r=n(2851),a=n(9853),i=n(3735),s=n(3328),o=n(2116),c=n(4011),u=n(2652);const d=f;function l(e,t){return o.K4((()=>(e.removeExternalData(_),r.a9({cohorts:[],ssps:[],gamTargetingValues:[]}))))}function f(e,t){const n=(0,a.Hn)(g),d=n("ssps",[]),l=n("cohort_mapping",{}),f=d.includes("google_pps"),p={cohorts:[],ssps:[]};return(0,i.zG)(r.vP({consent:t.consent,addonsLoaded:t.addonsLoaded,addonInitd:r.UI((e=>e.has(g)),t.initdAddons)}),o.KD([[e=>{let{consent:t,addonsLoaded:n,addonInitd:r}=e;return!t||n&&!r},o.K4((()=>(e.removeExternalData(_),r.a9(p))))],[e=>{let{addonsLoaded:t,addonInitd:n}=e;return!t&&!n},o.K4((()=>r.a9(Object.assign(Object.assign({},p),e.getExternalJsonData(_)))))],o.K4((n=>{let{onServiceStop:a}=n;return(0,i.zG)(t.standardCohorts,r.UI(s.hX((e=>e in l))),r.D8(s.Eh(c.Eq)),r.UI((0,i.ls)(s.UI((e=>l[e])),(e=>({ssps:d,cohorts:e})))),(0,u.bw)((0,i.ls)(r.YP((t=>e.setExternalJsonData(_,t))),(e=>a(e)))))}))]),o.UI(r.xH),o.UI(r.UI((e=>Object.assign(Object.assign({},e),{gamTargetingValues:f?e.cohorts:[]})))))}const g="ssp",p=e=>{({standard_cohorts:{auto_init:!0,activationConfigs:[]},rubicon_ssp:{auto_init:!0,publisher_id:"20520",activationConfigs:[]},tradedesk:{auto_init:!0,advertiser_id:"uakr1sk",activationConfigs:[{id:"15e2f28f-9a4b-4830-bf85-8c8a19fabf0a",tt:"EveryTime",sc:98292,c:{},wc:{advertiser_id:"uakr1sk"}},{id:"7825386f-6e40-43be-abe9-6f00030b9d98",tt:"EveryTime",sc:98293,c:{secret:"bgarvwwtshdlvgfyb4ft01muxo0dqdnp",advertiser_id:"a0k8vcb"},wc:{advertiser_id:"uakr1sk"}},{id:"dc755e68-9561-4f64-be86-8d8feac9f84b",tt:"EveryTime",sc:139079,c:{},wc:{advertiser_id:"uakr1sk"}}]},clean_room:{auto_init:!0,publisher_permissions:{"1ea83aaa-b50b-4ce4-90c5-254b7084bc49":["allow_insights","allow_targeting_known_audiences","allow_targeting_modelled_audiences","allow_targeting_core_audiences"],"ad4f2c94-b966-4a42-b842-9dcef69afc7d":[],"e33d8baa-e928-42f8-ab37-8abdd5328767":["allow_targeting_core_audiences"]},activationConfigs:[]},dfp:{auto_init:!0,networks:[{network_code:"21787098806",name:"California Times"}],track_slot_rendered:!1,track_slot_viewable:!0,track_slot_clicked:!0,activationConfigs:[]},ssp:{auto_init:!0,ssps:["openx","appnexus","pubmatic"],cohort_mapping:{1e7:"bgyz",10000001:"bhgp",10000002:"bhhc",10000003:"bhhg",10000004:"bhhk",10000005:"bhhp",10000006:"bhhv",10000007:"bhhy",10000008:"bhie",10000010:"bhis",10000011:"bhiz",10000012:"bhji",10000013:"bhjq",10000014:"bhka",10000015:"bhkl",10000016:"bhkr",10000017:"bhky",10000018:"bhlg",10000019:"bhli",10000020:"bhlo",10000021:"bhlp",10000022:"bhnd",10000023:"bhnl",10000024:"bhnp",10000025:"bhnw",10000026:"bhoj",10000035:"bgzb",10000036:"bhgq",10000037:"bhgs",10000038:"bhgw",10000039:"bhgy",10000040:"bhgz",10000041:"bhhe",10000042:"bhhh",10000043:"bhhw",10000044:"bhhx",10000045:"bhhz",10000046:"bhia",10000047:"bhif",10000048:"bhig",10000049:"bhii",10000050:"bhij",10000051:"bhik",10000052:"bhim",10000053:"bhip",10000054:"bhit",10000055:"bhiu",10000056:"bhiv",10000057:"bhiy",10000058:"bhjm",10000059:"bhjr",10000060:"bhjs",10000061:"bhjw",10000062:"bhjx",10000063:"bhkm",10000064:"bhir",10000065:"bhko",10000066:"bhkp",10000067:"bhkq",10000068:"bhkz",10000069:"bhla",10000070:"bhlb",10000071:"bhle",10000072:"bhlf",10000073:"bhlq",10000074:"bhlt",10000075:"bhlu",10000076:"bhlw",10000077:"bhlx",10000078:"bhly",10000079:"bhmb",10000080:"bhmi",10000081:"bhmj",10000082:"bhml",10000083:"bhmp",10000084:"bhmr",10000085:"bhmw",10000086:"bhmz",10000087:"bhne",10000088:"bhnf",10000089:"bhni",10000090:"bhnn",10000324:"bhhj",10000325:"bhhi",10000327:"bhku",10000328:"bhkt",10000329:"bhkw",10000330:"bhkv",10000687:"bgzc",10000688:"bgza",10000689:"bhha",10000690:"bhgt",10000691:"bhgx",10000692:"bhgv",10000693:"bhgr",10000694:"bhgu",10000695:"bhhb",10000696:"bhhd",10000697:"bhhf",10000698:"bhhl",10000699:"bhho",10000700:"bhhm",10000701:"bhhn",10000702:"bhhq",10000703:"bhht",10000704:"bhhu",10000705:"bhhs",10000706:"bhhr",10000707:"bhib",10000708:"bhid",10000709:"bhic",10000710:"bhio",10000711:"bhin",10000712:"bhil",10000713:"bhiq",10000714:"bhih",10000715:"bhiw",10000716:"bhix",10000717:"bhja",10000718:"bhjc",10000719:"bhjd",10000720:"bhje",10000721:"bhjf",10000722:"bhjb",10000723:"bhjg",10000724:"bhjh",10000725:"bhjo",10000726:"bhjk",10000727:"bhjn",10000728:"bhjj",10000729:"bhjl",10000730:"bhjy",10000731:"bhju",10000732:"bhjv",10000733:"bhjz",10000734:"bhjt",10000735:"bhkj",10000736:"bhkk",10000737:"bhki",10000738:"bhkd",10000739:"bhkc",10000740:"bhkf",10000741:"bhkh",10000742:"bhkb",10000743:"bhkg",10000744:"bhke",10000745:"bhjp",10000746:"bhkn",10000747:"bhkx",10000748:"bhks",10000749:"bhld",10000750:"bhlc",10000751:"bhlh",10000752:"bhlk",10000753:"bhlj",10000754:"bhll",10000755:"bhlm",10000756:"bhlv",10000757:"bhna",10000758:"bhmv",10000759:"bhmt",10000760:"bhmy",10000761:"bhmc",10000762:"bhmo",10000763:"bhls",10000764:"bhmq",10000765:"bhme",10000766:"bhmh",10000767:"bhlz",10000768:"bhlr",10000769:"bhnb",10000770:"bhmk",10000771:"bhmu",10000772:"bhmx",10000773:"bhmg",10000774:"bhmd",10000775:"bhmf",10000776:"bhnc",10000777:"bhmn",10000778:"bhmm",10000779:"bhma",10000780:"bhms",10000781:"bhng",10000782:"bhnj",10000783:"bhnh",10000784:"bhnk",10000785:"bhno",10000786:"bhnm",10000787:"bhnu",10000788:"bhnv",10000789:"bhns",10000790:"bhnt",10000791:"bhnq",10000792:"bhnr",10000793:"bhob",10000794:"bhny",10000795:"bhod",10000796:"bhoh",10000797:"bhog",10000798:"bhnz",10000799:"bhoa",10000800:"bhoe",10000801:"bhnx",10000802:"bhoc",10000803:"bhof"},activationConfigs:[]},facebook_pixel_v2:{auto_init:!0,activationConfigs:[{id:"73860514-04e5-4392-bb82-866d638bdd30",tt:"EveryTime",sc:98292,c:{},wc:{}},{id:"5b7d5ea1-16b1-402c-9664-9539fb23ec22",tt:"EveryTime",sc:139079,c:{},wc:{}}]},prebid:{auto_init:!0,revenue_insights_enabled:!0,data_provider_config:{ac_bidders:[]},activationConfigs:[]},web:{auto_init:!1,track_pageview_engagement:!0,track_form_submission:!0,track_link_click:!0,track_pageview_complete:!0,add_alchemy_taxonomy:!1,add_alchemy_entities:!1,engagement_edge_only:!0,segment_transition_edge_only:!0,activationConfigs:[]}})[g].auto_init&&e.q.push({functionName:"addon",arguments:[g,{}]})};class h{constructor(e){}}const _="_pssps"},3992:(e,t,n)=>{n.d(t,{GL:()=>i,HJ:()=>s,N1:()=>u,SF:()=>d,UM:()=>o,ho:()=>f,iE:()=>l,t_:()=>c});let r=[],a=!1;const i=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return s((()=>e(...n)))},s=(e,t)=>{if(!a){const n=window.setTimeout(e,t);return()=>window.clearTimeout(n)}let n;const i=()=>{void 0!==n&&a&&r.length<1e4&&r.push([n,performance.now()]),n=void 0},s=[window.setTimeout((()=>{n=performance.now(),window.requestAnimationFrame(i),e()}),t),window.setTimeout(i,t)];return()=>{void 0===n&&s.forEach((e=>window.clearTimeout(e)))}},o=(e,t)=>{if(!a){const n=window.setInterval(e,t);return()=>window.clearInterval(n)}let n=!1,r=()=>{};const i=window.setInterval((()=>{r=s((()=>{n||e()}))}),t);return()=>{n=!0,r(),window.clearInterval(i)}},c=e=>new Promise(((t,n)=>e.then(i(t),i(n)))),u=e=>()=>c(e()),d=e=>{const t=u(e);return()=>new Promise((e=>s((()=>e(t())))))},l=()=>{const e=r;return r=[],e},f=e=>{a=e}},2851:(e,t,n)=>{n.d(t,{oQ:()=>S,a9:()=>p,Ue:()=>g,D8:()=>E,BT:()=>P,VS:()=>m,xH:()=>b,g_:()=>v,p4:()=>k,UI:()=>_,vP:()=>y,bw:()=>I,YP:()=>h});var r=n(2688),a=n(365),i=n(3735),s=n(6567),o=n(3328),c=n(2652);function u(e){let t=e,n=[],r=!1;return{addListener(e){if(r)return()=>{};let a=t;const i=()=>{Object.is(t,a)||(a=t,e(t))};n=[...n,i];return()=>{n=n.filter((e=>e!==i))}},notify(e){if(r)throw new Error("Ref bug: Attempted to notify a terminated notifier");Object.is(e,t)||(t=e,n.forEach((e=>e())))},terminate(){r=!0,n=[]}}}function d(e,t){let n=0;return function(){try{if(n++>0)throw new Error(e);return t(...arguments)}finally{n--}}}function l(e,t){let n=[...new Set(e)].filter((e=>"final"!==e.state));if(0===n.length)return{state:"final",onStateChange:()=>()=>{}};const r=()=>0===n.length?"final":n.some((e=>"might_change"===e.state))?"might_change":"nominal",[a,i]=f(r(),(e=>"might_change"!==e&&t())),s=()=>i(r());return n.forEach((t=>{t.onStateChange((t=>{switch(t){case"final":n=e.filter((e=>"final"!==e.state)),s();break;case"might_change":i("might_change");break;case"nominal":s();break;default:throw new Error(`Ref bug: Invalid state ${t}`)}}))})),a}function f(e,t){if("final"===e)return[{state:"final",onStateChange:()=>()=>{}},()=>{}];const{terminate:n,notify:r,addListener:a}=u(e),i={state:e,onStateChange:a},s=d("Disallowed recursion in Branch.",(e=>{if("final"===i.state){if("final"===e)return;throw new Error(`Attempted to change state of final branch to ${e}.`)}try{null==t||t(e),i.state=e,r(e)}finally{"final"===e&&n()}}));return[i,s]}function g(e){const[t,n,r]=function(){const[e,t]=f("nominal"),n=d("Disallowed recursion in Branch.",(n=>{if("final"===e.state)throw new Error("Attempted to mutate a finalized Ref.");const r=e.state;try{t("might_change"),n()}finally{t(r)}}));return[e,n,()=>t("final")]}(),[a,i]=D(t,e);return[a,e=>n((()=>i(e))),r]}function p(e){return{get current(){return e},onChange:()=>()=>{},branch:{state:"final",onStateChange:()=>()=>{}}}}function h(e){return t=>{const n=t.onChange(e);return e(t.current),n}}function _(e,t){if(t){const[n,r]=D(t.branch,e(t.current));return t.onChange((t=>r(e(t)))),n}return t=>_(e,t)}function m(e,t){return t?b(_(e,t)):t=>b(_(e,t))}function b(e){if("final"===e.branch.state)return e.current;const[t,n]=function(e,t){let n=t;const r=[e.state,n.state].includes("might_change")?"might_change":"nominal",[a,i]=f(r),s=e=>t=>{switch(t){case"final":i(e().state);break;case"might_change":i("might_change");break;case"nominal":"might_change"===e().state?i("might_change"):i("nominal");break;default:throw new Error(`Ref bug: Unexpected upstream state ${t}`)}};e.onStateChange(s((()=>n)));const o=s((()=>e));let c=n.onStateChange(o);return[a,e=>{n=e,c(),c=e.onStateChange(o),o(n.state)}]}(e.branch,e.current.branch),[r,a]=D(t,e.current.current);let i=e.current.onChange(a);return e.onChange((e=>{i(),i=e.onChange(a),n(e.branch),a(e.current)})),r}function v(e,t,n){if(!n)return n=>v(e,t,n);let r=e;return _((e=>(r=t(r,e),r)),n)}function y(){if(0===arguments.length||M(arguments.length<=0?void 0:arguments[0]))return w(...arguments);const e=arguments.length<=0?void 0:arguments[0],t=Object.keys(e);return(0,i.zG)(Object.values(e),(e=>w(...e)),_((0,i.ls)(o.Su(((e,n)=>[t[e],n])),Object.fromEntries)))}function w(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return p([]);if(1===t.length)return _((e=>[e]))(t[0]);let r=!1;t.forEach((e=>e.onChange((()=>{if("might_change"!==e.branch.state)throw new Error("Ref bug: Received a change notification without a `might_change` state.");r=!0}))));const a=t.map((0,c.vg)("branch")),i=()=>{r&&(r=!1,u(t.map((e=>e.current))))},s=l(a,i),[o,u]=D(s,t.map((e=>e.current)));return o}function k(e){const[t,n,o]=g(s.YP);return e.then(a.F2).catch((0,i.ls)(r.w,a.t$)).then((0,i.ls)(s.G,n,o)),t}function E(e){const t=e.hasOwnProperty("equals")?e.equals:e;return function(e){return t=>{if("final"===t.branch.state)return t;let n=s.YP;return _((t=>{if(s.Wi(n))return n=s.G(t),t;const r=e(n.value,t);return n=s.G(r),r}),t)}}(((e,n)=>t(e,n)?e:n))}function P(e){return t=>{const[n,r]=function(e){const[t,n]=f(e.state),r=e.onStateChange(n);return[t,()=>{r(),n("final")}]}(t.branch),[a,o]=D(n,t.current);let c=s.G(t.onChange(o));return e((()=>(0,i.zG)(c,s.UI((e=>{c=s.YP,e(),r()}))))),a}}function S(e){return M(e)?e:p(e)}function I(e){return t=>(h(e)(t),t)}function D(e,t){if("final"===e.state)return[p(t),()=>{}];const n=u(t);e.onStateChange((e=>{"final"===e&&n.terminate()}));let r=t;return[{get current(){return r},onChange:n.addListener,branch:e},d("Disallowed recursion in Ref.",(e=>{r=e,n.notify(r)}))]}function M(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)&&"function"==typeof e.onChange}},2116:(e,t,n)=>{n.d(t,{K4:()=>u,KD:()=>b,UI:()=>f,VS:()=>p,YO:()=>m,ak:()=>_,bw:()=>g,dQ:()=>d,of:()=>l,vP:()=>h});var r=n(655),a=n(2851),i=n(3735),s=n(2652),o=n(4923),c=n(6567);const u=e=>(0,i.ls)((t=>{var{previousState:n}=t,a=(0,r._T)(t,["previousState"]);return e(a)}),(e=>({value:e,state:a.a9(void 0)}))),d=i.yR,l=(0,i.ls)(i.a9,u),f=e=>t=>(0,i.ls)(t,(0,s.rO)({value:e})),g=e=>t=>(0,i.ls)(t,(0,s.rO)({value:(0,s.bw)(e)}));function p(e){return t=>n=>{var{previousState:i,onServiceStop:s}=n,o=(0,r._T)(n,["previousState","onServiceStop"]);const c=k(),u=t(Object.assign({previousState:Array.isArray(i)?i[0]:void 0,onServiceStop:c.onServiceStop},o)),d=k(),l=e(u.value)(Object.assign({previousState:Array.isArray(i)?i[1]:void 0,onServiceStop:d.onServiceStop},o));return s(c.stop),s(d.stop),{value:l.value,state:a.vP(u.state,l.state)}}}function h(e){return t=>{var{previousState:n}=t,s=(0,r._T)(t,["previousState"]);const c=w(n)?n:{},u=(0,i.zG)(e,o.Su(((e,t)=>t(Object.assign({previousState:c[e]},s)))));return{value:(0,i.zG)(u,o.UI((e=>e.value))),state:(0,i.zG)(u,o.UI((e=>e.state)),(e=>a.vP(e)))}}}function _(e,t){return n=>(0,i.ls)((0,s.rO)({previousState:y}),(s=>{var{onServiceStop:o}=s,c=(0,r._T)(s,["onServiceStop"]);const u=k(),d=n(Object.assign({onServiceStop:u.onServiceStop},c)),l=k(),f=t(d.value)(Object.assign(Object.assign({onServiceStop:l.onServiceStop},c),{previousState:c.previousState[e]}));return o(u.stop),o(l.stop),{value:(0,i.zG)([d.value,f.value],(t=>{let[n,r]=t;if(!w(n))throw new Error;return Object.assign(Object.assign({},n),{[e]:r})})),state:(0,i.zG)(a.vP(d.state,f.state),a.UI((t=>{let[n,r]=t;if(!w(n))throw new Error;return Object.assign(Object.assign({},n),{[e]:r})})))}}))}function m(e){return t=>(0,i.ls)((0,s.rO)({previousState:(0,i.ls)(y,(t=>t[e]))}),t,(0,s.rO)({value:t=>({[e]:t}),state:a.UI((t=>({[e]:t})))}))}const b=e=>{const t=e.slice(0,-1),n=e.slice(-1)[0],r=[...t.map((e=>{let[t,n]=e;return[t,(0,i.a9)(n)]})),(0,i.a9)(n)];return(0,i.ls)(a.UI((0,s.lo)(r)),v)};function v(e){return t=>{var{previousState:n,onServiceStop:o}=t,u=(0,r._T)(t,["previousState","onServiceStop"]);return(0,i.zG)(e,a.BT(o),a.g_({state:a.a9(n),stop:()=>{},value:c.YP},((e,t)=>{let{state:n,stop:r}=e;r();const{stop:a,onServiceStop:i}=k(),{state:s,value:o}=t(Object.assign({previousState:n.current,onServiceStop:i},u));return{state:s,stop:a,value:c.G(o)}})),(0,s.bw)((e=>o((()=>e.current.stop())))),(e=>({value:a.UI((0,i.ls)((e=>e.value),c.fS((()=>{throw new Error}))),e),state:a.VS((e=>e.state),e)})))}}function y(e){return w(e)?e:{}}function w(e){return"object"==typeof e&&null!==e}function k(){const e=[];return{stop:()=>{for(;e.length>0;)e.shift()()},onServiceStop:t=>e.push(t)}}},167:(e,t,n)=>{n.d(t,{n:()=>c});var r=n(6567),a=n(2851),i=n(3735),s=n(2652),o=n(2116);function c(e){return t=>(0,i.zG)(a.oQ(e),a.UI((0,s.rO)({backoffAfterErrorMs:e=>null!=e?e:0,backoffAfterSuccessMs:e=>null!=e?e:0})),(e=>o.dQ((n=>{let{previousState:o}=n;const[c,u]=a.Ue(function(e){if("object"!=typeof e||null===e)return{lastSuccess:0,lastError:0};return e}(o)),d=(0,i.zG)(a.vP(c,e),a.UI((e=>{let[t,n]=e;return Math.max(t.lastError+n.backoffAfterErrorMs,t.lastSuccess+n.backoffAfterSuccessMs)})));return{state:c,value:(0,i.ls)(r.DT((()=>Date.now()>=d.current)),r.UI(t),r.UI((0,s.bw)((e=>e.then((()=>u(Object.assign(Object.assign({},c.current),{lastSuccess:Date.now()}))),(()=>u(Object.assign(Object.assign({},c.current),{lastError:Date.now()}))))))))}}))))}},6930:(e,t,n)=>{n.d(t,{m:()=>u});var r=n(3735),a=n(365),i=n(6567),s=n(2851),o=n(2652),c=n(2116);const u=e=>c.dQ((t=>{let{onServiceStop:n,previousState:c}=t;const u=function(e){if("object"!=typeof e||null===e)return{validityKey:"",inFlight:i.YP,lastSuccess:i.YP};return e}(c),l=(0,r.zG)(e,s.BT(n),s.UI((e=>"currentTimestampSecs"in e&&"freshness"in e&&"validity"in e?e:{currentTimestampSecs:0,validity:{key:e.validityKey,maxAge:Number.MAX_SAFE_INTEGER},freshness:{key:e.freshnessKey,maxAge:Number.MAX_SAFE_INTEGER},refresh:e.refresh})),s.g_(s.a9(u),((e,t)=>{const n=t.validity.key(),c=i.hX((e=>t.currentTimestampSecs-e.timestamp<=t.validity.maxAge)),u=(0,o.HP)(t.freshness.key),l=i.hX((e=>t.currentTimestampSecs-e.timestamp<=t.freshness.maxAge&&e.freshnessKey===u())),f=(0,r.zG)(e,s.UI((0,r.ls)(i.DT((e=>e.validityKey===n)),i.EQ((()=>({validityKey:n,inFlight:i.YP,lastSuccess:i.YP})),(0,o.rO)({inFlight:c,lastSuccess:c})))),s.D8(d));if((0,r.zG)(f.current,(e=>(0,r.zG)(e.inFlight,i.wp((()=>e.lastSuccess)),l,i.pC))))return f;const g=()=>({timestamp:t.currentTimestampSecs,freshnessKey:u(),output:i.YP});return(0,r.zG)(t.refresh(),i.EQ((()=>f),(0,r.ls)(s.p4,s.VS(i.EQ((()=>(0,r.zG)(f,s.UI((e=>Object.assign(Object.assign({},e),{inFlight:i.G(g())}))))),a.EQ((e=>f),(e=>s.a9({validityKey:n,inFlight:i.YP,lastSuccess:i.G(Object.assign(Object.assign({},g()),{output:i.G(e)}))}))))))))})),s.xH,s.D8(d));return{value:s.UI((0,r.ls)((0,o.vg)("lastSuccess"),i.tS((0,o.vg)("output"))),l),state:s.UI((e=>Object.assign(Object.assign({},e),{inFlight:i.YP})),l)}}));const d=(e,t)=>e.validityKey===t.validityKey&&e.inFlight===t.inFlight&&e.lastSuccess===t.lastSuccess},6967:(e,t,n)=>{n(2497),n(5165)},1540:(e,t,n)=>{n.d(t,{lg:()=>_,Bt:()=>m});var r=n(655),a=n(1500),i=n(3735),s=n(6567),o=n(2751),c=n(2652);class u{constructor(e,t,n,r){this.userId=e,this.network=t,this.api=n,this.logger=r,this.tag="appnexus",this.ttlInSeconds=86400,this.usedForThirdPartyData=!0,this.url="https://ib.adnxs.com/getuidj",this.invalidAliases=["","0","-1"]}getId(){return this.logger.debug("identities[appnexus]: start HTTP request"),(0,c.G6)(navigator.userAgent)?Promise.resolve({type:"skipped"}):this.api.appnexus(this.url).then((e=>(this.logger.debug("identities[appnexus]: end HTTP request"),{type:"attempted",result:(0,i.zG)((0,s.DT)((e=>this.isValidAlias(e.uid)))(e),(0,s.UI)((e=>e.uid)))})),(e=>({type:"attempted",result:s.YP})))}reset(){return Promise.resolve()}isValidAlias(e){return!!e&&-1===this.invalidAliases.indexOf(e)}}class d{constructor(e,t,n,r,a){this.config=e,this.network=t,this.api=n,this.userId=r,this.logger=a,this.tag="pxid",this.ttlInSeconds=86400,this.usedForThirdPartyData=!1,this.url=`https://68547f8f-2fd8-4ff3-9b63-51e86e2edee8.${this.config.pxidHost}/${this.config.apiVersion}/pxid`,this.resetUrl=this.url+"/reset"}getId(){return this.logger.debug("identities[pxid]: start HTTP request"),(0,c.G6)(navigator.userAgent)?Promise.resolve({type:"skipped"}):this.api.pxid(this.url).then((e=>(this.logger.debug("identities[pxid]: end HTTP request"),{type:"attempted",result:(0,s.ij)(e.uid)})),(e=>({type:"attempted",result:s.YP})))}reset(){return(0,c.G6)(navigator.userAgent)?Promise.resolve():this.api.pxidReset(this.resetUrl)}}const l=new Set(["public","email","email_md5","email_sha256","ip_address"]);var f=n(2851),g=n(4923),p=n(2197);const h=p.ff((e=>void 0===e));class _{constructor(e,t,n,r,a){this.metrics=e,this.trace=t,this.permutiveData=n,this.identityProviderEnv=r,this.logger=a,this.providers={};const s=this.getCachedIdentitiesAndMigrateIfRequired(),[c,u]=f.Ue(s);this.identityMapRef=c,this.setIdentityMap=u,c.onChange((e=>{this.logger.debug("[identities] Updating to",e),this.permutiveData.setData("identities",e)})),this.ref=(0,i.zG)(c,f.UI((0,i.ls)(g.UI((e=>e.value)),g.hX(h))),f.D8(g.Eh(o.Eq))),this.thirdParty=this.prepareThirdPartyIdentities()}get identities(){return this.identityMapRef.current}prepareThirdPartyIdentities(){this.logger.debug("[Identities]","loading 3rd party identities");const e=this.metrics.startTimer("sdk_get_third_party_identities_task_duration_seconds",{}),t=this.trace.startSpan("load_tpd_ids"),n=[{load:e=>{return t=e.config,n=e.network,r=e.api,a=e.userId,i=e.logger,(0,s.G)(new d(t,n,r,a,i));var t,n,r,a,i}},{load:e=>{return t=e.userId,n=e.network,r=e.api,a=e.logger,(0,s.G)(new u(t,n,r,a));var t,n,r,a}},{load:e=>(e.cookies,e.messages,s.YP)},{load:e=>(e.cookies,s.YP)},{load:e=>(e.metrics,e.permutiveData,e.permutive,e.messages,s.YP)}],r=(0,a.oA)(n.map((e=>e.load(this.identityProviderEnv)))).map((e=>this.shouldAskForNewIdentity(e)?this.retrieveIdentity(e):Promise.resolve((0,i.bc)(e,this.getCachedTPDIdentity(e.tag)))));return Promise.all(r).then((e=>e.map((e=>{let[t,n]=e;return this.providers[t.tag]=t,this.mapTPDIdentityIfPresent(t.tag,n,t.ttlInSeconds)})))).then((e=>this.setIdentities(e))).then((0,c.bw)((()=>{this.metrics.stopTimer("sdk_get_third_party_identities_task_duration_seconds",e),t.finish()})))}getPrioritizedIdentities(e){const t={default:0,appnexus:1,pxid:1},n=Object.entries(e).map((e=>{let[t,{id:n,expiry:r,priority:a}]=e;return Object.assign(Object.assign(Object.assign({tag:t},n?{id:n}:{}),r?{expiry:r}:{}),void 0!==a?{priority:a}:{})})),r=n.filter((e=>((e,t)=>!!e.id&&!(0,a.t9)(o.Eq)(e.tag,t))(e,Object.values(this.providers).map((e=>e.tag))))),i=n.filter((e=>((e,t)=>!!e.id&&!!(0,a.t9)(o.Eq)(e.tag,t))(e,Object.values(this.providers).map((e=>e.tag))))),c=(0,a.DZ)((e=>(0,s.ij)(e.priority)))(r),u=c.length>0?Math.max(...c):0,d=r.map((e=>void 0!==e.priority?Object.assign(Object.assign({},e),{priority:e.priority}):Object.assign(Object.assign({},e),{priority:u+1}))),l=i.map((e=>void 0===t[e.tag]?{tag:e.tag,id:e.id,priority:u+b}:{tag:e.tag,id:e.id,priority:u+v}));return d.concat(l)}getIdentitiesMap(){return this.getFilteredIdentities(((e,t)=>!!t.value))}parseCustomerDefinedIdentities(e){const t=`Identify must be passed a non-empty string or list of { tag, id, priority? } tuples, value passed was '${JSON.stringify(e)}'`,n=e=>{throw new Error(e)},r=e=>(e.forEach((e=>{(e=>"string"==typeof e.id&&"string"==typeof e.tag)(e)||n(t),(e=>"email_sha256"!==e.tag||_.emailSHA256Regex.test(e.id))(e)||n("Identify called with unsupported format of email_sha256 ID. The support format is hex-encoded 64 character long lowercase string.")})),e);return"string"==typeof e?(a=e).length>0?[{id:a,tag:"default"}]:n(t):Array.isArray(e)?r(e):n(t);var a}extractIdentifyFromQueue(e){let{global:t}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const r=()=>t.q.findIndex((e=>"identify"===e.functionName)),a=(e,n)=>{if(e<0)return n;const i=t.q.splice(e,1)[0],s=this.parseCustomerDefinedIdentities(i.arguments[0]);return a(r(),n.concat(s))};return a(r(),n)}setIdentities(e){const t=e.filter((e=>!l.has(e.tag))).reduce(((e,t)=>{let{tag:n,id:r,expiry:a,priority:i}=t;return void 0===this.identities[n]&&this.logger.debug(`identities[${n}]: added`),e[n]=Object.assign(Object.assign(Object.assign({},r?{value:r}:{}),a?{expiry:a}:{}),void 0!==i?{priority:i}:{}),e}),{}),n=this.ref.current;this.setIdentityMap(Object.assign(Object.assign({},this.identities),t));const r=this.ref.current;return{identifyRequestRequired:()=>!g.xb(r)&&!g.Eh(o.Eq).equals(n,r)}}reset(){return(0,r.mG)(this,void 0,void 0,(function*(){this.setIdentityMap({}),yield Promise.all(Object.values(this.providers).map((e=>e.reset())))}))}getFilteredIdentities(e){return(0,c.m8)(...Object.entries(this.identities).filter((t=>{let[n,r]=t;return e(n,r)})).map((e=>{let[t,{value:n,expiry:r,priority:a}]=e;return(0,i.bc)(t,Object.assign(Object.assign({id:n},r?{expiry:r}:{}),void 0!==a?{priority:a}:{}))})))}shouldAskForNewIdentity(e){var t;const n=(0,s.ij)(null===(t=this.identities)||void 0===t?void 0:t[e.tag]);return(0,s.g_)((()=>!0),this.isIdentityExpired)(n)}getCachedTPDIdentity(e){return this.identities[e]?(0,s.ij)(this.identities[e].value):s.YP}mapTPDIdentityIfPresent(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:86400;const r=()=>Date.now()+Math.floor(1e3*n);return(0,s.g_)((()=>({tag:e,expiry:r()})),(t=>({tag:e,id:t,expiry:r()})))(t)}retrieveIdentity(e){return e.getId().then((t=>"skipped"===t.type?(0,i.bc)(e,s.YP):(0,i.zG)(t.result,(t=>this.metrics.track({name:(0,s.pC)(t)?"sdk_third_party_identity_present_count":"sdk_third_party_identity_missing_count",value:1,labels:{identity_tag:e.tag}})),(n=>(0,i.bc)(e,t.result)))))}isIdentityExpired(e){return"number"==typeof e.expiry&&Date.now()>=e.expiry}getCachedIdentitiesAndMigrateIfRequired(){return(e=>(0,c.m8)(...Object.entries(e).filter((e=>{let[t,n]=e;return!this.isIdentityExpired(n)&&!l.has(t)}))))(this.permutiveData.getData("identities")||{})}}_.emailSHA256Regex=/^[a-f0-9]{64}$/;const m=(e,t,n,r,i)=>{const s=(e,t)=>{const n=["(null)"];return n.indexOf(e)>-1||!!w[e]||(0,a.jV)(o.Eq)(t,n).length>0},c=e=>"721d6d85-35f0-4e35-bb38-13eb0d465158"===e,u={"be668577-07f5-444d-98e0-222b990951b1":s,"e43c8a90-d17b-4790-bfda-81b069b3b8c2":(e,t,n)=>["thestudentroom.co.uk"].some((e=>n.indexOf(e)>-1))&&(0,a.jV)(o.Eq)(t,["tsr-"]).length>0,"5d79bce7-5d2b-427e-a6c4-b89b6c7bf048":s,"366ab8da-5efa-4355-ab00-84db3b68ded2":e=>"96539955-4d7e-40df-882b-7e2fbacedb1c"===e||"345600e7-fb5f-48b1-9aa6-cde5396419b0"===e,"f3a06674-ebb9-4b9d-ba8f-0052018c0687":c,"38dadd0d-257a-4641-b332-b8b0fd20a6cb":c,"10453011-272d-49cd-9043-1964fdb36fd8":e=>"936ba6ac-9a8b-454d-ba98-facebd7553fe"===e},d={"fe68d1f7-c9f4-45b3-8905-7cda73d3fd74":e=>!!y[e]},l=u[e]||d[t];return!!l&&l(i,n,r)},b=2,v=3,y={},w={}},7658:(e,t,n)=>{n.d(t,{z:()=>r});class r{ingestIfEligible(e){return Promise.resolve()}}},922:(e,t,n)=>{n.d(t,{CL:()=>l,D0:()=>a,ED:()=>i,EW:()=>f,MU:()=>_,PH:()=>d,UW:()=>h,Uy:()=>c,eV:()=>s,jH:()=>g,mL:()=>p,qr:()=>o,t2:()=>u});var r=n(9853);const a=(0,r.MU)("engagement_edge_only",!0),i=(0,r.MU)("segment_transition_edge_only",!0),s=(0,r.MU)("track_form_submission",!0),o=(0,r.MU)("track_link_click",!0),c=(0,r.MU)("track_pageview_complete",!0),u=(0,r.MU)("track_pageview_engagement",!0),d=((0,r.$S)("sync_segments_cookie",!1),(0,r.$S)("track_slot_clicked",!0)),l=(0,r.$S)("track_slot_rendered",!0),f=(0,r.$S)("track_slot_viewable",!1),g=(0,r.$S)("track_targeting_keys",!1),p="_psegs",h=!0,_=6e5},4673:(e,t,n)=>{n.d(t,{U:()=>r});const r={$ip_address:"$ip_address",$ip_address_hash:"$ip_address_hash",$ip_geo_info_city:"$ip_geo_info_city",$ip_geo_info_continent:"$ip_geo_info_continent",$ip_geo_info_country:"$ip_geo_info_country",$ip_geo_info_postal_code:"$ip_geo_info_postal_code",$ip_geo_info_province:"$ip_geo_info_province",$ip_isp_info_autonomous_system_organization:"$ip_isp_info_autonomous_system_organization",$ip_isp_info_isp:"$ip_isp_info_isp",$ip_isp_info_organization:"$ip_isp_info_organization"}},8975:(e,t,n)=>{n.d(t,{v:()=>i});class r{constructor(e,t,n,r,a,i,s){this.logger=e,this.permutive=t,this.id=n,this.segmentCode=r,this.triggerType=a,this.config=i,this.workspaceLevelConfig=s,this.prefix="[Activation]"}getSegmentCode(){return this.segmentCode}getTriggerType(){return this.triggerType}getConfig(){return this.config}getWorkspaceLevelConfig(){return this.workspaceLevelConfig}trackImpression(e){return this.trackActivation("impression",e)}trackConversion(e){return this.trackActivation("conversion",e)}trackActivation(e,t){const n={reaction_id:this.id,type:e};this.logger.warn(this.prefix,"Tracking is disabled",n)}}var a=n(9853);class i{constructor(e,t,n){this.logger=e,this.permutive=t,this.clientContext=n,this.optimisedActivationsConfig={dfp:{dfp:[96740,96745,96754,96761,96762,96763,96742,96743,96782,96744,96748,96752,96755,96758,96759,96764,96767,96768,96777,96747,96749,96753,96757,96750,96756,96765,96769,96770,96766,96772,96773,96775,96776,96780,96781,96783,96784,96778,105471,98292,98293,89520,89521,92177,92178,92179,92183,92196,92205,92206,92207,92211,92210,92209,92204,92208,92182,92180,92212,92213,92214,89641,94814,94815,94816,84255,93688,93684,93674,93050,93686,94503,95599,95617,93650,93051,93658,95587,95597,103007,90306,90307,90308,90309,90310,90313,90314,90316,90311,90320,90324,90328,90331,90334,90338,90341,90342,90343,90349,90312,90315,90317,90318,90322,90319,90325,90326,90327,90330,90333,90335,90337,90340,90344,90345,90346,90347,90348,90350,90351,90352,90353,90354,90355,90356,90357,90358,90359,90360,90321,90323,92883,90329,90332,90336,90339,103821,93058,99677,99678,93697,88614,93521,93681,104241,93678,99681,104922,93672,100190,99676,93655,93693,88621,93682,105463,105201,93692,93677,93676,105787,90803,90943,90948,90950,90944,90945,90947,90949,90952,90954,90955,90956,90957,90958,90961,90964,90965,90966,90967,90969,90970,90971,90972,90973,90974,90975,90976,90977,90978,90979,90980,90981,90946,90951,90953,90959,90960,90962,90982,90983,90984,90986,90985,90987,87697,87698,87699,87700,87703,87704,87705,87706,87709,87710,87711,87712,87715,87716,87718,87721,87724,87725,87727,87728,87733,87730,87734,105459,95618,107418,107419,107485,107487,107486,107697,107698,107699,107700,107701,107702,107703,107704,107705,107706,107709,107710,107711,107712,107941,108462,108460,85696,104243,107207,87734,90984,90981,90973,90943,95491,90983,90949,90953,107208,90972,107206,90954,107202,96776,96758,90979,96765,96742,90964,87730,90945,96743,96744,96749,96761,96764,90966,107203,96783,96747,96768,107235,87698,107205,93653,96780,96778,96782,107201,107234,96754,99464,95620,96757,96775,107204,107237,95615,90971,95373,95375,93683,96784,90970,95592,96769,93680,96762,104166,96753,95370,90955,96781,107200,96748,96773,90960,96770,96745,96772,90985,96755,96763,87710,96740,96759,90962,107238,90959,90987,96750,96777,107236,90975,95607,96752,90967,96767,90965,107209,87699,96766,90951,90947,90961,87718,90944,87706,85694,99465,104624,99469,99466,92895,90316,87711,87715,87705,90308,87725,87721,87700,90307,92898,90347,90338,90328,92894,90325,90957,90313,90986,104167,98949,105469,93698,105859,90357,90350,90330,90980,93694,104920,95612,105858,105844,87727,90318,90976,90354,90326,107597,93689,95610,87697,105856,105850,87716,90322,90358,90346,90344,93053,104168,90321,105791,95596,99468,90323,90333,90332,90331,90345,93687,95371,95605,90956,90315,90324,90356,90978,104923,90310,90306,90946,90977,104921,87712,104169,93691,93679,104925,95619,90309,90337,90359,90352,90982,93384,95613,90319,90314,90974,93052,104924,93673,106605,95611,95606,105860,90312,90349,90327,90969,87724,99685,93696,106373,90335,90336,90351,90339,104623,94902,105468,99467,90311,90948,90340,90334,93656,106594,104934,104242,87703,105861,90355,90317,90360,90341,90353,90320,90343,90329,90348,90952,87728,87704,93055,90958,93659,90342,93685,93654,98948,99688,93651,105470,87709,96756,95602,93054,105857,90950,105784,95604,105855,87733,105862,110017,110018,112065,112066,112067,112069,112070,113388,113390,113609,115817,116437,117413,118207,118517,118812,119319,119320,119321,120730,121177,121577,122077,122078,122133,122528,124717,124718,127661,127663,128773,129527,129528,131845,132444,134115,134117,104907,105491,135708,136339,139079,143929,145736,145852,146373,146374,146375,147319,147320,147818,148079,148146,148315,148316,149079,149081,154471,154472,155947,156319,164547],dfp_legacy:{}},eyeota_pixel:[],dbm:{omitted:0},appnexus:{},appnexus_adserver:[],nativo:[],rubicon_ssp:[99676,90344,87699,95599,87700,87697,95602,93052,92895,92212,87698,96756,93051,92883,92210,90319,105470,139079],smart:[],freewheel:[]}}getSpecializedActivations(e){return this.optimisedActivationsConfig[e]}getActivations(e){return(0,a.Hn)(e)("activationConfigs",[]).filter((e=>this.areContextCriteriaSatisfied(e))).map((e=>new r(this.logger,this.permutive,e.id,e.sc,e.tt,e.c,e.wc)))}areContextCriteriaSatisfied(e){const t=e.cc,n=e=>{const t=this.clientContext.getContext()[e.key];switch(e.comparison){case"EQUALS":return t===e.value;case"NOT_EQUALS":return t!==e.value;case"CONTAINS":return"string"==typeof t&&t.indexOf(e.value)>=0;case"NOT_CONTAINS":return"string"==typeof t&&t.indexOf(e.value)<0}};return!t||("AND"===(r=t).operator?r.criteria.every(n):r.criteria.some(n));var r}}},9853:(e,t,n)=>{n.d(t,{$S:()=>s,Hn:()=>a,MU:()=>i});const r={standard_cohorts:{auto_init:!0,activationConfigs:[]},rubicon_ssp:{auto_init:!0,publisher_id:"20520",activationConfigs:[]},tradedesk:{auto_init:!0,advertiser_id:"uakr1sk",activationConfigs:[{id:"15e2f28f-9a4b-4830-bf85-8c8a19fabf0a",tt:"EveryTime",sc:98292,c:{},wc:{advertiser_id:"uakr1sk"}},{id:"7825386f-6e40-43be-abe9-6f00030b9d98",tt:"EveryTime",sc:98293,c:{secret:"bgarvwwtshdlvgfyb4ft01muxo0dqdnp",advertiser_id:"a0k8vcb"},wc:{advertiser_id:"uakr1sk"}},{id:"dc755e68-9561-4f64-be86-8d8feac9f84b",tt:"EveryTime",sc:139079,c:{},wc:{advertiser_id:"uakr1sk"}}]},clean_room:{auto_init:!0,publisher_permissions:{"1ea83aaa-b50b-4ce4-90c5-254b7084bc49":["allow_insights","allow_targeting_known_audiences","allow_targeting_modelled_audiences","allow_targeting_core_audiences"],"ad4f2c94-b966-4a42-b842-9dcef69afc7d":[],"e33d8baa-e928-42f8-ab37-8abdd5328767":["allow_targeting_core_audiences"]},activationConfigs:[]},dfp:{auto_init:!0,networks:[{network_code:"21787098806",name:"California Times"}],track_slot_rendered:!1,track_slot_viewable:!0,track_slot_clicked:!0,activationConfigs:[]},ssp:{auto_init:!0,ssps:["openx","appnexus","pubmatic"],cohort_mapping:{1e7:"bgyz",10000001:"bhgp",10000002:"bhhc",10000003:"bhhg",10000004:"bhhk",10000005:"bhhp",10000006:"bhhv",10000007:"bhhy",10000008:"bhie",10000010:"bhis",10000011:"bhiz",10000012:"bhji",10000013:"bhjq",10000014:"bhka",10000015:"bhkl",10000016:"bhkr",10000017:"bhky",10000018:"bhlg",10000019:"bhli",10000020:"bhlo",10000021:"bhlp",10000022:"bhnd",10000023:"bhnl",10000024:"bhnp",10000025:"bhnw",10000026:"bhoj",10000035:"bgzb",10000036:"bhgq",10000037:"bhgs",10000038:"bhgw",10000039:"bhgy",10000040:"bhgz",10000041:"bhhe",10000042:"bhhh",10000043:"bhhw",10000044:"bhhx",10000045:"bhhz",10000046:"bhia",10000047:"bhif",10000048:"bhig",10000049:"bhii",10000050:"bhij",10000051:"bhik",10000052:"bhim",10000053:"bhip",10000054:"bhit",10000055:"bhiu",10000056:"bhiv",10000057:"bhiy",10000058:"bhjm",10000059:"bhjr",10000060:"bhjs",10000061:"bhjw",10000062:"bhjx",10000063:"bhkm",10000064:"bhir",10000065:"bhko",10000066:"bhkp",10000067:"bhkq",10000068:"bhkz",10000069:"bhla",10000070:"bhlb",10000071:"bhle",10000072:"bhlf",10000073:"bhlq",10000074:"bhlt",10000075:"bhlu",10000076:"bhlw",10000077:"bhlx",10000078:"bhly",10000079:"bhmb",10000080:"bhmi",10000081:"bhmj",10000082:"bhml",10000083:"bhmp",10000084:"bhmr",10000085:"bhmw",10000086:"bhmz",10000087:"bhne",10000088:"bhnf",10000089:"bhni",10000090:"bhnn",10000324:"bhhj",10000325:"bhhi",10000327:"bhku",10000328:"bhkt",10000329:"bhkw",10000330:"bhkv",10000687:"bgzc",10000688:"bgza",10000689:"bhha",10000690:"bhgt",10000691:"bhgx",10000692:"bhgv",10000693:"bhgr",10000694:"bhgu",10000695:"bhhb",10000696:"bhhd",10000697:"bhhf",10000698:"bhhl",10000699:"bhho",10000700:"bhhm",10000701:"bhhn",10000702:"bhhq",10000703:"bhht",10000704:"bhhu",10000705:"bhhs",10000706:"bhhr",10000707:"bhib",10000708:"bhid",10000709:"bhic",10000710:"bhio",10000711:"bhin",10000712:"bhil",10000713:"bhiq",10000714:"bhih",10000715:"bhiw",10000716:"bhix",10000717:"bhja",10000718:"bhjc",10000719:"bhjd",10000720:"bhje",10000721:"bhjf",10000722:"bhjb",10000723:"bhjg",10000724:"bhjh",10000725:"bhjo",10000726:"bhjk",10000727:"bhjn",10000728:"bhjj",10000729:"bhjl",10000730:"bhjy",10000731:"bhju",10000732:"bhjv",10000733:"bhjz",10000734:"bhjt",10000735:"bhkj",10000736:"bhkk",10000737:"bhki",10000738:"bhkd",10000739:"bhkc",10000740:"bhkf",10000741:"bhkh",10000742:"bhkb",10000743:"bhkg",10000744:"bhke",10000745:"bhjp",10000746:"bhkn",10000747:"bhkx",10000748:"bhks",10000749:"bhld",10000750:"bhlc",10000751:"bhlh",10000752:"bhlk",10000753:"bhlj",10000754:"bhll",10000755:"bhlm",10000756:"bhlv",10000757:"bhna",10000758:"bhmv",10000759:"bhmt",10000760:"bhmy",10000761:"bhmc",10000762:"bhmo",10000763:"bhls",10000764:"bhmq",10000765:"bhme",10000766:"bhmh",10000767:"bhlz",10000768:"bhlr",10000769:"bhnb",10000770:"bhmk",10000771:"bhmu",10000772:"bhmx",10000773:"bhmg",10000774:"bhmd",10000775:"bhmf",10000776:"bhnc",10000777:"bhmn",10000778:"bhmm",10000779:"bhma",10000780:"bhms",10000781:"bhng",10000782:"bhnj",10000783:"bhnh",10000784:"bhnk",10000785:"bhno",10000786:"bhnm",10000787:"bhnu",10000788:"bhnv",10000789:"bhns",10000790:"bhnt",10000791:"bhnq",10000792:"bhnr",10000793:"bhob",10000794:"bhny",10000795:"bhod",10000796:"bhoh",10000797:"bhog",10000798:"bhnz",10000799:"bhoa",10000800:"bhoe",10000801:"bhnx",10000802:"bhoc",10000803:"bhof"},activationConfigs:[]},facebook_pixel_v2:{auto_init:!0,activationConfigs:[{id:"73860514-04e5-4392-bb82-866d638bdd30",tt:"EveryTime",sc:98292,c:{},wc:{}},{id:"5b7d5ea1-16b1-402c-9664-9539fb23ec22",tt:"EveryTime",sc:139079,c:{},wc:{}}]},prebid:{auto_init:!0,revenue_insights_enabled:!0,data_provider_config:{ac_bidders:[]},activationConfigs:[]},web:{auto_init:!1,track_pageview_engagement:!0,track_form_submission:!0,track_link_click:!0,track_pageview_complete:!0,add_alchemy_taxonomy:!1,add_alchemy_entities:!1,engagement_edge_only:!0,segment_transition_edge_only:!0,activationConfigs:[]}},a=e=>{const t=r[e];return(e,n)=>{var r;return null!==(r=null==t?void 0:t[e])&&void 0!==r?r:n}},i=a("web"),s=a("dfp");a("facebook_pixel_v2")},2836:(e,t,n)=>{n.d(t,{z:()=>i});var r=n(3030);class a{constructor(e){this.context=e}getContext(){return this.context}updateContext(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((e=>{let[t,n]=e;this.context[t]=n}))}}class i extends a{constructor(e){super(e)}getClient(){var e;const t=null!==(e=document.title)&&void 0!==e?e:"";return Promise.resolve({type:"web",user_agent:navigator.userAgent||"",url:(0,r.bk)(window.location.href),domain:window.location.hostname||"",title:t,referrer:(0,r.bk)(document.referrer)})}}},389:(e,t,n)=>{n.d(t,{p:()=>i});var r=n(3577);const a="permutive-pvc";class i extends((0,r.h)(a)){constructor(e){super(e)}}},5865:(e,t,n)=>{n.d(t,{J:()=>a});var r=n(3577);class a extends((0,r.h)("permutive-unprocessed-pba")){constructor(e){super(e)}}},3577:(e,t,n)=>{n.d(t,{h:()=>o});var r=n(3735),a=n(6567),i=n(7554);const s=e=>t=>class extends t{constructor(){super(...arguments),this.key=e}put(e){return this.db.then((t=>t.put(e,this.key))).then(r.Q1)}getIfPresent(){return this.db.then((e=>e.get(this.key))).then(a.ij)}reset(){return this.db.then((e=>e.delete(this.key)))}},o=e=>(0,r.zG)(class{constructor(e){this.db=Promise.resolve((0,i.E)(e.namespace,e.logger,e.consentTracking))}},s(e))},5700:(e,t,n)=>{n.d(t,{LP:()=>i,dG:()=>r,eP:()=>a});const r=4096,a=`Cookie exceeds maximum supported size of ${r} bytes for most browsers.`,i="Cookie is missing required parameters."},5461:(e,t,n)=>{n.d(t,{S:()=>c});var r=n(3735),a=n(5700);class i{constructor(e,t,n){this.namespace=e,this.config=t,this.logger=n}setCookie(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var r;if(!(t&&e&&this.config.cookieExpiry&&this.config.cookieDomain)){const{cookieExpiry:n,cookieDomain:i}=null!==(r=this.config)&&void 0!==r?r:{};throw this.logger.warn(`Unable to set cookie. ${a.LP}`,{value:t,cookieName:e,cookieExpiry:n,cookieDomain:i}),new Error(a.LP)}const i=this.namespace.getNamespacedStorageKey(e),s=[encodeURIComponent(i),"=",encodeURIComponent(t),"; expires=",this.config.cookieExpiry,"; domain=",this.config.cookieDomain,"; path=/",n?"; samesite=none; secure":""].join("");if(s.length>a.dG)throw this.logger.warn(`Unable to set cookie ${i}. ${a.eP}`),new Error(a.eP);return this.logger.debug(`Setting cookie ${s}`),document.cookie=s,!0}getCookie(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e:this.namespace.getNamespacedStorageKey(e),n=new RegExp("\\b"+encodeURIComponent(t)+"=([^;]+)").exec(document.cookie);return null!==n?decodeURIComponent(n[1]):null}deleteCookie(e){if(!e||!this.config.cookieDomain)return!1;const t=this.namespace.getNamespacedStorageKey(e);return document.cookie=encodeURIComponent(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; domain="+this.config.cookieDomain+"; path=/",!0}}var s=n(4769);const o=e=>{const{logger:t,consentTracking:n}=e,r=e=>(t.debug(`Cookie: Failed to set cookie ${e} as consent is revoked`),!1);return e=>class extends e{constructor(){super(...arguments),this.setCookie=(0,s.v)(super.setCookie.bind(this),r,n.isRevoked)}}},c=(e,t,n,a)=>new((0,r.zG)(i,o({consentTracking:a,logger:n})))(e,t,n)},9773:(e,t,n)=>{n.d(t,{S:()=>d});var r=n(3735),a=n(2688),i=n(787),s=n(365);class o{constructor(e){this.namespace=e}getExternalData(e){const t=this.namespace.getNamespacedStorageKey(e);return window.localStorage.getItem(t)}getExternalJsonData(e){const t=this.getExternalData(e);return null===t?null:(0,i.A)(t)}setExternalData(e,t){const n=this.namespace.getNamespacedStorageKey(e);try{window.localStorage.setItem(n,t)}catch(e){}}setExternalJsonData(e,t){return(0,r.zG)((n=t,(0,s.Y3)((function(){var e=JSON.stringify(n);if("string"!=typeof e)throw new Error("Converting unsupported structure to JSON");return e}),r.yR)),(0,s.UI)((t=>this.setExternalData(e,t))),(0,s.g_)((e=>{throw(0,a.w)(e)}),r.Q1));var n}removeExternalData(e){const t=this.namespace.getNamespacedStorageKey(e);window.localStorage.removeItem(t)}}var c=n(4769);const u=e=>{const{logger:t,consentTracking:n}=e,r=e=>{t.debug(`External Data: Failed to set key ${e} as consent is revoked`)},a=r,i=r;return e=>class extends e{constructor(){super(...arguments),this.setExternalData=(0,c.v)(super.setExternalData.bind(this),a,n.isRevoked),this.setExternalJsonData=(0,c.v)(super.setExternalJsonData.bind(this),i,n.isRevoked)}}},d=(e,t,n)=>new((0,r.zG)(o,u({consentTracking:n,logger:t})))(e)},342:(e,t,n)=>{n.d(t,{SX:()=>i});class r{constructor(){this.prefix="[Permutive]",this.debugStyle=["color: blue"].join(";")}log(){return console.log.bind(window.console,this.prefix)(...arguments)}debug(){return console.debug.bind(window.console,"%c%s",this.debugStyle,this.prefix)(...arguments)}warn(){return console.warn.bind(window.console,this.prefix)(...arguments)}error(){return console.error.bind(window.console,this.prefix)(...arguments)}}class a{log(){}debug(){}warn(){}error(){}}const i=e=>{var t;return e.loggingEnabled&&void 0!==(null===(t=window.console)||void 0===t?void 0:t.log)?new r:new a}},8491:(e,t,n)=>{n.d(t,{Q:()=>i});var r=n(3735);const a="[MESSAGES]";class i{constructor(e){this.logger=e,this.messageListenerMap={},this.replayQueue={},this.onceTracker={},this.defaultMessageOptions={withReplay:!1,once:!1}}on(e,t,n){const r=this.mergeMessageOptions(n);r.withReplay&&this.processReplayQueue(e,t);const a=s(e,this.messageListenerMap).push(t)-1;return r.once&&this.addToOnceTracker(e,a),a}once(e,t){return this.on(e,t,{once:!0})}off(e,t){if(null==t)return this.messageListenerMap[e]=[],void(this.replayQueue[e]=[]);t<0?this.logError('Index for "off" fell out of range',{index:t}):s(e,this.messageListenerMap)[t]=r.Q1}emit(e,t,n){const r=this.mergeMessageOptions(n);s(e,this.messageListenerMap).length>0?(this.logDebug(`Emitting Event: ${e}`),this.emitMessageWithPayload(e,t)):r.withReplay&&this.addToReplayQueue(e,t)}addToReplayQueue(e,t){s(e,this.replayQueue).push(t)}processReplayQueue(e,t){var n;null===(n=this.replayQueue[e])||void 0===n||n.forEach((e=>t(e)))}emitMessageWithPayload(e,t){var n;null===(n=this.messageListenerMap[e])||void 0===n||n.forEach(((n,r)=>{n(t),this.removeListenerIfSetToFireOnlyOnce(e,r)}))}addToOnceTracker(e,t){s(e,this.onceTracker).push(t)}removeListenerIfSetToFireOnlyOnce(e,t){var n;(null===(n=this.onceTracker[e])||void 0===n?void 0:n.includes(t))&&this.off(e,t)}mergeMessageOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(Object.assign({},this.defaultMessageOptions),e)}logError(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.error(a,...t)}logDebug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.debug(a,...t)}}const s=(e,t)=>{var n;return null!==(n=t[e])&&void 0!==n?n:t[e]=[]}},5619:(e,t,n)=>{n.d(t,{Eq:()=>l,X:()=>f,b:()=>d});var r=n(2851),a=n(2116),i=n(4268),s=n(2751),o=n(4011),c=n(3735),u=n(6567);const d=()=>({environment:"",events_count:0,os:"",sdk_version:"",segments_count:0,session_count:0,session_init_count:0,session_view_count:0}),l=i.n_({environment:s.Eq,events_count:o.Eq,os:s.Eq,sdk_version:s.Eq,segments_count:o.Eq,session_count:o.Eq,session_init_count:o.Eq,session_view_count:o.Eq}),f=e=>{const t=p(e.userId),n=(0,c.zG)(r.vP(e.userId,e.sessionId),r.UI((e=>{let[t,n]=e;return`${t},${n}`})),p),i=String(Math.random()),s=(0,c.zG)(e.sdkVariant,u.UI((e=>`-${e}`)),u.fS((()=>""))),o={environment:"web",events_count:0,os:g(window.navigator.userAgent||""),sdk_version:"v19.97.4"+s,segments_count:0};return(0,c.zG)(a.vP({session_count:t(e.sessionId),session_init_count:n(r.a9(i)),session_view_count:n(e.viewId)}),a.UI((0,c.ls)((e=>r.vP(e)),r.UI((e=>Object.assign(Object.assign({},o),e))))))},g=e=>{const t=e.toLowerCase();return t.includes("windows")?"windows":t.includes("iphone")||t.includes("ipad")?"ios":t.includes("android")?"android":t.includes("macintosh")?"macos":t.includes("linux")?"linux":"unknown"},p=e=>t=>a.dQ((n=>{let{previousState:a}=n;const u=(0,c.zG)(r.vP(e,t),r.g_(function(e){if(null!==e&&"object"==typeof e&&"scope"in e&&"lastValue"in e&&"count"in e)return e;return{scope:"",lastValue:"",count:1}}(a),((e,t)=>{let[n,r]=t;return{scope:n,lastValue:r,count:n!==e.scope?1:r!==e.lastValue?e.count+1:e.count}})),r.D8(i.n_({scope:s.Eq,lastValue:s.Eq,count:o.Eq})));return{state:u,value:(0,c.zG)(u,r.UI((e=>e.count)))}}))},7594:(e,t,n)=>{n.d(t,{p:()=>S});var r=n(655),a=n(2688),i=n(3735),s=(n(7341),n(9384)),o=function(e,t){return function(){return t(e())}},c=function(e){return function(t){return o(t,e)}},u=i.a9,d=(i.yR,i.yR,s.F4,s.Xl,function(){return Math.random()});function l(e,t){return(0,i.zG)(d,c((function(n){return Math.floor((t-e+1)*n+e)})))}c((function(e){return e<.5}));var f=n(7927),g=n(4673),p=n(2652),h=n(5619),_=n(3328),m=n(7241),b=n(4268);function v(e){return e[0]}function y(e){return e[1]}var w=function(e){return function(t){return[e(v(t)),y(t)]}},k=n(6934),E=n(5151),P=n(3992);const S=e=>{let t=[];const n=e=>{t=[...t,...e]},s=t=>{(0,i.zG)(e.metrics.consume(),I(t),n)};let o=e.context.current;e.context.onChange((e=>{s(o),o=e}));const c="[Metrics Reporter]",u=t=>(0,i.zG)({},(0,i.ls)((0,f.dx)("continent",g.U.$ip_geo_info_continent),(t=>e.enrichers.enrich(t,!0).output)),(e=>Object.assign(Object.assign({},t),e))),d=d=>{let{beacon:l}=d;s(o);const f=t;t=[];const g=(0,i.zG)(f,m.ru((0,i.zG)(b.Uz((e=>e[0]))(h.Eq))),_.UI((0,i.ls)(m.Ri,w((0,i.ls)(m.YM,u)))),E.uU((t=>{let[n,i]=t;return k.Y3((()=>((t,n)=>(0,r.mG)(void 0,void 0,void 0,(function*(){if(!t)return e.api.metrics(n);if(!e.api.metricsBeacon(n))throw new Error("Failed to send beacon.")})))(l,{context:n,items:i})),(t=>(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.logger.error(c,...n)}(`Failed to publish metrics ${(0,a.w)(t).message}`,i),I(n)(i))))})),E.UI((0,i.ls)(_.bj,_.xH,(0,p.bw)(n),_.xb)));return g()};e.messages.on("permutive:ready",(()=>{const e=l(3e4,9e4),t=n=>(0,P.HJ)((()=>(0,r.mG)(void 0,void 0,void 0,(function*(){const n=(yield d({beacon:!1}))?5e3:e();t(n)}))),n);t(5e3),(0,p.Bf)((()=>d({beacon:!0})),{capture:!1})}))},I=e=>t=>(0,i.zG)(t,_.UI((t=>[e,t])))},4074:(e,t,n)=>{function r(e,t,n,r,s){var o;return(null!==(o=n.getData("metricsEnabled"))&&void 0!==o?o:(()=>{const e=Math.random()<=t.metricsSamplingPercentage/100;return n.setData("metricsEnabled",e),e})())?new a(e,r,s):new i}n.d(t,{g:()=>r});class a{constructor(e,t,n){this.sdkInitTimestamp=e,this.messages=t,this.logger=n,this.prefix="[Metrics]",this.pendingMetrics=[],this.pendingTimers={},this.track({name:"sdk_initialisation_start_time_seconds",value:e/1e3,labels:{}})}isEnabled(){return!0}consume(){const e=this.pendingMetrics;return this.pendingMetrics=[],e}track(e){this.logDebug(`Tracking ${e.name}`,{metric:e}),this.pendingMetrics.push(e)}trackTimeSinceInit(e,t){const n=(performance.now()-this.sdkInitTimestamp)/1e3;this.logDebug("timer stopped",e,n),this.track({name:e,value:n,labels:t})}startTimer(e,t){const n=performance.now(),r=this.generateRandomKey(e);return this.pendingTimers[r]={startTime:n,labels:t},r}stopTimer(e,t){const n=this.pendingTimers[t];if(n){const r=(performance.now()-n.startTime)/1e3;this.logDebug("timer stopped",e,r),this.track({name:e,value:r,labels:n.labels}),delete this.pendingTimers[t]}}generateRandomKey(e){return`${e}-${[...Array(24)].map((()=>Math.random().toString(36)[2])).join("")}`}logDebug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.debug(this.prefix,...t)}}class i{isEnabled(){return!1}consume(){return[]}track(e){}trackTimeSinceInit(e,t){}startTimer(e,t){return""}stopTimer(e,t){}}},8317:(e,t,n)=>{n.d(t,{S:()=>s});var r=n(655),a=n(3735),i=n(2652);class s{constructor(e,t){this.db=e,this.options=t}getSessionId(){return this.options.session_id}sessionHasChanged(){return this.options.hasChanged}static decodeSessionData(e){return e&&"object"==typeof e&&e.hasOwnProperty("session_id")&&e.hasOwnProperty("last_updated")?Object.assign(Object.assign({},e),{last_updated:new Date(e.last_updated)}):null}reset(){return this.db.delete(this.options.session_data_key)}persistSessionData(e){return(0,r.mG)(this,void 0,void 0,(function*(){const t=e.last_updated.toISOString();yield this.db.put(Object.assign(Object.assign({},e),{last_updated:t}),this.options.session_data_key)}))}static generateNewSession(e){return{session_id:(0,i.k$)(),last_updated:e}}static hasExpired(e,t,n){if(isNaN(t.getTime()))return!0;return e>new Date(t.getTime()+1e3*n)}static initialise(e,t,n){return(0,r.mG)(this,void 0,void 0,(function*(){const r={timeout_seconds:1800,session_data_key:"permutive-session",hasChanged:!1,logger:n};e.deleteCookie(r.session_data_key);const o=new Date,c=yield t.get(r.session_data_key).catch(a.gn),u=s.decodeSessionData(c),d=null===u||s.hasExpired(o,u.last_updated,r.timeout_seconds)?Object.assign(Object.assign({},s.generateNewSession(o)),{hasChanged:!0}):Object.assign(Object.assign({},u),{last_updated:o,hasChanged:!1}),l=new s(t,(0,i.PM)(r,d));return yield l.persistSessionData(d),l}))}}},4026:(e,t,n)=>{n.d(t,{S:()=>m});var r=n(3735),a=n(2688),i=n(787),s=n(365),o=n(2652),c=n(4730),u=n(926);class d{constructor(e,t,n){this.config=e,this.namespace=t,this.logger=n,this.prefix="[Data Store]",this.permutiveData={},this.permutiveDataSize=0,this.localStorageQueue=new Set,this.localStorageScheduler=new c.b(e.localStorageWriteDelay,e.localStorageWriteMaxDelay),this.debouncedFlush=this.localStorageScheduler.schedule(this.flushLocalStorageQueue.bind(this)),this.debouncedStorageKeys=new Set(e.localStorageDebouncedKeys),this.localStorageScheduler.scheduleForPageUnload(this.flushLocalStorageQueue.bind(this)),this.permutiveData=this.buildData()}reset(){this.permutiveData={}}getDataSize(){return this.permutiveDataSize}getData(e){return this.permutiveData[e]}setData(e,t){this.permutiveData[e]=t,this.requestWrite(e)}deleteKey(e){delete this.permutiveData[e],this.requestWrite(e)}requestWrite(e){this.debouncedStorageKeys.has(e)?(this.localStorageQueue.add(e),this.debouncedFlush()):this.writeData(e)}flushLocalStorageQueue(){for(let e of this.localStorageQueue)this.writeData(e);this.localStorageQueue.clear()}buildData(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.getDataChunk("misc")),this.getDataChunk("models")),this.getDataChunk("queries")),this.getDataChunk("enrichers"))}getDataChunk(e){const t=this.namespace.getNamespacedStorageKey(this.chunkKeyToStorageKey(e)),n=window.localStorage.getItem(t),r=null===n?null:(0,i.A)(n);return n&&r?(this.permutiveDataSize+=2*n.length,r):{}}chunkKeyToStorageKey(e){switch(e){case"models":return this.config.permutiveDataModelsKey;case"queries":return this.config.permutiveDataQueriesKey;case"enrichers":return this.config.permutiveDataEnrichersKey;case"misc":return this.config.permutiveDataMiscKey;default:throw new Error(`Unhandled chunk key "${e}"`)}}writeData(e){this.logger.debug(`Data Store: Writing ${e} to localStorage`);const[t,n]=this.dataKeyToChunkInfo(e);return s.Y3((()=>window.localStorage.setItem(this.namespace.getNamespacedStorageKey(t),JSON.stringify(n))),(t=>{const n=(0,a.w)(t);return this.logError(`Failed to set ${e}. Got ${n}`),n}))}dataKeyToChunkInfo(e){const t=e=>(0,o.eu)(this.permutiveData,e);switch(e){case"models_data":case"models_last_updated":return[this.chunkKeyToStorageKey("models"),t(l)];case"query_states":case"internal_query_states":case"external_query_states":case"state_offset":case"event-source-id":return[this.chunkKeyToStorageKey("queries"),t(f)];case"enricher:geoip":return[this.chunkKeyToStorageKey("enrichers"),t(g)];case u.Kd:case"identities":case"amp_ready":case"metricsEnabled":case"addon:tradedesk":case"addon:tracking_pixel":case"addon:eyeota_pixel":case"addon:pinterest_pixel":case"addon:facebook_pixel_v2":case"addon:appnexus":case"addon:ddp":case"addon:gigya":case"addon:neustar_fabrick":case"pubmatic":case"lotame":return[this.chunkKeyToStorageKey("misc"),t(p)];default:throw new Error(`Unhandled data key "${e}"`)}}logError(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.error(this.prefix,...t)}}const l=["models_data","models_last_updated"],f=["query_states","internal_query_states","external_query_states","state_offset","event-source-id"],g=["enricher:geoip"],p=[u.Kd,"identities","amp_ready","metricsEnabled","addon:tradedesk","addon:tracking_pixel","addon:eyeota_pixel","addon:pinterest_pixel","addon:facebook_pixel_v2","addon:appnexus","addon:ddp","addon:gigya","addon:neustar_fabrick","pubmatic","lotame"];var h=n(4769);const _=e=>{const{logger:t,consentTracking:n}=e,r=e=>(t.debug(`Data Store: Failed to write ${e} as consent is revoked`),s.F2(void 0));return e=>class extends e{constructor(){super(...arguments),this.writeData=(0,h.v)(super.writeData.bind(this),r,n.isRevoked)}}},m=(e,t,n,a)=>new((0,r.zG)(d,_({consentTracking:a,logger:n})))(e,t,n)},569:(e,t,n)=>{n.d(t,{L:()=>r});class r{constructor(e){this.config=e}getNamespacedStorageKey(e){return`${this.config.stateNamespace}${e}`}}},7575:(e,t,n)=>{n.d(t,{u:()=>r});class r{constructor(e,t){this.metrics=e,this.messages=t,this._isRealtime=!1,this._isReady=!1}isRealtime(){return this._isRealtime}isReady(){return this._isReady}setAsRealtime(e){this._isRealtime=!0,this.messages.emit("permutive:realtime"),this.metrics.trackTimeSinceInit("sdk_realtime_targeting_set_task_duration_seconds",{}),this.metrics.track({name:"sdk_user_segments_count",value:e,labels:{}})}setAsReady(){this._isReady=!0,this.messages.emit("permutive:ready"),this.metrics.trackTimeSinceInit("sdk_initialisation_task_duration_seconds",{}),window.performance&&window.performance.memory&&(this.metrics.track({name:"sdk_heap_memory_bytes_used",value:window.performance.memory.usedJSHeapSize,labels:{}}),this.metrics.track({name:"sdk_heap_memory_limit_fraction_used",value:window.performance.memory.usedJSHeapSize/window.performance.memory.jsHeapSizeLimit,labels:{}}))}}},7256:(e,t,n)=>{n.d(t,{a:()=>s});var r=n(655),a=n(3735),i=n(7927);class s{constructor(e,t,n,r,a,i,s){this.config=e,this.localStorage=t,this.logger=n,this.permutiveData=r,this.eventSourceId=a,this.cookies=i,this.externalData=s}reset(){return(0,r.mG)(this,void 0,void 0,(function*(){return this.logger.log("Resetting State"),(0,a.zG)(this.cookies.deleteCookie(this.config.cookieName),(e=>this.externalData.removeExternalData(this.config.cookieName)),(e=>(0,i.XP)({_paols:!0,_papns:!0,_pcrdbs:!0,_pcrprs:!0,_pdfps:!0,_pfws:!0,_pnativo:!0,_prps:!0,_prubicons:!0,_psegs:!0,_psmart:!0,"permutive-id":!0,"permutive-loaded":!0,"permutive-prebid-rtd":!0,"permutive-events-cache":!0,_pssps:!0}).forEach((e=>this.externalData.removeExternalData(e)))),(e=>this.permutiveData.reset()),(e=>this.eventSourceId.generateAndSet()),(e=>Promise.all([this.localStorage.delete(this.config.permutiveDataModelsKey),this.localStorage.delete(this.config.permutiveDataQueriesKey),this.localStorage.delete(this.config.permutiveDataEnrichersKey),this.localStorage.delete(this.config.permutiveDataMiscKey)])),a.Q1)}))}}},7274:(e,t,n)=>{n.d(t,{u:()=>r});class r{constructor(e,t,n,r,a){this.permutiveData=e,this.permutiveReset=t,this.userId=n,this.viewId=r,this.eventCollection=a}getPermutiveData(e){return this.permutiveData.getData(e)}setPermutiveData(e,t){return this.permutiveData.setData(e,t)}getStateSizeInBytes(){return this.permutiveData.getDataSize()+this.eventCollection.getStateSizeInBytes()}reset(){return this.permutiveReset.reset()}}},9117:(e,t,n)=>{n.d(t,{M:()=>o});var r=n(3735),a=n(6567),i=n(2851),s=n(2652);class o{constructor(e,t,n,a){this.config=e,this.clientContext=t,this.cookies=n,this.externalData=a;const[s,o]=i.Ue(this.getOrGenerateUserId());this.ref=s,this.setUserId=o,(0,r.zG)(s,i.YP((e=>{this.cookies.setCookie(this.config.cookieName,e,!0),this.externalData.setExternalData(this.config.cookieName,e),this.clientContext.updateContext(["user_id",e])})))}isEqual(e){return this.ref.current===e}get(){return this.ref.current}set(e){this.setUserId(e)}getOrGenerateUserId(){return(0,a.fS)((()=>(0,a.fS)(s.k$)(this.getUserIdFromLocalStorage())))(this.getUserIdFromCookie())}getUserIdFromCookie(){return this.getUserIdFromStorageIfValid("cookie")}getUserIdFromLocalStorage(){return this.getUserIdFromStorageIfValid("localStorage")}getUserIdFromStorageIfValid(e){const t=(0,a.DT)(s.Gz);return(0,r.zG)("cookie"===e?this.cookies.getCookie(this.config.cookieName):this.externalData.getExternalData(this.config.cookieName),a.ij,(0,a.tS)(t))}}},9880:(e,t,n)=>{n.d(t,{W:()=>i});var r=n(2851),a=n(2652);class i{constructor(e){this.config=e;const t=e.viewId&&(0,a.Gz)(e.viewId)?e.viewId:(0,a.k$)(),[n,i]=r.Ue(t);this.ref=n,this.set=i}get(){return this.ref.current}generateAndSet(){const e=(0,a.k$)();return this.set(e),e}}},7554:(e,t,n)=>{n.d(t,{E:()=>a});var r=n(8259);const a=(e,t,n)=>{const a=window.localStorage;return(0,r.rK)(a,"[Local Storage]",e,t,n)}},9332:(e,t,n)=>{n.d(t,{u:()=>a});n(6640);var r=n(8259);const a=(e,t,n)=>{const a=window.sessionStorage;return(0,r.rK)(a,"[Session Storage]",e,t,n)}},8259:(e,t,n)=>{n.d(t,{_z:()=>d,oP:()=>u,rK:()=>f});var r=n(655),a=n(2688),i=n(787),s=n(365),o=n(3735),c=n(4769);class u{constructor(e,t){this.storage=e,this.namespace=t}put(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){const n=this.namespace.getNamespacedStorageKey(t.toString());return this.storage.setItem(n,JSON.stringify(e)),t}))}get(e){return(0,r.mG)(this,void 0,void 0,(function*(){const t=this.namespace.getNamespacedStorageKey(e.toString()),n=this.storage.getItem(t);return null===n?null:(0,i.A)(n)}))}delete(e){return(0,r.mG)(this,void 0,void 0,(function*(){const t=this.namespace.getNamespacedStorageKey(e.toString());this.storage.removeItem(t)}))}deleteStore(){return(0,r.mG)(this,void 0,void 0,(function*(){}))}}const d=e=>{const{logger:t,consentTracking:n,prefix:r}=e,a=(e,n)=>(t.debug(`${r} Failed to write ${String(n)} as consent is revoked`),Promise.resolve(n));return e=>class extends e{constructor(){super(...arguments),this.put=(0,c.v)(super.put.bind(this),a,n.isRevoked)}}},l=e=>{const{logger:t,prefix:n,storage:i}=e;return e=>class extends e{constructor(){super(...arguments),this.isSupported=null}isStorageSupported(){return null!==this.isSupported||(this.isSupported=s.Y3((()=>{const e="_permutive_ls_test";return i.setItem(e,e),i.getItem(e),i.removeItem(e),!0}),a.w),(0,o.zG)(this.isSupported,s.EQ((e=>{t.warn(`${n} Is NOT supported`,e)}),(()=>{t.debug(`${n} Is supported`)})))),this.isSupported}put(e,t){const n=Object.create(null,{put:{get:()=>super.put}});return(0,r.mG)(this,void 0,void 0,(function*(){return(0,o.zG)(this.isStorageSupported(),s.EQ((e=>{throw e}),(()=>n.put.call(this,e,t))))}))}get(e){const t=Object.create(null,{get:{get:()=>super.get}});return(0,r.mG)(this,void 0,void 0,(function*(){return(0,o.zG)(this.isStorageSupported(),s.EQ((()=>null),(()=>t.get.call(this,e))))}))}delete(e){const t=Object.create(null,{delete:{get:()=>super.delete}});return(0,r.mG)(this,void 0,void 0,(function*(){return(0,o.zG)(this.isStorageSupported(),s.EQ(o.Q1,(()=>t.delete.call(this,e))))}))}deleteStore(){const e=Object.create(null,{deleteStore:{get:()=>super.deleteStore}});return(0,r.mG)(this,void 0,void 0,(function*(){return(0,o.zG)(this.isStorageSupported(),s.EQ(o.Q1,(()=>e.deleteStore.call(this))))}))}}},f=(e,t,n,r,a)=>new((0,o.zG)(u,l({logger:r,prefix:t,storage:e}),d({logger:r,consentTracking:a,prefix:t})))(e,n)},2497:(e,t,n)=>{n.d(t,{Ec:()=>s,_8:()=>i});var r=n(6567),a=n(2652);const i=e=>{const t=e.__tcfapi,n={type:"aborted"},i=["tcloaded","useractioncomplete"];return t?(0,a.a4)((()=>o(t,"getTCData")),(()=>o(t,"getTCData").then((e=>"loaded"===(null==e?void 0:e.cmpStatus)&&i.includes(null==e?void 0:e.eventStatus))))).then((0,r.g_)((()=>n),(e=>({type:"loaded",data:e})))):Promise.resolve({type:"missing"})},s=e=>e.gdprApplies?(0,r.G)(e.vendor.consents):r.YP,o=(e,t)=>new Promise((n=>{e(t,2,(e=>{n(e)}))}))},5165:(e,t,n)=>{n.d(t,{D:()=>r});const r={tradedesk:21,ddp:755,appnexus:32,pubmatic:76,neustar_fabrick:468}},6037:(e,t,n)=>{n.d(t,{C:()=>c});var r=n(655),a=n(1500),i=n(3735);const s=(o=[[{name:"dfp",import:Promise.resolve().then(n.bind(n,4388))}],[],[],[],[],[],[{name:"clean_room",import:Promise.resolve().then(n.bind(n,5912))}],[],[],[],[{name:"facebook_pixel_v2",import:Promise.resolve().then(n.bind(n,9278))}],[],[],[],[],[],[],[],[{name:"prebid",import:Promise.resolve().then(n.bind(n,9581))}],[],[],[],[{name:"rubicon_ssp",import:Promise.resolve().then(n.bind(n,8563))}],[],[],[{name:"tradedesk",import:Promise.resolve().then(n.bind(n,8394))}],[],[{name:"web",import:Promise.resolve().then(n.bind(n,4400))}],[],[],[{name:"ssp",import:Promise.resolve().then(n.bind(n,9557))}]],(0,i.zG)((0,a.xH)(o),(0,a.u4)({},((e,t)=>Object.assign(Object.assign({},e),{[t.name]:t.import})))));var o;const c=e=>{const t=Object.entries(s).map((t=>{let[n,a]=t;return(0,r.mG)(void 0,void 0,void 0,(function*(){return e.logger.log(`Loading addon ${n}`),(yield a).load(e)}))}));return Promise.all(t)}},9658:(e,t,n)=>{n.r(t),n.d(t,{createAddon:()=>E,getCachedDFPSegments:()=>w});var r=n(655),a=n(2688),i=n(365),s=n(3735),o=n(6567),c=n(2851),u=n(9853),d=n(2652);const l="_pdfps";n(5700);var f=n(1500),g=n(2751);let p=!1;let h=null;const _=(e,t)=>{const{logger:n}=t;(0,s.zG)(e,o.UI((e=>{!0!==p&&e.pubadsReady&&(null!=h||(h=r=>{let{slot:a}=r;const{getContentUrl:i}=a;if(!i||"function"!=typeof i)return;(0,s.zG)(i(),(0,g.pn)("&trunc=1"))&&(n.debug("DFP content URL has been truncated!"),(e=>{let{metrics:t,logger:n}=e;p||(t.track({name:"sdk_targeting_size_limit_exceeded_count",value:1,labels:{target:"dfp"}}),p=!0,n.debug("DFP has exceeded targeting limit"))})(t),h&&e.pubads().removeEventListener("slotRenderEnded",h),h=null)}),e.pubads().addEventListener("slotRenderEnded",h))})))},m=(e,t,n,r)=>{const{logger:a}=t;_(e,t);(0,s.zG)(e,o.UI((e=>(e=>{e.cmd.push((()=>{const{getTargeting:t,setTargeting:i}=e.pubads(),s=t("permutive")||[],o=Object.values(n.eligibleSegments).map(String).concat(n.cloudCohorts).concat("rts"),c=(0,f.uK)((e=>o.includes(e))),{left:u}=c(s),d=r.concat(u).concat("rts");a.debug("DFP setting GPT targeting to",d),i("permutive",d)}))})(e))))};var b=n(4388);const v={liveSegments:[],cloudCohorts:[],eligibleSegments:{}},y={segments:v,getGAMKeyValues:()=>({permutive:""})},w=e=>e.getExternalJsonData(l)||[],k=(e,t,n)=>{const{logger:r,externalData:i,api:s}=t;let o=n.map(String).concat(v.cloudCohorts);r.debug("DFP is updating with targeting values",o),m(e,t,v,o);try{i.setExternalJsonData(l,o)}catch(e){const t=(0,a.w)(e),n="DFP failed to set data. Got:";r.error(n,t),s.reportError(`${n} ${t.message}`)}return((e,t)=>{let{api:n,logger:r}=e;(0,u.$S)("sync_segments_cookie",!1)?(r.debug("DFP syncing segment cookie _pdfps"),n.segmentSync({key:l,value:t})):r.debug("DFP sync segments cookie not enabled, skipping sync")})(t,JSON.stringify(o)),r.debug("DFP live segments updated to",n),n},E=e=>(0,r.mG)(void 0,void 0,void 0,(function*(){const{api:t,logger:n,activationManager:r,messages:a,externalData:u,nextGenOutput:f,userId:g,cookies:p}=e,h=yield(0,d.a4)((()=>window.googletag),(()=>!!window.googletag),{waitTimeInMs:10,maxAttempts:200,exponentialBackOff:!1});o.Wi(h)&&n.error("[DFP]: unable to find google tag script on the page"),(0,s.zG)(h,o.UI((e=>(e=>e.cmd.push((()=>e.pubads().setTargeting("prmtvsdk","web"))))(e))));y.getGAMKeyValues=()=>Object.assign(Object.assign({},(0,s.zG)((0,b.generateProjectSpecificKVs)(e),i.Vn((e=>{var n;return n=e,t.reportError(`[DFP] ${n}`,g.get()),e})),i.fS((()=>({}))))),{permutive:y.segments.liveSegments.join(",")}),v.eligibleSegments=(e=>{const t=e.getSpecializedActivations("dfp"),n={};for(const e of t.dfp)n[e]=e;for(const e of Object.keys(t.dfp_legacy)){const r=Number(e);n[r]=t.dfp_legacy[r]}return n})(r);const _=(0,s.zG)(f.queryLanguageCohorts.all,c.UI((e=>(n.debug("DFP received QL segments",{qlSegments:e}),((e,t)=>e.filter((e=>e in t)).map((e=>t[e])))(e,v.eligibleSegments)))),c.D8(d.cO));return(0,s.zG)(c.vP(_,f.cloudCohorts.gam),c.YP((0,d.Z_)(t,g,(t=>{let[r,a]=t;n.debug("DFP received updated cohorts",{filteredQlSegments:r,cloudCohorts:a}),v.cloudCohorts=a,v.liveSegments=k(h,e,r)})))),n.debug("DFP initialised with segments",v),a.on("permutive:reset",(0,d.Z_)(t,g,(()=>{n.debug("DFP received 'permutive:reset' event"),u.removeExternalData(l),p.deleteCookie(l)}))),a.emit("permutive:dfp:ready"),y}))},4388:(e,t,n)=>{n.r(t),n.d(t,{generateProjectSpecificKVs:()=>P,load:()=>d});var r=n(2688),a=n(365),i=n(3735),s=n(922),o=n(2652),c=n(9658);const u={},d=e=>{e.q.push({functionName:"addon",arguments:["dfp",{}]});window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push((()=>l(e)))},l=e=>{e.permutive.ready((0,o.Z_)(e.api,e.userId,(()=>y(e.metrics))),"realtime");w(e.externalData);(0,i.zG)(P(e),a.tS((e=>a.Y3((()=>(0,o.qh)(e).forEach((e=>{let[t,n]=e;googletag.pubads().setTargeting(t,n)}))),r.w))),a.Vn((t=>e.api.reportError(`[DFP:load], ${t}`,e.userId.get())))),_(e.permutive),googletag.cmd.push((()=>{m(e.permutive),b(e.permutive)})),window.addEventListener("message",g(e.permutive),!1)},f=e=>{let{advertiserId:t,campaignId:n,lineItemId:r,creativeId:a}=e;return{advertiser_id:(0,o.rH)(t),campaign_id:(0,o.rH)(n),line_item_id:(0,o.rH)(r),creative_id:(0,o.rH)(a)}},g=e=>t=>{var n;try{const r=JSON.parse(t.data);if(!r.permutive_type||"google_ad_click"!==r.permutive_type)return;const{ad_unit_path:a,creative_id:i,advertiser_id:s,order_id:o,line_item_id:c}=null!==(n=null==r?void 0:r.data)&&void 0!==n?n:{},d=f({lineItemId:c,advertiserId:s,campaignId:o,creativeId:i});let l;Object.keys(u).some((e=>{const{slot:t,creative_id:n}=u[e];if((null==t?void 0:t.ad_unit_path)===a&&n===d.creative_id)return l=u[e],!0})),l=null!=l?l:Object.assign(Object.assign({},d),{is_empty:!1}),p(e,l)}catch(e){}},p=(e,t)=>{s.PH&&t&&e.track("SlotClicked",t)},h=(e,t,n)=>{u[t]=n,v(e,n),E(e,t)},_=e=>{const t=googletag.pubadsReady&&googletag.pubads().getSlots();t&&t.forEach((t=>{const n=t.getResponseInformation();if(!n)return;const r=Object.assign(Object.assign({},f(n)),{is_empty:!1,service_name:"publisher_ads",slot:k(t)}),a=t.getSlotElementId();h(e,a,r)}))},m=e=>{googletag.pubads().addEventListener("slotRenderEnded",(t=>{const n=Object.assign(Object.assign({},f(t)),{is_empty:t.isEmpty,service_name:t.serviceName,slot:k(t.slot)});if(t.size){const[e,r]=t.size;"number"==typeof e&&"number"==typeof r&&(n.width=e,n.height=r)}const r=t.slot.getSlotElementId();h(e,r,n)}))},b=e=>{s.EW&&googletag.pubads().addEventListener("impressionViewable",(t=>{let{slot:n,serviceName:r}=t;const a=n.getResponseInformation();if(!a)return;const i=Object.assign(Object.assign({},f(a)),{service_name:r,slot:k(n)});e.track("SlotViewable",i)}))},v=(e,t)=>{if(!s.CL)return;var n;n=Object.assign(Object.assign({},t),{rendered_timestamp:Date.now()}),e.track("SlotRendered",n)},y=e=>{let t=0;const n=googletag.pubadsReady&&googletag.pubads().getSlots();n&&n.forEach((e=>e.getResponseInformation()&&t++));const r=0===t?"sdk_targeting_realtime_success_count":"sdk_targeting_realtime_fail_count";e.track({name:r,value:1,labels:{target:"dfp"}})},w=e=>{const t=(0,c.getCachedDFPSegments)(e);googletag.cmd.push((()=>{const{getTargeting:e,setTargeting:n}=googletag.pubads(),r=e("permutive")||[];n("permutive",[...new Set([...t.map(String),...r])])}))},k=e=>{const t={ad_unit_path:e.getAdUnitPath(),slot_element_id:e.getSlotElementId()};return s.jH?Object.assign(Object.assign({},t),(()=>{const t={},n=[];let r=[];const a=(e,a)=>{const i="slot"===e?e=>t[e]=1:()=>{},s=a.getTargetingKeys();r=s;for(let s=0;s<r.length;s++){const o=r[s];if(void 0!==t[o]&&"service"===e)continue;const c=[],u=a.getTargeting(o);for(let e=0;e<u.length;e++)c.push(u[e].toString());c.length>0&&(i(o),n.push({key:o,value:c}))}};return a("slot",e),a("service",googletag.pubads()),{targeting_keys:n}})()):t},E=(e,t)=>{let n=!1;const r=()=>{n&&"hidden"===document.visibilityState&&p(e,u[t])},a=()=>{n=!0},i=()=>{n=!1};try{document.addEventListener("visibilitychange",r);const e=document.getElementById(t);e&&(e.addEventListener("mouseover",a),e.addEventListener("mouseout",i))}catch(e){}},P=e=>{let{userId:t,viewId:n}=e;return a.Y3((()=>({})),r.w)}},8394:(e,t,n)=>{n.r(t),n.d(t,{TradeDeskPixel:()=>o,load:()=>c});var r=n(655),a=n(2497);class i{constructor(e,t,n){this.options=e,this.storageKey=t,this.syncTimeoutSeconds=n,this.sendPixel()}sendPixel(){const e=this.options.permutiveData.getData(this.storageKey);e&&!this.isExpired(e)||this.makeUrl(this.options.config.apiKey,this.options.state.userId.get()).then((e=>{this.fire(e),this.options.permutiveData.setData(this.storageKey,(new Date).getTime())}))}fire(e){(new Image).src=e}isExpired(e){return isNaN(e)||(new Date).getTime()>e+1e3*this.syncTimeoutSeconds}}const s=`${"https:"===location.protocol?"https:":"http:"}//match.adsrvr.org/track/cmf/generic?ttd_pid=dbegppc&ttd_tpi=1&ttd_puid=`;class o extends i{constructor(e){super(e,"addon:tradedesk",86400)}makeUrl(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){const n=yield this.addGDPRParams();return`${s}${e},${t}${n}`}))}addGDPRParams(){return(0,r.mG)(this,void 0,void 0,(function*(){const e=yield(0,a._8)(window);return`&gdpr=1&gdpr_consent=${"loaded"===e.type?e.data.tcString:""}`}))}}const c=e=>{e.q.push({functionName:"addon",arguments:["tradedesk",{}]})}},9278:(e,t,n)=>{n.r(t),n.d(t,{FacebookV2Pixel:()=>s,load:()=>o});var r=n(2652);class a{constructor(e,t){this.isFirstRun=void 0===e.permutiveData.getData(t),this.cachedSegmentsMembership=new Set(e.nextGenOutput.queryLanguageCohorts.all.current),this.isFirstRun&&e.permutiveData.setData(t,!0),e.messages.on("permutive:reset",(()=>e.permutiveData.setData(t,!1)))}}class i extends a{constructor(e,t,n){super(e,n);e.activationManager.getActivations(t).forEach((t=>{const n=t.getSegmentCode(),r=this.cachedSegmentsMembership.has(n);this.isFirstRun&&r?this.fire(t,r):e.permutive.trigger(n,"",(e=>{this.fire(t,e.result)}))}))}}class s extends i{constructor(e){super(e,"facebook_pixel_v2","addon:facebook_pixel_v2")}fire(e,t){fbq("trackCustom",!0===t?"PermutiveSegmentEntry":"PermutiveSegmentExit",{segment_id:e.getSegmentCode()}),e.trackImpression()}}const o=e=>{(0,r.a4)((()=>e.permutive.addon("facebook_pixel_v2",{})),(()=>"undefined"!=typeof fbq),{waitTimeInMs:1e3,maxAttempts:3})}},8563:(e,t,n)=>{n.r(t),n.d(t,{RubiconSspAddon:()=>c,load:()=>o});var r=n(3735),a=n(2652),i=n(2851);const s="_prubicons",o=e=>{e.q.push({functionName:"addon",arguments:["rubicon_ssp",{}]})};class c{constructor(e){this.options=e,this.liveSegments=[],this.eligibleSegments={},this.liveSegments=e.externalData.getExternalJsonData(s)||[];const t=this.options.activationManager.getSpecializedActivations("rubicon_ssp");for(let e=0;e<t.length;e++)this.eligibleSegments[t[e]]=!0;(0,r.zG)(e.nextGenOutput.queryLanguageCohorts.all,i.YP((e=>this.updateIfNecessary(e))))}updateIfNecessary(e){const t=this.filterSegments(e);(0,a.cO)(t,this.liveSegments)||this.options.externalData.setExternalJsonData(s,t),this.liveSegments=t}filterSegments(e){return e.filter((e=>e in this.eligibleSegments))}}},4400:(e,t,n)=>{n.r(t),n.d(t,{WebAddon:()=>S,load:()=>P});var r=n(655),a=n(2688),i=n(365),s=n(3735),o=n(4011),c=n(6567),u=n(7209),d=n(6341),l=n(922),f=n(2652),g=n(9853);const p=(0,g.MU)("add_alchemy_entities",!1),h=(0,g.MU)("add_alchemy_taxonomy",!1);function _(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object.assign(Object.assign(Object.assign({},e&&h?{taxonomy_labels:"$alchemy_taxonomy_labels"}:{}),e&&p?{entity_names:"$alchemy_entity_names"}:{}),{classifications_watson:{taxonomy_labels:"$taxonomy_labels"}})}function m(e,t,n,r){const a=Object.assign(Object.assign(Object.assign({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info"},{}),e),t);n.track("Pageview",a).then((e=>{e&&r.emit("permutive:event:pageview",e)}))}function b(e,t,n,r,a,i){let s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:c.YP;const u=v(e,t,n,r,a),d=(0,c.fS)((()=>null))(o);let l={useBeacon:s};null!==d&&(l=Object.assign(Object.assign({},l),{unprocessedData:d})),i.track("PageviewComplete",u,l)}function v(e,t,n,r,a){return Object.assign(Object.assign(Object.assign({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info"},r),n),{aggregations:Object.assign({PageviewEngagement:Object.assign({engaged_time:e},l.UW?{completion:t}:{})},l.ED?{SegmentEntry:Array.from(a.segmentEntryQueryCodes),SegmentExit:Array.from(a.segmentExitQueryCodes),CohortEntry:Array.from(a.cohortEntryQueryCodes),CohortExit:Array.from(a.cohortExitQueryCodes)}:{})})}var y=n(3992);const w=["mousemove","click","scroll"],k=["email","tel","submit","reset","button","file","password","radio","checkbox"],E=["email","e-mail","password","tel","telephone","phone","name_first","name_last","sa_zip"],P=e=>{0};class S{constructor(e){this.dirtyState=!1,this.cancelEngagementTimer=()=>{},this.totalCompletion=0,this.totalEngagedTime=0,this.cancelPageviewCompleteTimer=()=>{},this.hasPageviewCompleteFired=!1,this.cleanupPageEngagementDetection=s.Q1,this.permutive=e.permutive,this.options=e,this.api=e.api,this.clientContext=e.clientContext,this.logger=e.logger,this.unprocessedPVC=e.unprocessedEvents.PageviewComplete,this.options.customProperties.overrideCustomProps(e.page||{});this.pageEngagementDetected=(()=>{this.dirtyState=!0,l.Uy&&this.resetTimeout()}).bind(this),m(_(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.permutive,this.options.messages),this.enablePageEngagementDetection(),"loading"!==document.readyState?this.attachListeners():window.addEventListener("DOMContentLoaded",this.attachListeners.bind(this),!1),l.t2&&(this.cancelEngagementTimer=this.registerEngagementInterval(this.getEventInterval())),l.Uy&&(this.setPageviewCompleteTimeout(l.MU),(0,f.aT)((()=>{this.hasPageviewCompleteFired||b(this.totalEngagedTime,this.totalCompletion,_(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager,this.permutive)})))}sendLinkClickEvent(e,t){if(window.location.href&&e.href){const n=0===e.href.indexOf("data:")?"NOT_URL":e.href;this.permutive.track("LinkClick",{dest_url:n},{useBeacon:t})}}sendFormSubmissionEvent(e){{const t=e.currentTarget,n={form:Object.assign(Object.assign(Object.assign({method:t.method||"GET",properties:this.serializeForm(t)},"string"==typeof t.id?{id:t.id}:{}),t.name&&"string"==typeof t.name?{name:t.name}:{}),t.action&&"string"==typeof t.action?{action:t.action}:{})};this.permutive.track("FormSubmission",n)}}trackEngagementInterval(e){return(0,r.mG)(this,void 0,void 0,(function*(){const t=this.updateState(e);!function(e,t,n,r,a,i){const s=Object.assign(Object.assign({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info",engaged_time:e,total_engaged_time:t},a),{completion:n,total_completion:r});i.track("PageviewEngagement",s)}(t.engaged_time,t.total_engaged_time,t.completion,t.total_completion,this.options.customProperties.getCustomProps(),this.permutive),this.hasPageviewCompleteFired||(yield function(e,t,n,r,a,i,s,o,c){const u=v(e,t,s,o,c);return a.then((e=>{const t={props:u,sessionId:n,viewId:r,client:e};i.put(t)}))}(this.totalEngagedTime,this.totalCompletion,this.options.sessionManager.getSessionId(),this.options.viewId.get(),this.clientContext.getClient(),this.unprocessedPVC,_(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager))}))}reset(e){var t;return(0,r.mG)(this,void 0,void 0,(function*(){if(this.disablePageEngagementDetection(),l.Uy){const e=yield this.unprocessedPVC.getIfPresent();this.hasPageviewCompleteFired=!1,b(this.totalEngagedTime,this.totalCompletion,_(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager,this.permutive,!1,e)}this.dirtyState=!1,this.options.state.viewId.generateAndSet(),this.totalCompletion=0,this.totalEngagedTime=0,this.updateWebOptions(e),this.options.customProperties.overrideCustomProps(this.options.page||{}),this.enablePageEngagementDetection();const n={logger:this.logger,config:Object.assign(Object.assign({},this.options.config),{watson:null!==(t=this.options.watson)&&void 0!==t?t:this.options.config.watson}),clientContext:this.clientContext,api:this.api,permutiveData:this.options.permutiveData,metrics:this.options.metrics,sessionManager:this.options.sessionManager,enrichers:this.options.enrichers,network:this.options.network};(0,d.H)(n)().then((()=>{m(_(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.permutive,this.options.messages),l.t2&&(this.cancelEngagementTimer(),this.cancelEngagementTimer=this.registerEngagementInterval(this.getEventInterval()))}))}))}serializeForm(e){return[...e.getElementsByTagName("input")].filter((e=>!(!e.type||!e.id||e.disabled||e.checked||"fieldset"===e.nodeName.toLowerCase()||-1!==k.indexOf(e.type.toLowerCase())||-1!==E.indexOf(e.name.toLowerCase())))).map((e=>({name:e.name||e.id,value:e.value}))).filter((e=>e.value.length<120))}registerEngagementInterval(e){return(0,y.UM)((()=>{this.dirtyState&&this.trackEngagementInterval(e)}),1e3*e)}attachListeners(){const e=e=>"a"===e.tagName.toLowerCase(),t=e=>e instanceof Element,n=t=>e(t)?(0,c.G)(t):t.parentElement?e(t.parentElement)?(0,c.G)(t.parentElement):n(t.parentElement):c.YP;l.eV&&[].slice.call(document.getElementsByTagName("form"),0).forEach((e=>e.addEventListener("submit",(0,s.ls)(c.DT(this.canTrackPermutiveEvent("FormSubmission")),c.UI((0,f.Z_)(this.options.api,this.options.userId,this.sendFormSubmissionEvent.bind(this))))))),l.qr&&document.body.addEventListener("click",(0,s.ls)(c.DT(this.canTrackPermutiveEvent("LinkClick")),c.UI((e=>({event:e,anchor:(0,s.zG)(e.target,c.ij,c.tS(c.DT(t)),c.tS(n))}))),c.DZ((e=>{let{event:t,anchor:n}=e;return c.pC(n)?c.G({event:t,anchor:n.value}):c.YP})),c.UI((e=>{let{event:t,anchor:n}=e;return this.sendLinkClickEvent(n,(r=t,!("_blank"===n.target||r.metaKey||r.ctrlKey||r.shiftKey||2===r.which||3===r.which)));var r}))),{capture:!0})}updateState(e){const t=Math.max(this.totalCompletion,this.getCurrentCompletion()),n=t-this.totalCompletion;return this.totalEngagedTime+=e,this.totalCompletion=t,this.dirtyState=!1,{engaged_time:e,total_engaged_time:this.totalEngagedTime,completion:n,total_completion:this.totalCompletion}}getCurrentCompletion(){if("function"==typeof this.options.getPageCompletion)return(0,s.zG)((0,i.Y3)((0,s.ls)(this.options.getPageCompletion,Number,(e=>isNaN(e)?0:e),(0,u.uZ)(o.Df)(0,1)),a.w),(0,i.EQ)((e=>(this.logger.warn("Web: invoking getPageCompletion threw an error. Got",e),0)),(e=>(this.logger.debug("Web: invoking getPageCompletion returned",e),e))));return(()=>{const e=document.documentElement.scrollHeight,t=window.pageYOffset+window.innerHeight;return t<=0?0:t>=e?1:t/e})()}setPageviewCompleteTimeout(e){return(0,y.HJ)((()=>{this.hasPageviewCompleteFired||(b(this.totalEngagedTime,this.totalCompletion,_(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager,this.permutive,!1),this.hasPageviewCompleteFired=!0)}),e)}resetTimeout(){this.cancelPageviewCompleteTimer(),this.cancelPageviewCompleteTimer=this.setPageviewCompleteTimeout(l.MU)}registerPageEngagementCleanup(e){"function"==typeof e?this.cleanupPageEngagementDetection=()=>(0,i.Y3)((()=>{e(),this.cleanupPageEngagementDetection=s.Q1}),(e=>this.logger.warn("Page detection cleanup threw an error",(0,a.w)(e)))):this.logger.warn("No page detection cleanup was registered")}enablePageEngagementDetection(){this.options.addPageEngagementDetection&&(0,s.zG)(this.options.addPageEngagementDetection(this.pageEngagementDetected),(e=>this.registerPageEngagementCleanup(e))),this.setDirtyEventListenersTo(!0,this.getDirtyEvents())}disablePageEngagementDetection(){this.cleanupPageEngagementDetection(),this.setDirtyEventListenersTo(!1,this.getDirtyEvents())}setDirtyEventListenersTo(e,t){const n=e?window.addEventListener:window.removeEventListener;return t.forEach((e=>n(e,this.pageEngagementDetected))),null}getDirtyEvents(){return this.options.dirtyEvents||w}getEventInterval(){return this.options.eventInterval||5}canTrackPermutiveEvent(e){return t=>{var n,r;return(0,s.zG)(null===(r=null===(n=this.options)||void 0===n?void 0:n.filterPermutiveEvent)||void 0===r?void 0:r[e],c.DT((e=>"function"==typeof e)),c.tS((0,s.ls)((e=>i.Y3((()=>e(t)),(e=>new Error(`Threw an unexpected error: ${(0,a.w)(e)}`)))),i.tS(i.DT((e=>"boolean"==typeof e),(()=>new Error("Did not return a boolean")))),(0,f.bw)(i.Vn((t=>this.logger.error(`Filter predicate for "${e}" event failed`,t)))),c.Uo)),c.fS((()=>!0)))}}updateWebOptions(e){e.watson&&"object"==typeof e.watson&&"enabled"in e.watson&&"boolean"==typeof e.watson.enabled||delete e.watson,"object"==typeof e.filterPermutiveEvent&&null!==e.filterPermutiveEvent||delete e.filterPermutiveEvent;const t={addPageEngagementDetection:void 0,dirtyEvents:void 0,eventInterval:void 0,filterPermutiveEvent:void 0,getPageCompletion:void 0,page:void 0,watson:void 0};return this.options=Object.assign(Object.assign(Object.assign({},this.options),t),e)}}},9078:(e,t,n)=>{n.d(t,{a:()=>r});class r{constructor(e){var t;this.messages=e,this.handlers={},this.messageQueue={};null===(t=window.addEventListener)||void 0===t||t.call(window,"message",(e=>{var t;"permutive"===(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.origin)&&this.handle(e)}),!1),this.messages.once("permutive:api:ready",(function(){var e;null===(e=window.postMessage)||void 0===e||e.call(window,{origin:"permutive",type:"sdk-init"},"*")}))}listen(e,t){if(e in this.handlers||(this.handlers[e]=[]),this.handlers[e].push(t),e in this.messageQueue){const t=this.messageQueue[e];if(void 0===t)return;for(let e=0;e<t.length;e++){const n=t[e];this.handle(n)}}}handle(e){var t,n,r;if(e.data.type in this.handlers)this.handlers[e.data.type].forEach((t=>{t(e)}));else{(null!==(t=(n=this.messageQueue)[r=e.data.type])&&void 0!==t?t:n[r]=[]).push(e)}}}},533:(e,t,n)=>{n.d(t,{o:()=>r,s:()=>a});class r extends Error{constructor(){super(r.defaultMessage),this.name=r.errorName}static get defaultMessage(){return"Network request failed"}}r.errorName="NetworkRequestFailedError";class a extends Error{constructor(){super(a.defaultMessage),this.name=a.errorName}static get defaultMessage(){return"Network request timed out"}}a.errorName="NetworkRequestTimeoutError"},7423:(e,t,n)=>{n.d(t,{F:()=>d});var r=n(655),a=n(2688),i=n(3735),s=n(6567),o=n(3328),c=n(3030),u=n(533);class d{constructor(e,t,n,r,a){this.urls=e,this.config=t,this.network=n,this.metricsCollector=r,this.logger=a,this.prefix="[API]"}identify(e,t,n){const r=()=>this.reqWithMetrics(e,"sdk_http_identify_seconds",{url:this.urls.getEndpointUrl("/identify",s.G(this.config.apiVersion)),method:"POST",payload:{user_id:t.get(),aliases:n},contentType:"text/plain",dataType:"json",withCredentials:!0});return this.identifyPromise?this.identifyPromise=this.identifyPromise.then(r):this.identifyPromise=r()}metrics(e){return this.network.req({url:this.urls.getEndpointUrl("/internal/metrics",s.G(this.config.apiVersion)),method:"POST",payload:e,contentType:"text/plain",dataType:"text",withCredentials:!1})}metricsBeacon(e){return this.network.reqWithBeacon({url:this.urls.getEndpointUrl("/internal/metrics",s.G(this.config.apiVersion)),payload:e})}track(e,t,n){const r=this.getTrackUrl(t,{isFullyEnriched:n,useBeacon:!1});return this.reqWithMetrics(e,"sdk_http_events_seconds",{url:r,method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1})}trackBatch(e,t){const n=this.getTrackUrl(t,{isFullyEnriched:!0,useBeacon:!1});return this.reqWithMetrics(e,"sdk_http_events_seconds",{url:n,method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1})}trackBeacon(e,t){const n=this.getTrackUrl(e,{isFullyEnriched:t,useBeacon:!0});return this.network.reqWithBeacon({url:n,payload:e})}trackBatchBeacon(e){const t=this.getTrackUrl(e,{isFullyEnriched:!0,useBeacon:!0});return this.network.reqWithBeacon({url:t,payload:e})}reset(e){return this.reqWithMetrics(e,"sdk_http_reset_seconds",{url:this.urls.getEndpointUrl("/reset",s.G(this.config.apiVersion)),method:"POST",payload:null,contentType:"text/plain",dataType:"json",withCredentials:!0})}segmentSync(e){return this.network.req({url:`https://${this.config.segmentSyncApiHost}/sync/${e.key}`,method:"POST",payload:`value=${encodeURIComponent(e.value)}`,contentType:"application/x-www-form-urlencoded",dataType:"json",withCredentials:!0})}modelsBinary(e){return this.reqWithMetrics(e,"sdk_http_models_seconds",{url:this.getModelsUrl("binary"),method:"GET",contentType:"text/plain",dataType:"binary",withCredentials:!1})}modelsJson(e){return this.reqWithMetrics(e,"sdk_http_models_seconds",{url:this.getModelsUrl("json"),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!1})}state(e,t,n,r,a,i){return this.reqWithMetrics(e,"sdk_http_reset_seconds",{url:this.urls.getEndpointUrl("/state",s.G("v1.0"),[["fetch_unseen",JSON.stringify(i)]]),method:"POST",payload:{group_id:t,event_source_id:n,state:JSON.stringify(r),last_seen_offset:a},contentType:"text/plain",dataType:"json",withCredentials:!1})}appnexus(e){return this.network.req({url:e,method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!0,timeout:2e3})}pxid(e){return this.network.req({url:this.urls.makeAuthenticatedUrl(e),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!0,timeout:2e3})}queries(){const e={addons:{dfp:{activations:{dfp:[],dfp_legacy:{}},auto_init:!0,track_slot_rendered:!1,track_slot_viewable:!1,track_slot_clicked:!1,track_targeting_keys:!1,sync_segments_cookie:!1},web:{auto_init:!1,track_pageview_engagement:!0,track_pageview_complete:!0,track_form_submission:!1,track_link_click:!1,engagement_edge_only:!0,segment_transition_edge_only:!1}},queries:{queries:{},eventSegments:{},eventsLookup:[],literalsLookup:[],subexpressionsLookup:[],stateSyncReplays:[],propertiesLookup:[]},queries_metadata:{}},t=`${this.config.cdnBaseUrl.startsWith("dev.local:")?"http":"https"}://${this.config.cdnBaseUrl}/queries/68547f8f-2fd8-4ff3-9b63-51e86e2edee8-amp.json`;return this.network.req({url:t,withCredentials:!1,dataType:"json",method:"GET"}).catch((()=>e))}pxidReset(e){return this.network.req({url:this.urls.makeAuthenticatedUrl(e),method:"POST",payload:null,contentType:"text/plain",dataType:"json",withCredentials:!0})}uploadCohortMemberships(e,t){return this.reqWithMetrics(e,"sdk_http_upload_cohort_memberships_seconds",{url:this.urls.getCCSCohortMembershipEndpointUrl("/amp/cohorts",s.G("alpha"),[["i",t.user_id]]),method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1})}reqWithMetrics(e,t,n){const r=e.startTimer(t,{});return this.network.req(n).then((n=>(0,i.zG)(e.stopTimer(t,r),(e=>n))))}reportError(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;return(0,r.mG)(this,void 0,void 0,(function*(){const d=(0,a.w)(e);if(this.logError("Reporting error:\n",d),!this.config.sendClientErrors)return void this.logDebug("Send errors not enabled. Skipping");const l=e=>this.network.req({url:this.urls.getSdkErrorsUrl("/errors",s.G(this.config.sdkErrorsApiVersion)),method:"POST",payload:[e],contentType:"text/plain",dataType:"text",withCredentials:!1}),f=e=>{this.metricsCollector.track({name:"sdk_http_generic_network_request_fail_count_total",value:1,labels:{network_error_type:e}})};yield(0,i.zG)([u.o,u.s],o.Ew((e=>d.name===e.errorName||d.message.indexOf(e.errorName)>=0||d.message.indexOf(e.defaultMessage)>=0)),s.g_((()=>{const e=(()=>{var e,r,a,i,s,o,u,l;const f={error_message:null!==(r=null===(e=null==d?void 0:d.message)||void 0===e?void 0:e.toString())&&void 0!==r?r:"",stack_trace:null===(a=null==d?void 0:d.stack)||void 0===a?void 0:a.split("\n")},g=t?{user_id:t}:{};return Object.assign({platform:"web",sdk_version:"v19.97.4",ql_runtime_version:"v7.0.0",timestamp:n,domain:null!==(s=null===(i=null===window||void 0===window?void 0:window.location)||void 0===i?void 0:i.hostname)&&void 0!==s?s:"",url:(0,c.bk)(null===(o=null===window||void 0===window?void 0:window.location)||void 0===o?void 0:o.href),referrer:(0,c.bk)(null===document||void 0===document?void 0:document.referrer),user_agent:null!==(u=null===navigator||void 0===navigator?void 0:navigator.userAgent)&&void 0!==u?u:"",error_message:null!==(l=f.error_message)&&void 0!==l?l:String(d),stack_trace:f.stack_trace},g)})();return l(e).catch((0,i.ls)(a.w,(e=>this.logError(e))))}),(e=>(0,r.mG)(this,void 0,void 0,(function*(){return f(e.errorName)})))))}))}getTrackUrl(e,t){const{isFullyEnriched:n,useBeacon:r}=t,a=Array.isArray(e),i=!n;return this.urls.getEndpointUrl(a?"/batch/events":"/events",s.G(this.config.apiVersion),[["enrich",JSON.stringify(i)],["sdkp",JSON.stringify(!r)]])}getModelsUrl(e){const t=`https://${this.config.cdnBaseUrl}`;switch(e){case"binary":return`${t}/models/v2/68547f8f-2fd8-4ff3-9b63-51e86e2edee8-models.bin`;case"json":return`${t}/models/68547f8f-2fd8-4ff3-9b63-51e86e2edee8-models.json`}}logDebug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.debug(this.prefix,...t)}logError(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.error(this.prefix,...t)}}},4586:(e,t,n)=>{n.d(t,{E:()=>o});var r=n(365),a=n(3735),i=n(533),s=n(3992);class o{constructor(){}req(e){return this.reqImpl(e).then((e=>(0,a.MZ)(e)))}reqWithBeacon(e){let{url:t,payload:n}=e;return null===navigator||void 0===navigator?void 0:navigator.sendBeacon(t,JSON.stringify(n))}reqImpl(e){const{url:t,dataType:n,contentType:a,method:o,withCredentials:c,timeout:u}=e;return new Promise(((d,l)=>{const f=new XMLHttpRequest,g="POST"===e.method?"string"==typeof(p=e.payload)?p:JSON.stringify(p):null;var p;f.onload=(0,s.GL)((function(){if(f.status>=400){const e="text"===f.responseType||""===f.responseType?f.responseText:"Couldn't access response text";l(`Failed ajax request. Status code was ${f.status}. ${e}`)}else if("json"===n){const e=f.responseText?(0,r.Y3)((()=>JSON.parse(f.responseText)),(e=>`Failed to parse response as JSON. Response was ${JSON.stringify(f.responseText)}. Got ${e}`)):(0,r.F2)(null);(0,r.g_)(l,d)(e)}else d("text"===n?f.responseText:f.response)})),f.onerror=(0,s.GL)((()=>l(new i.o))),f.ontimeout=(0,s.GL)((()=>l(new i.s))),f.open(o,t,!0),a&&f.setRequestHeader("content-type",a),f.timeout=u||f.timeout,f.withCredentials=c||f.withCredentials,f.responseType="binary"===n?"arraybuffer":f.responseType,f.send(g)}))}}},310:(e,t,n)=>{n.d(t,{s:()=>a});var r=n(6567);class a{constructor(e){this.config=e,this.PATH_JOINER_Q="?",this.PATH_JOINER_A="&"}getEndpointUrl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("base",e,t,n)}getSdkErrorsUrl(e,t){return this.getUrl("sdk-errors",e,t,[])}getAdvertiserEndpointUrl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("adv",e,t,n)}getClassificationModelsEndpointUrl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("clm",e,t,n)}getAudienceMatchingEndpointUrl(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const a=`${e}/${n}/audiences`;return this.getUrl("audience-matching",a,t,r)}getCCSCohortMembershipEndpointUrl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("ccs",e,t,n)}makeAuthenticatedUrl(e){return this.makeUrlWithQueryParams(e,[["k",this.config.apiKey]])}getUrlPrefix(e){switch(e){case"base":return"";case"adv":return"/adv";case"sdk-errors":return"/sdk-errors";case"clm":return"/clm";case"audience-matching":return"/audience-matching";case"ccs":return"/ccs"}}getUrl(e,t,n,a){const i=this.getUrlPrefix(e),s=(0,r.g_)((()=>""),(e=>`/${e}`))(n),o=`${this.config.apiProtocol}://${this.config.apiHost}${i}${s}${t}`;return this.makeUrlWithQueryParams(o,a.concat([["k",this.config.apiKey]]))}makeUrlWithQueryParams(e,t){const n=t.map((e=>{let[t,n]=e;return`${t}=${n}`})).join(this.PATH_JOINER_A),r=e.includes(this.PATH_JOINER_Q)?this.PATH_JOINER_A:this.PATH_JOINER_Q;return`${e}${r}${n}`}}},8327:(e,t,n)=>{n.r(t),n.d(t,{nextGenWeb:()=>Ht,runNextGenFeaturesWeb:()=>Qt});var r=n(655),a=n(2116);class i{constructor(){this.events=[],this.listeners=[]}newEvent(e,t){this.events.push([e,t]),[...this.listeners].forEach((n=>{this.handle(e,t,n)}))}addListener(e){this.listeners.push(e);const t={replay:()=>(this.replay(e),t),remove:()=>(this.remove(e),t)};return t}handle(e,t,n){const r="string"==typeof n.name&&e.name===n.name,a=n.name.test&&n.name.test(e.name),i=r||a;if(i)try{n.callback(e,t)}catch(e){window.console&&window.console.error&&window.console.error("callback error: ",e)}i&&n.once&&this.remove(n)}replay(e){let t=-1!==this.listeners.indexOf(e);for(let n=0;n<this.events.length&&t;n++)this.handle(this.events[n][0],this.events[n][1],e),t=-1!==this.listeners.indexOf(e)}remove(e){const t=this.listeners.indexOf(e);-1!==t&&this.listeners.splice(t,1)}}var s=n(2688),o=n(3735);const c=e=>({id:e.id,name:e.name,time:new Date(e.time),properties:e.properties||{},session_id:e.session_id,view_id:e.view_id}),u=e=>({id:e.id,name:e.name,time:(f(e.time)?e.time:new Date).toISOString(),properties:e.properties||{},session_id:e.session_id,view_id:e.view_id}),d=(e,t)=>({id:e.id,time:new Date(e.time),name:t.name,properties:t.properties,session_id:t.session_id,view_id:t.view_id}),l=e=>void 0!==e.request_id,f=e=>isFinite(e)&&e instanceof Date;var g=n(4730);class p{constructor(e,t,n,r,a){this.eventHandler=e,this.api=t,this.metrics=n,this.userId=r,this.eventsCache=a,this.DEBOUNCE_TIME=500,this.MAX_DEBOUNCE_TIME=5e3,this.batch={requestData:[],requestOptions:[],processingStrategies:[]},this.scheduler=new g.b(this.DEBOUNCE_TIME,this.MAX_DEBOUNCE_TIME),this.debouncedFlushIfNotEmpty=this.scheduler.schedule(this.flush.bind(this)),this.scheduler.scheduleForPageUnload((()=>this.flushWithBeacon.bind(this)(this.batch)))}add(e,t,n){return this.batch.requestData.push(e),this.batch.requestOptions.push(t),this.batch.processingStrategies.push(n),this.debouncedFlushIfNotEmpty(this.batch),Promise.resolve()}flush(e){return this.flushIfNotEmpty(e,!1)}flushWithBeacon(e){return this.flushIfNotEmpty(e,!0)}flushIfNotEmpty(e,t){const{requestData:n,requestOptions:r,processingStrategies:a}=e,i=e=>this.api.reportError(`Error sending events batch. Got ${(0,s.w)(e)}`,this.userId.get()),c=t?(0,o.ls)((e=>this.api.trackBatchBeacon(e)),(e=>Promise.resolve())):e=>this.api.trackBatch(this.metrics,e);return n.length>0?(0,o.zG)(this.resetBatch(),(e=>this.trackMetrics(n)),(e=>c(n).then((e=>this.isBatchResponse(e)?this.onBatchResponseSuccess(e,n,r,a):(0,o.Q1)())).catch(i))):Promise.resolve()}onBatchResponseSuccess(e,t,n,r){const a=(e,t)=>{"never"!==t&&(this.eventHandler.newEvent(u(e),null),this.eventsCache.add(e,{persistOnDisk:!0}))},i=(e,t,n)=>{const r={name:t.name,session_id:t.session_id,view_id:t.view_id,properties:t.properties,time:(new Date).toISOString()};n&&n(e.error.message),console.error(e),this.eventHandler.newEvent(r,e)};return e.forEach(((e,s)=>{let{body:o}=e;const c=t[s],u=n[s],f=r[s];return l(o)?i(o,c,u.error):((e,t,n,r)=>{const i=d(e,t);return r&&r(i),a(i,n)})(o,c,f,u.success)}))}resetBatch(){this.batch={requestData:[],requestOptions:[],processingStrategies:[]}}trackMetrics(e){this.metrics.track({name:"sdk_events_batch_size_total",value:e.length,labels:{}}),this.metrics.track({name:"sdk_events_batch_size_bytes",value:2*JSON.stringify(e).length,labels:{}})}isBatchResponse(e){return!!e}}var h=n(6567),_=n(5151),m=n(1828),b=n(922);const v=(e,t,n)=>n?"deferred":y(e.name,t),y=(e,t)=>C.has(e)?"memoryOnly":q.has(e)?"never":t?"immediate":"response",w=e=>{let{event:t,requestData:n,requestOptions:r,queryManager:a,eventsBatch:i,stateSync:s,metrics:c,logger:u}=e;const d=(e,t)=>{const n=new Set(e);for(const e of t)n.delete(e);return n};return(0,o.zG)(O(t,c,a,u),_.YO("update"),_.ak("updatedSegments",(e=>{let{update:[,t]}=e;return _.tD((()=>d(new Set([...n.segments,...t.segmentsEntered]),t.segmentsExited)))})),_.ak("updatedCohorts",(e=>{let{update:[,t]}=e;return _.tD((()=>d(new Set([...n.cohorts,...t.cohortsEntered]),t.cohortsExited)))})),_.At((e=>{let{updatedCohorts:n,updatedSegments:r}=e;return()=>u.debug(`Batching ${t.name} with`,{segments:r,cohorts:n})})),_.tS((e=>{let{update:[t],updatedSegments:a,updatedCohorts:o}=e;return m.gz(_.oE)((()=>i.add(Object.assign(Object.assign({},n),{segments:[...a],cohorts:[...o]}),r,"immediate")),(()=>s.sync(t)))})),_.UI(o.Q1))},k=e=>{let{event:t,metrics:n,queryManager:r,logger:a}=e;return(0,o.zG)(O(t,n,r,a),_.UI(o.Q1))},E=e=>{let{requestData:t,requestOptions:n,queryManager:r,eventsCache:a,eventHandler:i,api:s,metrics:c,logger:u}=e;return(0,o.zG)((()=>s.track(c,t,!1)),_.tS((e=>I(e,t,n,a,c,r,u))),_.UI((e=>T(i,e.event,e.error))))},P=e=>{let{event:t,isEventFullyEnriched:n,requestData:r,api:a,eventHandler:i}=e;return _.tD((()=>{a.trackBeacon(r,n),T(i,t,h.YP)}))},S=e=>{let{requestData:t,requestOptions:n,eventsBatch:r}=e;return()=>r.add(t,n,"never")},I=(e,t,n,r,a,i,s)=>l(e)?D(e,t,n):M(e,t,n,r,a,i,s),D=(e,t,n)=>{const r=new Date;return _.tD((()=>{const a={name:t.name,session_id:t.session_id,view_id:t.view_id,properties:t.properties,time:r};return"function"==typeof n.error&&n.error(e.error.message),{event:a,error:(0,h.G)(e)}}))},M=(e,t,n,r,a,i,s)=>(0,o.zG)(_.tD((()=>(e=>void 0!==e.properties)(e)?c(Object.assign(Object.assign({},e),{session_id:t.session_id,view_id:t.view_id})):d(e,t))),_.mU((e=>O(e,a,i,s))),_.At((e=>()=>{"function"==typeof n.success&&n.success(e)})),_.mU((e=>()=>r.add(e,{persistOnDisk:!0}))),_.UI((e=>({event:e,error:h.YP})))),O=(e,t,n,r)=>{const a=_.tD((()=>(0,o.bc)({},{segmentsEntered:new Set,segmentsExited:new Set,cohortsEntered:new Set,cohortsExited:new Set}))),i="sdk_events_querylanguage_seconds",s=(0,o.zG)(_.tD((()=>t.startTimer(i,{}))),_.YO("qlMetricKey"),_.ak("update",(()=>n.process(e,!0))),_.UI((n=>{let{qlMetricKey:a,update:s}=n;return t.stopTimer(i,a),r.debug("[Processing]","Processing event",e,"caused the following update",s),s})));return U.has(e.name)?s:a},T=(e,t,n)=>{A.has(t.name)||e.newEvent(u(t),(0,o.zG)(n,h.fS((()=>null))))},q=new Set(["ThirdPartySegments","SlotRendered"]),C=new Set([...b.D0?["PageviewEngagement"]:[],...b.ED?["SegmentEntry","SegmentExit"]:[]]),x=new Set(["PageviewComplete"]),A=new Set(["PrebidAuctions"]),U=new Set(["!UpdateLookalikeModels","!UpdateSecondPartyData","!UpdateThirdPartyData","LinkClick","Pageview","PageviewComplete","PageviewEngagement","PrebidBid","SlotClicked","SlotViewable"]);function G(e,t,n){const{api:s,enrichers:c,logger:u,metrics:d,queryManager:l,stateSync:f,unprocessedPVC:g,userId:m}=e;return a.K4((()=>{const e=new i,a=new p(e,s,d,m,n);return{allEvents:()=>n.all(),getStateSizeInBytes:()=>n.getStateSizeInBytes(),on:(t,n)=>e.addListener({name:t,callback:n,once:!1}),once:(t,n)=>e.addListener({name:t,callback:n,once:!0}),reset:e=>n.reset(e),track:i=>{var{client:p,event:m,useBeacon:b}=i,y=(0,r._T)(i,["client","event","useBeacon"]);const{output:I,isFullyEnriched:D}=c.enrich(m.properties,C.has(m.name)),M=Object.assign(Object.assign({},I),{client:p});d.track({name:D?"sdk_event_enrichment_success_count":"sdk_event_enrichment_fail_count",value:1,labels:{}});const O=(0,o.zG)(t.nonQlCohorts.current,h.fS((()=>[]))),T={user_id:t.userId.current,name:m.name,cohorts:[...O,...t.qlCohorts.current.map(String)],segments:t.qlCohorts.current,properties:M,session_id:m.session_id,view_id:m.view_id};return((e,t)=>(0,o.zG)(v(e.event,e.isEventFullyEnriched,t),(t=>{switch(t){case"immediate":return w(e);case"memoryOnly":return k(e);case"response":return E(e);case"deferred":return P(e);case"never":return S(e)}}),_.tS((()=>x.has(e.event.name)?()=>e.unprocessedPVC.reset():_.of(void 0)))))(Object.assign(Object.assign({},y),{api:s,event:Object.assign(Object.assign({},m),{properties:M}),eventsBatch:a,eventsCache:n,eventHandler:e,isEventFullyEnriched:D,logger:u,metrics:d,queryManager:l,requestData:T,stateSync:f,unprocessedPVC:g}),b)()},__deprecated_eventsCache:n}}))}var j=n(3992);class z{constructor(){this.crypto=window.crypto||window.msCrypto,this.ALG_NAME="AES-GCM"}isAvailable(){var e;return!!(null===(e=this.crypto)||void 0===e?void 0:e.subtle)}generateKey(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,j.t_)(this.crypto.subtle.generateKey({name:this.ALG_NAME,length:256},e,["encrypt","decrypt"]))}encrypt(e,t){const[n,r]=this._encrypt(e,this.str2bytes(t));return n.then((e=>{const t=new Uint8Array(16+e.byteLength);return t.set(r,0),t.set(new Uint8Array(Uint32Array.of(e.byteLength).buffer),12),t.set(new Uint8Array(e),16),t.buffer}))}decrypt(e,t){const n=new Uint8Array(t,0,12),r=new Uint32Array(t,12,1)[0],a=t.slice(16,16+r);return this._decrypt(e,n,a).then(this.bytes2str)}_encrypt(e,t){const n=this.crypto.getRandomValues(new Uint8Array(12));return[(0,j.t_)(this.crypto.subtle.encrypt({name:this.ALG_NAME,iv:n},e,t)),n]}_decrypt(e,t,n){return(0,j.t_)(this.crypto.subtle.decrypt({name:this.ALG_NAME,iv:t},e,n))}str2bytes(e){return(new TextEncoder).encode(e).buffer}bytes2str(e){return(new TextDecoder).decode(e)}}var R=n(365),L=n(6934);var B=n(7554);class W extends Error{constructor(e){super(e),this.name="StoreClosingError"}}class ${constructor(e,t,r,a,i,s,o,c,u,d){this.version=3;{const l=n(2546);this.db=l.make(e,t,r,a,i,s,o,c,this.version,u,d)().then((0,R.fS)((e=>(0,B.E)(t,u,d))))}}shouldThrowStoreClosingError(e){return"NotFoundError"===e.name||"InvalidStateError"===e.name}makeStoreClosingDuringOpertationError(e){return new W(`Attempted ${e} when the current store is closing.`)}put(e,t){return(0,L.Y3)((()=>this.db.then((n=>n.put(e,t)))),(e=>{const t=(0,s.w)(e);return this.shouldThrowStoreClosingError(t)?this.makeStoreClosingDuringOpertationError("put"):t}))}get(e){return(0,L.Y3)((()=>this.db.then((t=>t.get(e))).then(h.ij)),(e=>{const t=(0,s.w)(e);return this.shouldThrowStoreClosingError(t)?this.makeStoreClosingDuringOpertationError("get"):t}))}delete(e){return(0,L.Y3)((()=>this.db.then((t=>t.delete(e)))),(e=>String(e)))}deleteStore(){return(0,L.Y3)((()=>this.db.then((e=>e.deleteStore()))),(e=>String(e)))}}var K=n(1500),N=n(3328),F=n(2652);const Y="permutive-events-cache",V="permutive-events-for-page",Q="[EVENTSCACHE]",H=e=>"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name;class J{constructor(e,t,n,r,a,i,s,c){this.config=e,this.namespace=t,this.logger=n,this.api=r,this.trace=a,this.metrics=i,this.userId=s,this.makeEventsStore=c,this.eventsCache=this.makeEventsRepository(Y),this.eventsForPage=this.makeEventsRepository(V),this.debouncedReportError=(()=>new g.b(5e3,5e3).schedule((e=>this.api.reportError(e.errorMessage,e.userId))))(),this.eventStore=c(),this.eventsTTLInMilliseconds=(0,o.zG)((0,h.ij)(this.config.eventsTTLInDays),(0,h.tS)((e=>"number"==typeof e&&e>0?(0,h.G)(24*e*3600):h.YP))),this.eventsCache.events=(0,F.HP)((()=>(0,F.PQ)((()=>{const e=this.trace.startSpan("load_event_cache");return this.loadFromDisk().then((t=>(e.finish(),this.logDebug(`Event cache loaded, #e ${t.length}`),t)))})))),this.readiness=this.eventsCache.events().then((()=>this.migratePreviousPagesEvents()))}migratePreviousPagesEvents(){return(0,r.mG)(this,void 0,void 0,(function*(){const e=this.trace.startSpan("migrate_previous_for_page_events"),t=(0,_.pE)((e=>(0,L.Y3)((()=>e.flush()),s.w)));return(0,o.zG)([this.eventsForPage,this.eventsCache],t,(0,_.UI)((t=>{const n=N.bj(t);return n.length>0&&this.api.reportError(`Migrate previous events failed. Got:\n${n.join("\n ")}`,this.userId.get()),e.finish()})),(e=>e()))}))}all(){return Promise.all([this.eventsCache.events(),this.eventsForPage.events()]).then(K.xH)}add(e,t){let{persistOnDisk:n}=t;return(0,r.mG)(this,void 0,void 0,(function*(){return this.logDebug("Adding to cache",e),this.eventsForPage.events=(0,o.zG)(this.eventsForPage.events,_.UI((t=>[...t,e])),F.HP),n&&this.readiness.then((()=>this.eventsForPage.flush())),e}))}filterEventsByWorkspace(e){return e}pruneEventsToSizeLimit(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.config.eventsCacheLimitBytes;if(n<=0||t<=n)return this.logDebug(`Event size of ${t} less than limit of ${n}`),{events:e,sizeInBytes:t};this.logDebug(`Events before pruning ${e.length}`),this.logDebug(`Pruning events with current size ${t}`,`to ${n}`);let r=1;for(;t>n;)e.splice(0,r),r*=2,t=2*JSON.stringify(e).length;return this.logDebug(`Events after pruning ${e.length}`),this.logDebug(`Events size after pruning ${t}`),{events:e,sizeInBytes:t}}loadFromDisk(){this.logLog("Loading event cache...");const e=this.metrics.startTimer("sdk_load_events_cache_task_duration_seconds",{}),t=e=>{this.metrics.track({name:"sdk_events_cache_byte_total",value:e.sizeInBytes,labels:{}}),this.metrics.track({name:"sdk_events_cache_size_total",value:e.events.length,labels:{}})},n=(0,o.zG)(this.eventsTTLInMilliseconds,(0,h.g_)((0,o.a9)(o.yR),(e=>(0,K.hX)((t=>e>Date.now()-t.time.getTime()))))),a=(0,o.ls)((0,h.fS)((()=>[])),_.of),i=(0,L.g_)((e=>{const t=(0,_.of)([]);return e instanceof W?t:(this.api.reportError(`Error fetching data from store. Got ${e}`,this.userId.get()),()=>(0,r.mG)(this,void 0,void 0,(function*(){return yield this.reset("historical"),t()})))}),a);return(0,o.zG)([this.eventStore.get(Y),this.eventStore.get(V)],(0,K.UI)(i),(0,K.vP)(_.oE),(0,_.UI)((t=>(this.logDebug("Read events from store:",t),this.metrics.stopTimer("sdk_load_events_cache_task_duration_seconds",e),t))),(0,_.UI)((0,o.ls)(K.xH,this.filterEventsByWorkspace,(e=>this.pruneEventsToSizeLimit(e,2*JSON.stringify(e).length)),(e=>(this.eventsCache.sizeInBytes=e.sizeInBytes,this.eventsCache.sizeInBytesLastSuccessfulWrite=e.sizeInBytes,e.events.length>0&&t(e),e.events)),(0,K.UI)(c),n)),(e=>e()))}reset(e){return(0,r.mG)(this,void 0,void 0,(function*(){return(0,o.zG)(_.tD((()=>this.logDebug("Resetting Events Cache"))),_.tS((()=>this.eventStore.deleteStore())),L.Zl((()=>(this.eventStore=this.makeEventsStore(),"historical"===e?m.gz(L.Ij)(this.eventsCache.reset,this.eventsForPage.flush):m.gz(L.Ij)(this.eventsCache.reset,this.eventsForPage.reset)))),L.wE((()=>()=>this.all())),L.fS((()=>_.of([]))),(e=>e()))}))}getStateSizeInBytes(){return this.eventsForPage.sizeInBytes+this.eventsCache.sizeInBytes}makeEventsRepository(e){const t=(()=>{let e=Promise.resolve(R.F2((0,o.Q1)()));return t=>e=e.then(t)})(),n=e=>(0,o.zG)(_.tD((()=>this.logDebug(`Writing ${e.length} events to ${g.key}`))),_.tS((()=>this.eventStore.put(e.map(u),g.key))),L.UI(o.Q1)),r=(0,o.zG)(_.tD((()=>this.logDebug(`Deleting events for ${g.key}`))),_.tS((()=>this.eventStore.delete(g.key))),L.Vn(s.w)),a=(0,o.ls)(_.of,_.At((e=>()=>this.logError(`Events cache failed to put ${g.key}. Got ${e}`))),_.tS((0,F.lo)([[e=>H(e)&&g.retryAttempts<9,()=>(0,o.zG)(_.tD((()=>{g.retryAttempts+=1,this.logDebug(`Attempt #${g.retryAttempts} to write ${g.key} to EventsStore`)})),_.tS((()=>f)),_.tS((()=>c)))],[e=>H(e),e=>(0,o.zG)(_.tD((()=>this.logDebug(`Attempted ${g.retryAttempts} rewrite attempts and reached limit of 9 max writes.`,"Reporting QuotaExceededError to API"))),_.tS((()=>()=>this.debouncedReportError({errorMessage:`Events cache failed to put ${g.key}. Got ${e}`,userId:this.userId.get()}))),_.tS((()=>L.t$(e))))],L.t$]))),i=e=>L.tD((()=>{this.logDebug(`Successfully wrote events for ${g.key} after ${g.retryAttempts} attempts`),g.retryAttempts=0,g.sizeInBytes=2*JSON.stringify(e).length,g.sizeInBytesLastSuccessfulWrite=g.sizeInBytes})),c=(0,o.zG)((()=>g.events()),_.tS((e=>(0,o.zG)(n(e),_.mU(R.EQ(a,(()=>i(e)))))))),d=(e,t)=>(0,o.zG)(e.events,_.UI((n=>{const r=2*JSON.stringify(n).length,a=this.pruneEventsToSizeLimit(n,r,t);return e.events=_.of(a.events),e.sizeInBytes=a.sizeInBytes,t-e.sizeInBytes}))),l=(e,t)=>{let[n,...r]=e;return n&&0!==t?(0,o.zG)(d(n,t),_.tS((e=>(this.logDebug(`${e} left after pruning ${n.key}`),l(r,e))))):_.of((0,o.Q1)())},f=(0,o.zG)(L.tD((()=>this.eventsForPage.sizeInBytes-this.eventsForPage.sizeInBytesLastSuccessfulWrite)),L.fX(R.DT((e=>e>0),(e=>new Error(`${this.eventsForPage.key} failed to write the same or smaller events cache of size ${e}`)))),L.tS((e=>{const t=1.2*e,n=[this.eventsCache,this.eventsForPage];return this.logDebug(`Pruning ${t} bytes from`,n),(0,o.zG)(l(n,t),L.fF)}))),g={key:e,events:_.of([]),sizeInBytes:0,sizeInBytesLastSuccessfulWrite:0,retryAttempts:0,flush:()=>(0,o.zG)(_.tD((()=>this.trace.startSpan(`write_${g.key}`))),_.tS((e=>(0,o.zG)(c,_.At((()=>()=>e.finish()))))),t),reset:()=>(0,o.zG)(_.tD((()=>{g.events=_.of([]),g.sizeInBytes=0,g.sizeInBytesLastSuccessfulWrite=0})),_.tS((()=>r)),t)};return g}logDebug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.debug(Q,...t)}logWarn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.warn(Q,...t)}logError(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.error(Q,...t)}logLog(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.log(Q,...t)}}class X extends J{constructor(e,t,n,r,a,i,s,o){super(e,t,n,r,a,i,s,(()=>new $(e,t,i,new z,"68547f8f-2fd8-4ff3-9b63-51e86e2edee8",`events_${s.get()}`,`keys_${s.get()}`,"events",n,o)))}}function Z(e,t){return G(e,t,new X(e.config,e.namespace,e.logger,e.api,e.trace,e.metrics,e.userId,e.consentTracking))}var ee=n(7826),te=n(2851);const ne="_pnativo",re=function(e){let{externalData:t}=e;return a.K4((()=>{t.removeExternalData(ne)}))};var ae=n(4011),ie=n(7927),se=n(6017);function oe(e,t){const n=function(e){const t=function(e){let{logger:t,messages:n,queryManager:r}=e;const a="[Ref: QL segments]",i=()=>[...r.userSegments.getAllAsList()],[s,c]=te.Ue(i());return t.debug(a,"initialised",{segments:s.current}),n.on("permutive:segments:updated",(()=>{const e=i();t.debug(a,"updated",{segments:e}),c(e)})),n.on("permutive:reset",(()=>{const e=i();t.debug(a,"reset"),c(e)})),(0,o.zG)(s,te.D8(N.Eh(ae.Eq)))}(e);return(0,o.zG)(t,te.UI((0,o.ls)(N.uK((e=>e<1e7)),(e=>{let{left:t,right:n}=e;return{custom:n,standard:t}}))),(e=>({all:t,custom:(0,o.zG)(e,te.UI((e=>{let{custom:t}=e;return t}))),standard:(0,o.zG)(e,te.UI((e=>{let{standard:t}=e;return t})))})))}(e),r=function(e){let{messages:t,queryManager:n}=e;const[r,a]=te.Ue(h.YP);return t.on("permutive:segments:updated",(()=>{a(h.G(n.stateMap.value))})),t.on("permutive:reset",(()=>a(h.YP))),te.UI(h.UI(ce),r)}(e);return e.queryManager.setLalRef(t.lookalikeModels),e.queryManager.setTpdRef(t.thirdPartyData),a.K4((()=>({cohorts:n,tpdUsage:r})))}const ce=(0,o.ls)(ie.UI((e=>{var t;return null!==(t=e.activations)&&void 0!==t?t:{}})),ie.hX((0,o.zG)(Boolean,(0,se.xD)((0,se.ff)(ie.xb)))));var ue,de,le,fe,ge,pe=-1,he=function(e){addEventListener("pageshow",(function(t){t.persisted&&(pe=t.timeStamp,e(t))}),!0)},_e=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},me=function(){var e=_e();return e&&e.activationStart||0},be=function(e,t){var n=_e(),r="navigate";return pe>=0?r="back-forward-cache":n&&(document.prerendering||me()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},ve=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},ye=function(e,t,n,r){var a,i;return function(s){t.value>=0&&(s||r)&&((i=t.value-(a||0))||void 0===a)&&(a=t.value,t.delta=i,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},we=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},ke=function(e){var t=function(t){"pagehide"!==t.type&&"hidden"!==document.visibilityState||e(t)};addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)},Ee=function(e){var t=!1;return function(n){t||(e(n),t=!0)}},Pe=-1,Se=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},Ie=function(e){"hidden"===document.visibilityState&&Pe>-1&&(Pe="visibilitychange"===e.type?e.timeStamp:0,Me())},De=function(){addEventListener("visibilitychange",Ie,!0),addEventListener("prerenderingchange",Ie,!0)},Me=function(){removeEventListener("visibilitychange",Ie,!0),removeEventListener("prerenderingchange",Ie,!0)},Oe=function(){return Pe<0&&(Pe=Se(),De(),he((function(){setTimeout((function(){Pe=Se(),De()}),0)}))),{get firstHiddenTime(){return Pe}}},Te=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},qe=[1800,3e3],Ce=[.1,.25],xe=function(e,t){t=t||{},function(e,t){t=t||{},Te((function(){var n,r=Oe(),a=be("FCP"),i=ve("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(i.disconnect(),e.startTime<r.firstHiddenTime&&(a.value=Math.max(e.startTime-me(),0),a.entries.push(e),n(!0)))}))}));i&&(n=ye(e,a,qe,t.reportAllChanges),he((function(r){a=be("FCP"),n=ye(e,a,qe,t.reportAllChanges),we((function(){a.value=performance.now()-r.timeStamp,n(!0)}))})))}))}(Ee((function(){var n,r=be("CLS",0),a=0,i=[],s=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=i[0],n=i[i.length-1];a&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(a+=e.value,i.push(e)):(a=e.value,i=[e])}})),a>r.value&&(r.value=a,r.entries=i,n())},o=ve("layout-shift",s);o&&(n=ye(e,r,Ce,t.reportAllChanges),ke((function(){s(o.takeRecords()),n(!0)})),he((function(){a=0,r=be("CLS",0),n=ye(e,r,Ce,t.reportAllChanges),we((function(){return n()}))})),setTimeout(n,0))})))},Ae={passive:!0,capture:!0},Ue=new Date,Ge=function(e,t){ue||(ue=t,de=e,le=new Date,Re(removeEventListener),je())},je=function(){if(de>=0&&de<le-Ue){var e={entryType:"first-input",name:ue.type,target:ue.target,cancelable:ue.cancelable,startTime:ue.timeStamp,processingStart:ue.timeStamp+de};fe.forEach((function(t){t(e)})),fe=[]}},ze=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){Ge(e,t),a()},r=function(){a()},a=function(){removeEventListener("pointerup",n,Ae),removeEventListener("pointercancel",r,Ae)};addEventListener("pointerup",n,Ae),addEventListener("pointercancel",r,Ae)}(t,e):Ge(t,e)}},Re=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,ze,Ae)}))},Le=[100,300],Be=0,We=1/0,$e=0,Ke=function(e){e.forEach((function(e){e.interactionId&&(We=Math.min(We,e.interactionId),$e=Math.max($e,e.interactionId),Be=$e?($e-We)/7+1:0)}))},Ne=function(){return ge?Be:performance.interactionCount||0},Fe=function(){"interactionCount"in performance||ge||(ge=ve("event",Ke,{type:"event",buffered:!0,durationThreshold:0}))},Ye=[200,500],Ve=0,Qe=function(){return Ne()-Ve},He=[],Je={},Xe=function(e){var t=He[He.length-1],n=Je[e.interactionId];if(n||He.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};Je[r.id]=r,He.push(r)}He.sort((function(e,t){return t.latency-e.latency})),He.splice(10).forEach((function(e){delete Je[e.id]}))}},Ze=[2500,4e3],et={};const tt=function(e){let t=0;const n=n=>{if(0===t)return;const r=nt(n);r&&e.metrics.track({name:`sdk_web_vitals_${r.suffix}`,labels:{},value:r.value})},r=(0,F.HP)((()=>{xe(n),function(e,t){t=t||{},Te((function(){var n,r=Oe(),a=be("LCP"),i=function(e){var t=e[e.length-1];t&&t.startTime<r.firstHiddenTime&&(a.value=Math.max(t.startTime-me(),0),a.entries=[t],n())},s=ve("largest-contentful-paint",i);if(s){n=ye(e,a,Ze,t.reportAllChanges);var o=Ee((function(){et[a.id]||(i(s.takeRecords()),s.disconnect(),et[a.id]=!0,n(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,o,!0)})),ke(o),he((function(r){a=be("LCP"),n=ye(e,a,Ze,t.reportAllChanges),we((function(){a.value=performance.now()-r.timeStamp,et[a.id]=!0,n(!0)}))}))}}))}(n),function(e,t){t=t||{},Te((function(){var n,r=Oe(),a=be("FID"),i=function(e){e.startTime<r.firstHiddenTime&&(a.value=e.processingStart-e.startTime,a.entries.push(e),n(!0))},s=function(e){e.forEach(i)},o=ve("first-input",s);n=ye(e,a,Le,t.reportAllChanges),o&&ke(Ee((function(){s(o.takeRecords()),o.disconnect()}))),o&&he((function(){var r;a=be("FID"),n=ye(e,a,Le,t.reportAllChanges),fe=[],de=-1,ue=null,Re(addEventListener),r=i,fe.push(r),je()}))}))}(n),function(e,t){t=t||{},Te((function(){Fe();var n,r=be("INP"),a=function(e){e.forEach((function(e){e.interactionId&&Xe(e),"first-input"===e.entryType&&!He.some((function(t){return t.entries.some((function(t){return e.duration===t.duration&&e.startTime===t.startTime}))}))&&Xe(e)}));var t,a=(t=Math.min(He.length-1,Math.floor(Qe()/50)),He[t]);a&&a.latency!==r.value&&(r.value=a.latency,r.entries=a.entries,n())},i=ve("event",a,{durationThreshold:t.durationThreshold||40});n=ye(e,r,Ye,t.reportAllChanges),i&&(i.observe({type:"first-input",buffered:!0}),ke((function(){a(i.takeRecords()),r.value<0&&Qe()>0&&(r.value=0,r.entries=[]),n(!0)})),he((function(){He=[],Ve=Ne(),r=be("INP"),n=ye(e,r,Ye,t.reportAllChanges)})))}))}(n)}));return a.K4((n=>{let{onServiceStop:a}=n;t++,a((()=>{t--})),e.metrics.isEnabled()&&r()}))};const nt=e=>(e=>"CLS"===e.name)(e)?{value:e.value,suffix:`${e.name.toLowerCase()}_score`}:(e=>["INP","FID","LCP"].includes(e.name))(e)?{value:e.value/1e3,suffix:`${e.name.toLowerCase()}_seconds`}:void 0;var rt=n(926),at=n(4923);const it=(e,t)=>((e,t,n)=>{const{activationManager:i,externalData:s,metrics:c,permutiveData:u,queryManager:d,stateSync:l,trace:f}=e;return(0,o.zG)(oe(e,{lookalikeModels:t.lookalikeModels,thirdPartyData:(0,o.zG)(t.thirdPartyData,te.UI(h.UI(at.UI((e=>{const t={};for(const n of e)t[n]=!0;return t})))))}),a.YO("queryLanguage"),a.ak("webVitals",(()=>tt(e))),a.ak("eventCollection",(r=>{let{queryLanguage:a}=r;return n(e,{nonQlCohorts:t.nonQlCohorts,qlCohorts:a.cohorts.all,userId:t.userId})})),a.ak("nativo",(e=>{let{queryLanguage:n}=e;return re(Object.assign({activationManager:i,externalData:s,metrics:c,queryLanguageCohorts:n.cohorts.all},t))})),a.ak("twitterPixel",(e=>{let{queryLanguage:n}=e;return(0,rt.eJ)(Object.assign({activationManager:i,metrics:c,permutiveData:u,queryLanguageCohorts:n.cohorts.all},t))})),a.ak("prebidJS",(()=>(0,ee.dN)(e))),a.ak("reset",(e=>{let{eventCollection:t}=e;return a.of((e=>(0,r.mG)(void 0,void 0,void 0,(function*(){d.reset();const n=e.preserveEventsFromCurrentView?"historical":void 0,r=yield t.reset(n),a=f.startSpan("ss_reset_sync");e.downloadState?yield l.resetSync():l.reset(),yield d.bootstrap(r)(),a.finish()}))))})))})(e,t,Z);function st(e){return"consentTracking"in e?e.consentTracking.consentRef:te.a9(!0)}function ot(e){let{messages:t}=e;const[n,r]=te.Ue(new Set);return t.on("permutive:addon:preinit",(e=>r(new Set([...n.current,e])))),n}function ct(e){let{messages:t,realtime:n}=e;var r;const[a,i]=te.Ue(null!==(r=n.isRealtime())&&void 0!==r&&r);return t.on("permutive:realtime",(()=>i(!0))),a}function ut(){const e=()=>Math.floor(Date.now()/1e3),[t,n]=te.Ue(e());return(0,j.UM)((()=>n(e())),1e3),t}function dt(e,t){const n=function(e){const{activationManager:t,api:n,config:r,enrichers:a,externalData:i,logger:s,messages:o,metrics:c,permutiveData:u,namespace:d,network:l,queryManager:f,stateSync:g,trace:p,track:h,unprocessedPVC:_,urls:m,userId:b}=e,v="consentTracking"in e?e.consentTracking:{consentRef:te.a9(!0),listenForConsent:()=>0,isRevoked:()=>!1,isGiven:()=>!0};return{activationManager:t,api:n,config:r,consentTracking:v,enrichers:a,externalData:i,logger:s,messages:o,metrics:c,permutiveData:u,namespace:d,permutiveApi:l,permutiveUrls:m,queryManager:f,reportError:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.reportError(e,null==t?void 0:t.userId,null==t?void 0:t.timestamp)},stateSync:g,trace:p,track:h,unprocessedPVC:_,userId:b}}(e),a=function(e){return{addonsLoaded:e.addonsLoaded,consent:st(e),currentTimestampSecs:ut(),enabledAddons:ot(e),identities:e.identities,realtime:ct(e),sdkVariant:h.ij(e.sdkVariant),sessionId:te.a9(e.sessionManager.getSessionId()),userId:e.userId.ref,viewId:e.viewId.ref}}(e);return function(e,t,n){const a=5e3;return(0,o.zG)(e,(i=a,e=>t=>{var{onServiceStop:n}=t,a=(0,r._T)(t,["onServiceStop"]);let s=[];const{value:o,state:c}=e(Object.assign(Object.assign({},a),{onServiceStop:e=>s.push(e)})),[u,d]=te.Ue(c.current),l=()=>d(c.current),f=(0,j.UM)(l,i);let g=!1;return(0,F.aT)((()=>!g&&l()),navigator.userAgent),n((()=>{g=!0,s.forEach((e=>e())),l(),f()})),{value:o,state:u}}),lt,function(e){return t=>(0,o.ls)((0,F.rO)({previousState:t=>e.current?t:void 0}),t,(0,F.rO)({state:(0,o.ls)((t=>te.vP(e,t)),te.UI((e=>{let[t,n]=e;return t?n:void 0})))}))}(n),function(e){return t=>(0,o.ls)((0,F.rO)({previousState:()=>localStorage.getItem(e)}),t,(0,F.rO)({state:(0,F.bw)(te.YP((t=>{switch(typeof t){case"string":localStorage.setItem(e,t);break;case"undefined":localStorage.removeItem(e);break;case"object":if(null===t){localStorage.removeItem(e);break}throw new Error("Permutive app raised an invalid state.");default:throw new Error("Permutive app raised an invalid state.")}})))}))}(t))({onServiceStop:o.Q1}).value;var i}(t(n,a),e.namespace.getNamespacedStorageKey("permutive-app"),a.consent)}function lt(e){return(0,o.ls)((0,F.rO)({previousState:e=>{if("string"!=typeof e)return{};try{return JSON.parse(e)}catch(e){return{}}}}),e,(0,F.rO)({state:te.UI(JSON.stringify)}))}var ft=n(5912),gt=n(7241),pt=n(2197),ht=n(4870),_t=n(9853);const mt="[Prebid Monitoring]",bt=(e,t)=>{e.metrics.track({name:"sdk_prebid_monitoring_key_flag_count_total",labels:t,value:1})},vt=(e,t)=>{e.metrics.track({name:"sdk_prebid_monitoring_key_bidder_flag_count_total",labels:t,value:1})},yt=function(e,t){const n=wt(e);return a.K4((()=>(0,o.zG)(t,te.UI((0,o.ls)(h.DT((e=>e.consent)),h.UI((e=>e.prebidJS)))),te.D8(h.Eh((0,F.Or)())),te.bw((0,o.ls)(h.tS((e=>e.completedChecks?e.mainPair:h.YP)),h.UI((t=>bt(e,{flag:"prebid_main_key",prebid_key:t.windowPropertyKey}))))),te.UI(h.UI((e=>(0,o.zG)(e.mainPair,h.UI((t=>[t,...e.otherPairs])),h.fS((()=>e.otherPairs)))))),te.g_(new Set,((t,r)=>(0,o.zG)(r,h.UI(N.hX((e=>!t.has(e.windowPropertyKey)))),h.hX(N.Od),(0,F.bw)(h.EQ((()=>e.logger.debug(mt,"Nothing to report")),(t=>e.logger.debug(mt,"Reporting",t)))),h.fS((()=>[])),N.UI((t=>(0,o.zG)((t=>(0,o.zG)(R.Y3((function(){var n,r;const{pbjs:a,windowPropertyKey:i}=t;e.logger.log(mt,`Reporting on "${i}"`,t);const s=kt(a);e.logger.debug(mt,`Version ${a.version} parsed as`,s);const c=(0,ee.zi)(a);e.logger.debug(mt,"Read config",c);const u=(0,o.zG)(null!==(r=null===(n=c.realTimeData)||void 0===n?void 0:n.dataProviders)&&void 0!==r?r:[],N.Ew((e=>"permutive"===e.name)));return e.logger.debug(mt,"Read data provider config",u),{pbjs:a,config:c,dataProviderConfig:u,installedModules:a.installedModules||[],version:s,windowPropertyKey:i}}),s.w),R.ak("bidders",(e=>n.acBidders(e))),R.ak("permutiveRTDProvider",(e=>n.permutiveRTDProvider(e))),R.ak("consent",(e=>n.consent(e))),R.ak("targeting",(e=>n.targeting(e)))))(t),R.Pd((n=>e.reportError(`[Prebid Monitoring] Failed to report pair "${t.windowPropertyKey}", ${n.message}`)),(()=>t.windowPropertyKey))))),N.hp,(e=>new Set([...t,...e]))))),(e=>({reportedKeys:e})))))};const wt=e=>({acBidders:t=>R.Y3((()=>{const n=(0,_t.Hn)("prebid")("data_provider_config",{ac_bidders:[]}),r=t.version.major>=7&&t.version.minor>=13?n.ac_bidders:[],a=(0,o.zG)(t.dataProviderConfig,h.UI((e=>{var t,n;return null!==(n=null===(t=null==e?void 0:e.params)||void 0===t?void 0:t.acBidders)&&void 0!==n?n:[]})),h.fS((()=>[]))),i=[...new Set([...r,...a])];return e.logger.debug(mt,"Determined acBidders as",{acBidders:i,dynamicBidders:r,staticBidders:a}),i.forEach((n=>{vt(e,{flag:"prebid_ac_bidder",prebid_key:t.windowPropertyKey,prebid_bidder:n})})),{acBidders:i,dynamicBidders:r,readBidders:a}}),s.w),consent:t=>R.Y3((()=>{var n,r,a,i,s,o;const c=t.windowPropertyKey;t.config.consentManagement&&"object"==typeof t.config.consentManagement&&bt(e,{prebid_key:c,flag:"prebid_has_consent_management"});const u=t.installedModules.includes("gdprEnforcement");u&&bt(e,{prebid_key:c,flag:"prebid_gdpr_enforcement_module"});const d=(null===(o=null===(s=null===(i=null===(a=null===(r=null===(n=t.config)||void 0===n?void 0:n.consentManagement)||void 0===r?void 0:r.gdpr)||void 0===a?void 0:a.rules)||void 0===i?void 0:i.find((e=>"storage"===(null==e?void 0:e.purpose))))||void 0===s?void 0:s.vendorExceptions)||void 0===o?void 0:o.includes("permutive"))||!1;return d&&bt(e,{prebid_key:c,flag:"prebid_storage_exception"}),{hasGDPREnforcementModule:u,addedAsStorageException:d}}),s.w),permutiveRTDProvider:t=>R.Y3((()=>{const n=t.installedModules.includes("permutiveRtdProvider");return n&&bt(e,{prebid_key:t.windowPropertyKey,flag:"prebid_permutive_rtd"}),n}),s.w),targeting:t=>{const n=(0,o.ls)(N.UI((e=>[e,null])),at.sq),r=(t,n)=>(0,o.zG)(t,(0,F.bw)((t=>e.logger.debug(mt,`Processing ${t.length} bidder request(s)`,t))),N.hX((e=>n.hasOwnProperty(e.bidderCode)&&null===n[e.bidderCode])),gt.vM((e=>e.bidderCode)),at.DZ(N.f2((0,F.lo)([[e=>(e=>{var t,n,r;const a=null===(n=null===(t=null==e?void 0:e.user)||void 0===t?void 0:t.data)||void 0===n?void 0:n.find((e=>"permutive.com"===e.name));return!!(null===(r=null==a?void 0:a.segment)||void 0===r?void 0:r.length)})(e.ortb2),()=>h.G("ortb2")],[e=>{return t=e.params,["permutive","p_standard"].some((e=>{var n,r,a,i;return(null===(r=null===(n=null==t?void 0:t.visitor)||void 0===n?void 0:n[e])||void 0===r?void 0:r.length)||(null===(i=null===(a=null==t?void 0:t.keywords)||void 0===a?void 0:a[e])||void 0===i?void 0:i.length)}));var t},()=>h.G("params")],()=>h.YP]))),(0,F.bw)((t=>e.logger.debug(mt,"Bidders targeting method's updated",t)))),a=a=>{e.logger.debug(mt,"Bidders found with no targeting method",a);let i=n(a);const s=n=>(0,o.zG)(r([n],i),(0,F.bw)((e=>{i=Object.assign(Object.assign({},i),e)})),(0,F.bw)(at.Su(((n,r)=>vt(e,{flag:`prebid_${r}_targeting_success`,prebid_key:t.windowPropertyKey,prebid_bidder:n})))),(0,F.bw)((()=>{Object.values(i).includes(null)||(e.logger.debug(mt,`Cleaning up "bidRequested" listener for ${t.windowPropertyKey}`),t.pbjs.offEvent("bidRequested",s))})));t.pbjs.onEvent("bidRequested",s)};return R.Y3((()=>{const i=(0,o.zG)(t.pbjs.getEvents(),N.DZ((0,o.ls)(h.DT((e=>"bidRequested"===e.eventType)),h.UI((0,F.vg)("args")))));return(0,o.zG)(t.bidders.acBidders,h.DT(N.Od),h.EQ((()=>e.logger.debug(mt,"No bidders for targeting")),(0,o.ls)(n,(e=>Object.assign(Object.assign({},e),r(i,e))),at.uK(pt.ff((e=>null===e))),ht.Pd((0,o.ls)(at.XP,h.DT(N.Od),h.UI(a)),at.Su(((n,r)=>vt(e,{prebid_bidder:n,prebid_key:t.windowPropertyKey,flag:`prebid_${r}_targeting_success`})))))))}),s.w)}}),kt=e=>{const[t,n,r]=e.version.split("-")[0].replace("v","").split(".").map((e=>parseInt(e)));return{major:t,minor:n,patch:r}};var Et=n(9557);const Pt=function(e){let{externalData:t}=e;return a.K4((()=>{t.removeExternalData(St)}))};const St="_pfws";var It=n(6930),Dt=n(167);const Mt=()=>({allCohorts:[],gam:[],xandrSsp:[]}),Ot=function(e,t){return a.K4((()=>te.a9(Mt())))};const Tt=(e,t,n,r)=>t+(n-t)*r/(Math.pow(2,e)-1),qt=(e,t)=>{const n=(e,t)=>{const n=e.toString(16);return("0".repeat(t)+n).slice(Math.min(-t,-n.length))};return`${n(e.getUint32(t),8)}-${n(e.getUint16(t+4),4)}-${n(e.getUint16(t+6),4)}-${n(e.getUint16(t+8),4)}-${n(e.getUint32(t+10),8)}${n(e.getUint16(t+14),4)}`},Ct=e=>{const t=[1,2],n=e.getInt8(0);if(1===n)return xt(e);if(2===n)return At(e);{const r=(0,h.Y3)((()=>qt(e,1))),a=(0,h.g_)((()=>"Couldn't decode model id"),(e=>`Model id was ${e}`))(r);throw new Error(`Decoding only supported for version(s): ${t}; Supplied version was ${n}; ${a}`)}},xt=e=>Ut(e,1),At=e=>Ut(e,2),Ut=(e,t)=>{const n=qt(e,1),r=((e,t)=>{switch(String.fromCharCode(e.getInt8(t))){case"1":return"1p";case"3":return"3p"}})(e,17),a=e.getInt8(18),i=e.getFloat32(19),s=e.getFloat32(23),[o,c]=((e,t,n,r,a,i)=>{const s={};let o=0;do{let n;1===i?(o=e.getUint16(t),n=e.getUint16(t+2),t+=4):(o=e.getUint32(t),n=e.getUint16(t+4),t+=6),s[0===o?"const":o]=n.toString(36)}while(0!==o);return[s,t]})(e,27,0,0,0,t);return[{version:t,id:n,data_preference:r,weights:o,precision:a,min:i,max:s},c]};var Gt=n(7758);class jt{constructor(e,t,n,r,a){this.network=e,this.logger=t,this.api=n,this.metrics=r,this.permutiveData=a,this.MODELS_LAST_UPDATED_KEY="models_last_updated",this.MODELS_DATA_KEY="models_data",this.MODELS_SYNC_TIMEOUT_IN_SECONDS=86400;const i=r.startTimer("sdk_load_lookalike_models_task_duration_seconds",{}),s=(0,o.zG)(Gt.tD((()=>a.getData(this.MODELS_LAST_UPDATED_KEY))),Gt.hX((e=>!(!e||isNaN(e)||(new Date).getTime()>e+1e3*this.MODELS_SYNC_TIMEOUT_IN_SECONDS))),Gt.NG((()=>this.permutiveData.getData(this.MODELS_DATA_KEY)))),c=(0,o.zG)(this.fetchModels(),j.N1,_.At((e=>()=>{this.permutiveData.setData(this.MODELS_DATA_KEY,e),this.permutiveData.setData(this.MODELS_LAST_UPDATED_KEY,(new Date).getTime())}))),u=(0,o.zG)(s,j.N1,Gt.fS((()=>(0,j.N1)(c))),_.UI((e=>(e=>{const t=Object.keys(e);return t.length>0&&e[t[0]].hasOwnProperty("precision")})(e)?(e=>{const t={},n=Object.keys(e),r=e=>{const t={"1p":{}},{precision:n,min:r,max:a}=e,i=e["1p"],s=Object.keys(i);for(let e=0;e<s.length;e++){const o=s[e],c=parseInt(i[o],36);t["1p"][o]=Tt(n,r,a,c)}return t};for(let a=0;a<n.length;a++){const i=n[a],s=e[i];t[i]=r(s)}return t})(e):e)),j.N1,_.At((()=>()=>{this.metrics.stopTimer("sdk_load_lookalike_models_task_duration_seconds",i)})));this.models=u()}getModels(){return this.models}extractModelsFromJsonArray(e){return t=>{const n={};for(let r=0;r<t.length;r++){const a=t[r],{id:i,weights:s}=a;if(void 0===i||void 0===s)continue;const o=e(a);Object.keys(s).forEach((e=>{o["1p"][e]=s[e]})),n[i]=o}return n}}fetchModels(){return(0,o.zG)(L.Y3((()=>this.api.modelsBinary(this.metrics)),(e=>e.message)),j.N1,L.oU((e=>()=>function(e){const t=[];let n=0;for(;n<e.byteLength;){const[r,a]=Ct(new DataView(e,n));t.push(r),n+=a}return t}(e))),j.N1,L.UI(this.extractModelsFromJsonArray((e=>{let{precision:t,max:n,min:r}=e;return{"1p":{},precision:t,min:r,max:n}}))),L.fS((e=>(this.logger.log("Failed fetching binary models, reverting to JSON.\nError: "+e),this.metrics.track({name:"sdk_binary_models_missing_count",value:1,labels:{}}),(0,o.zG)(L.Y3((()=>this.api.modelsJson(this.metrics)),(e=>e.message)),L.UI((e=>e.models)),L.UI(this.extractModelsFromJsonArray((()=>({"1p":{}})))),L.fS((e=>(this.api.reportError("Failed fetching json models.\nError: "+e),_.of({})))))))))}}const zt=function(e){return a.K4((()=>{const t=new jt(e.permutiveApi,e.logger,e.api,e.metrics,e.permutiveData);return(0,o.zG)(t.getModels(),te.p4,te.UI(h.tS(h.Uo)))}))};const Rt=(e,t)=>(0,o.zG)(a.vP({classificationModels:Ot(e,t)}),a.UI((e=>e.classificationModels))),Lt=function(e,t){return(0,o.zG)(Bt(e),(0,Dt.n)({backoffAfterErrorMs:6e5}),a.VS((e=>It.m(te.UI((t=>{let{tpdUsage:n,userId:r}=t;return{validityKey:()=>r,freshnessKey:(0,o.ls)((()=>n),h.EQ((()=>0),(0,o.ls)(JSON.stringify,F.vp))),refresh:(0,o.ls)((()=>n),h.hX((e=>Object.keys(e).length>0)),h.tS((t=>e({user_id:r,time:new Date,tpd_segments:t}))))}}),t)))),a.UI(o.Q1))};const Bt=e=>t=>{const{config:n,metrics:r,permutiveApi:a,permutiveUrls:i}=e,s=r.startTimer("sdk_http_tpd_usage_seconds",{});return a.req({url:i.getEndpointUrl("/tpd/usage",h.G(n.apiVersion)),method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1}).then((e=>(r.stopTimer("sdk_http_tpd_usage_seconds",s),e)))};function Wt(e,t){const[n,r]=te.Ue(0);let i=!1;const s=()=>{try{i=!0,r(n.current+1)}finally{i=!1}},c=["amp","gigya","pxid","sailthru"],u=(0,o.zG)(t.identities,te.UI(at.z7((e=>!c.includes(e)))));return(0,o.zG)(a.vP({fetchFromNewEndpoint:(0,o.zG)($t(e),(0,Dt.n)({backoffAfterErrorMs:6e5})),fetchFromLegacyEndpoint:(0,o.zG)(Kt(e),(0,Dt.n)({backoffAfterErrorMs:6e5}))}),a.VS((r=>{let{fetchFromNewEndpoint:a,fetchFromLegacyEndpoint:s}=r;const c=t=>(0,o.zG)(a(t),h.UI((e=>e.catch((()=>(0,o.zG)(s(t.identities),h.fS((()=>e))))))),h.wp((()=>s(t.identities))),h.UI((0,F.bw)((t=>{const n=e.metrics.startTimer("sdk_get_third_party_data_task_duration_seconds",{});t.catch(o.Q1).then((()=>{e.metrics.stopTimer("sdk_get_third_party_data_task_duration_seconds",n)}))}))));return It.m((0,o.zG)(te.vP(n,t.userId,t.sessionId,u),te.UI((e=>{let[t,n,r,a]=e;return{validityKey:()=>n,freshnessKey:()=>`${Nt(a)},${r}`,refresh:()=>(0,o.zG)({userId:n,identities:a},h.DT((e=>{let{identities:t}=e;return i&&!at.xb(t)})),h.tS(c))}}))))})),a.UI((e=>({refresh:s,data:e}))))}const $t=e=>t=>(0,r.mG)(void 0,void 0,void 0,(function*(){return(yield e.api.reqWithMetrics(e.metrics,"sdk_http_audience_matching_seconds",{url:e.permutiveUrls.getAudienceMatchingEndpointUrl("/id",h.G("v1"),t.userId),payload:{identities:(0,o.zG)(t.identities,at.Yz,N.UI((e=>{let[t,n]=e;return{tag:t,id:n}})))},method:"POST",withCredentials:!1,dataType:"json"})).items})),Kt=e=>t=>e.api.reqWithMetrics(e.metrics,"sdk_http_tpd_seconds",{url:e.permutiveUrls.getEndpointUrl("/tpd",h.G(e.config.apiVersion)),method:"POST",payload:{user_id:t},contentType:"text/plain",dataType:"json",withCredentials:!1}),Nt=(0,o.ls)(JSON.stringify,F.vp);const Ft=(e,t)=>(0,o.zG)(a.vP({data:Wt(e,{identities:t.identities,sessionId:t.sessionId,userId:t.userId}),usageReporting:Lt(e,te.vP({tpdUsage:t.tpdUsage,userId:t.userId})),removeLegacyDataFromLocalStorage:a.dQ((t=>{let{previousState:n}=t;if(!n){const t=e.namespace.getNamespacedStorageKey("permutive-data-tpd");localStorage.removeItem(t)}return{value:null,state:te.a9(!0)}}))}),a.ak("analytics",(n=>{let{data:{data:r}}=n;return function(e,t){return a.dQ((n=>{let{previousState:r}=n;var a;return{state:(0,o.zG)(te.vP(t.userId,t.providerSegments),te.g_(null!==(a=r)&&"object"==typeof a?a:{userId:"",providerHashes:{}},((t,n)=>{let[r,a]=n;const i=(0,o.zG)(a,h.fS((()=>({})))),s=(0,o.zG)(i,at.UI((0,F.SL)(F.vp))),c=(0,o.zG)(t,h.DT((e=>e.userId===r)),h.UI((e=>e.providerHashes)),h.fS((()=>({}))));return(0,o.zG)(i,at.z7((e=>s[e]!==(c[e]||0))),at.Su(((t,n)=>{e("ThirdPartySegments",{data_provider:t,segments:[...n]})}))),{userId:r,providerHashes:s}}))),value:void 0}}))}(e.track,{providerSegments:r,userId:t.userId})})),a.UI((e=>{let{data:t}=e;return{data:t.data,refreshData:t.refresh}})));var Yt=n(5619);te.a9([]),te.a9([]),te.a9([]),te.a9([]),te.a9([]),te.a9([]),te.a9(Yt.b()),te.a9(h.YP);function Vt(e,t,n){const{addonsLoaded:r,consent:i,currentTimestampSecs:s,enabledAddons:c,identities:u,realtime:d,sdkVariant:l,sessionId:f,userId:g,viewId:p}=t,[_,m]=(0,o.zG)(te.Ue(h.YP),(e=>{let[t,n]=e;return[(0,o.zG)(t,te.VS(h.EQ((()=>te.a9(h.YP)),te.UI(h.G)))),n]})),[b,v]=(0,o.zG)(te.Ue(te.a9(h.YP)),(e=>{let[t,n]=e;return[te.xH(t),n]}));return(0,o.zG)(a.vP({lookalikeModels:zt(e),metricContext:Yt.X({sdkVariant:l,sessionId:f,userId:g,viewId:p}),computeTimeMetrics:(y=e.metrics,a.K4((e=>{let{onServiceStop:t}=e;const n=(0,j.HJ)((()=>{(0,o.zG)((0,j.iE)(),(0,F.bw)((()=>(0,j.ho)(!1))),N.UI((e=>{let[t,n]=e;return(n-t)/1e3})),(e=>{y.track({name:"sdk_ui_thread_compute_first10s_total_seconds",value:e.reduce(((e,t)=>e+t),0),labels:{}}),y.track({name:"sdk_ui_thread_compute_first10s_total_task_overrun_seconds",value:(0,o.zG)(e,N.hX((e=>e>.05)),N.UI((e=>e-.05)),N.u4(0,((e,t)=>e+t))),labels:{}}),y.track({name:"sdk_ui_thread_compute_first10s_longest_task_seconds",value:Math.max(0,...e),labels:{}})}))}),1e4);t(n)})))}),a.ak("sdkql",(t=>{let{lookalikeModels:a}=t;return n(e,{addonsLoaded:r,consent:i,initdAddons:c,lookalikeModels:a,nonQlCohorts:_,thirdPartyData:b,userId:g})})),a.ak("demandPartners",(t=>{let{sdkql:{queryLanguage:n}}=t;return((e,t)=>(0,o.zG)(a.vP({ssp:Et.sspService(e.externalData,t)}),a.UI((e=>{let{ssp:t}=e;return t}))))(e,{addonsLoaded:r,consent:i,initdAddons:c,standardCohorts:n.cohorts.standard})})),a.ak("mediaAndEntertainment",(t=>{let{sdkql:{queryLanguage:n}}=t;return((e,t)=>(0,o.zG)(a.vP({freewheel:Pt(Object.assign({activationManager:e.activationManager,externalData:e.externalData},t))}),a.UI((0,o.a9)({}))))(e,{addonsLoaded:r,consent:i,initdAddons:c,queryLanguageCohorts:n.cohorts.all})})),a.ak("publishers",(t=>{let{sdkql:{queryLanguage:n}}=t;return((e,t)=>(0,o.zG)(a.vP({addressability:Rt(e,te.vP(t)),audienceMatching:Ft(e,{identities:t.identities,sessionId:t.sessionId,tpdUsage:t.tpdUsage,userId:t.userId})}),a.UI((e=>{let{addressability:t,audienceMatching:n}=e;return{cohorts:{all:te.UI((e=>e.allCohorts),t),gam:te.UI((e=>e.gam),t),xandrSsp:te.UI((e=>e.xandrSsp),t)},refreshThirdPartyData:n.refreshData,thirdPartyData:n.data}}))))(e,{addonsLoaded:r,consent:i,currentTimestampSecs:s,identities:u,initdAddons:c,queryLanguageCohorts:n.cohorts.all,realtime:d,sessionId:f,tpdUsage:n.tpdUsage,userId:g})})),a.ak("advertisers",(t=>{let{demandPartners:n,sdkql:u}=t;return((e,t)=>(0,o.zG)(ft.segmentationService(e,te.vP(t)),a.YO("segmentation"),a.ak("prebidMonitoring",(()=>yt(e,te.vP({consent:t.consent,prebidJS:t.prebidJS})))),a.UI((e=>e.segmentation))))(e,{addonsLoaded:r,consent:i,currentTimestampSecs:s,customCohorts:u.queryLanguage.cohorts.custom,demandPartnerCohorts:te.UI((e=>e.cohorts),n),initdAddons:c,prebidJS:u.prebidJS,sessionId:f,standardCohorts:u.queryLanguage.cohorts.standard,userId:g,viewId:p})})),a.bw((e=>{let{publishers:t}=e;return v(t.thirdPartyData)})),a.UI((e=>{let{advertisers:t,demandPartners:n,metricContext:r,publishers:a,sdkql:i}=e;return{cloudCohorts:{all:(0,o.zG)(te.vP(a.cohorts.all,t.segments.all,te.UI((e=>e.cohorts),n)),te.UI(N.xH)),gam:(0,o.zG)(te.vP(a.cohorts.gam,t.segments.all,te.UI((e=>e.gamTargetingValues),n)),te.UI(N.xH)),xandrSsp:a.cohorts.xandrSsp},eventCollection:i.eventCollection,metricContext:r,pbjsPair:te.UI((e=>e.mainPair),i.prebidJS),queryLanguageCohorts:i.queryLanguage.cohorts,refreshThirdPartyData:a.refreshThirdPartyData,resetQL:i.reset}})),a.bw((e=>{let{cloudCohorts:t}=e;return m(h.G(t.all))})));var y}function Qt(e){return dt(e,Ht)}function Ht(e,t){return Vt(e,t,it)}},6640:(e,t,n)=>{n.d(t,{B9:()=>p,iq:()=>l,ti:()=>_});var r=n(2688),a=n(787),i=n(365),s=n(6567),o=n(3735),c=n(2652),u=n(3030);const d="__permutive.",l="__permutiveConfigQueryParams";const f={default:{windowKey:"permutive",environment:"default",apiHost:"api.permutive.com",apiKey:"",cdnBaseUrl:"cdn.permutive.com",pxidHost:"prmutv.co",apiVersion:"v2.0",sdkErrorsApiVersion:"v2",advertiserApiVersion:"v2",classificationModelsApiVersion:"v1",apiProtocol:"https",loggingEnabled:!1,tracingEnabled:!1,requestTimeout:5e3,cookieDomain:"."+(0,u._Y)(window.location.hostname),cookieName:"permutive-id",cookieExpiry:function(){const e=new Date;return e.setMonth(e.getMonth()+6),e.toUTCString()}(),eventsTTLInDays:null,permutiveDataMiscKey:"permutive-data-misc",permutiveDataModelsKey:"permutive-data-models",permutiveDataQueriesKey:"permutive-data-queries",permutiveDataEnrichersKey:"permutive-data-enrichers",stateNamespace:"",sendClientErrors:!0,metricsSamplingPercentage:20,eventsCacheLimitBytes:25e5,segmentSyncApiHost:"68547f8f-2fd8-4ff3-9b63-51e86e2edee8.partner.permutive.app",consentRequired:!1,sdkType:"stable",viewId:null,localStorageDebouncedKeys:["internal_query_states"],localStorageWriteDelay:1e3,localStorageWriteMaxDelay:1500,watson:{enabled:!0}},production:{},development:{apiProtocol:"http",loggingEnabled:!0,tracingEnabled:!0,sendClientErrors:!1}},g=e=>{const t={consentRequired:!0,loggingEnabled:!0,sendClientErrors:!0,tracingEnabled:!0},n={eventsTTLInDays:!0,eventsCacheLimitBytes:!0,metricsSamplingPercentage:!0,requestTimeout:!0,localStorageWriteDelay:!0,localStorageWriteMaxDelay:!0};return Object.keys(e).reduce(((r,a)=>{if(t.hasOwnProperty(a)){const t="true"===e[a];return Object.assign(Object.assign({},r),{[a]:t})}if(n.hasOwnProperty(a)){const t=Number(e[a]);return isNaN(t)?r:Object.assign(Object.assign({},r),{[a]:t})}return Object.assign(Object.assign({},r),{[a]:e[a]})}),{})},p=function(){let{getQueryParams:e=u.zM}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e=>Object.entries(e).reduce(((e,t)=>{let[n,r]=t;if(!(0===n.indexOf(d)))return e;const a=n.replace(d,"");return[...e,[a,r]]}),[]);return(0,o.zG)(i.Y3((()=>(0,o.zG)(e(),t,(e=>(0,c.m8)(...e)),g,(e=>h({queryConfig:e})))),(e=>`Failed to parse query params. Got ${(0,r.w)(e).message}`)))},h=e=>{let{queryConfig:t}=e;const n=(0,o.zG)(s.Y3((()=>window.sessionStorage.getItem(l))),s.tS(s.ij),s.tS((0,o.ls)(a.A,s.ij)),s.fS((()=>({}))));return(0,c.PM)(n,t)},_=(e,t)=>{var n;const r=null!==(n=e.environment&&f[e.environment])&&void 0!==n?n:{};return(0,c.PM)(f.default,r,e,t)}},4564:(e,t,n)=>{n.d(t,{NY:()=>_,vk:()=>g,qA:()=>f});var r=n(655),a=n(2688),i=n(365),s=n(3735),o=n(6934),c=n(8259),u=n(1410),d=n(2851);var l=n(30);const f=()=>({opt_in:!0,token:u.L}),g=()=>({opt_in:!1,token:""}),p=e=>{return(0,s.ls)((t=e,e=>(0,s.zG)((0,l.J)(t.consentRequired,e),(e=>{let{consentData:n,isValid:r}=e;return t.consentDatabase.put(n,u.L),r}))),(e=>{let{logger:t,messages:n}=e;return e=>{const r=e?"given":"revoked";return t.log("Consent has been",r),n.emit(`permutive:consent:${r}`),e}})(e));var t},h=e=>(t,n)=>{e.on("permutive:consent:revoked",t),e.on("permutive:consent:given",n)},_=e=>(0,r.mG)(void 0,void 0,void 0,(function*(){const{logger:t,namespace:n,consentRequired:r,messages:f}=e,g=new c.oP(window.localStorage,n),_=(0,l.J)(r,yield g.get(u.L)),m=yield(0,s.zG)(o.Y3((()=>g.put(_.consentData,u.L)),(e=>new Error(`LocalStorage access is required. ${(0,a.w)(e).message}`))),(e=>e()));if(i.nM(m))return m;const{consentRef:b,giveConsent:v,revokeConsent:y,isRevoked:w,isGiven:k}=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const[t,n]=d.Ue(e),r=()=>!0===t.current;return{consentRef:t,revokeConsent:()=>(n(!1),t.current),giveConsent:()=>(n(!0),t.current),isRevoked:()=>!r(),isGiven:r}}(_.isValid),E={consentRef:b,isGiven:k,isRevoked:w,listenForConsent:h(f)};E.listenForConsent(y,v);const P=p({consentDatabase:g,consentRequired:r,logger:t,messages:f});return i.F2({consentTracking:E,consentValidation:P,consentDatabase:g})}))},1410:(e,t,n)=>{n.d(t,{L:()=>r});const r="permutive-consent"},7708:(e,t,n)=>{n.d(t,{D:()=>l});var r=n(1500),a=n(365),i=n(3735),s=n(6567),o=n(5151),c=n(4922),u=n(1410),d=n(30);const l=e=>{const{partialTagWithKey:t}=e,n=t.key;var l;window[n].consent=(l=e,(0,i.ls)(l.consentModule.consentValidation,s.DT(Boolean),s.UI((0,c.H)(l)),i.Q1));const f=(0,s.EQ)((()=>{return t={consentDatabase:e.consentModule.consentDatabase,consentRequired:e.tag.config.consentRequired},(0,i.zG)((0,i.a9)(t.consentDatabase.get(u.L)),(0,o.UI)((e=>(0,d.J)(t.consentRequired,e).isValid)));var t}),o.of);return(0,i.zG)((0,i.zG)((e=>{let{consentModule:t,tag:n}=e;const a=(0,r.Ew)((function(e){return"consent"===e.functionName}))(n.q);return(0,s.UI)((e=>t.consentValidation(e.arguments[0])))(a)})(e),f),(0,o.UI)((e=>e?(0,a.F2)(!0):(0,a.t$)("No consent to run on the page"))))}},4769:(e,t,n)=>{n.d(t,{v:()=>r});const r=(e,t,n)=>function(){const r=n()?t:e;return r(...arguments)}},30:(e,t,n)=>{n.d(t,{J:()=>s});var r=n(3735),a=n(6567),i=n(4564);const s=(e,t)=>(0,r.zG)((0,a.ij)(t),(t=>!1===e&&(0,a.Wi)(t)?{isValid:!0,consentData:(0,i.qA)()}:(e=>(0,a.pC)(e)&&(e=>null!==e&&"object"==typeof e)(e.value)&&(e=>{var t;return!0===e.opt_in&&"string"==typeof e.token&&(null===(t=e.token)||void 0===t?void 0:t.length)>0})(e.value))(t)?{isValid:!0,consentData:t.value}:{isValid:!1,consentData:(0,i.vk)()}))},3298:(e,t,n)=>{n.d(t,{S:()=>b});var r=n(3735),a=n(655),i=n(6567),s=n(1500),o=n(2851),c=n(1540),u=n(2497),d=n(5165),l=n(3992);var f=n(2652);class g{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.wait_prev=t.wait_prev||!1,this.block_next=t.block_next||!1,this.started=!1,this.complete=!1,this.task=e}waits(){return this.wait_prev}blocks(){return this.block_next}execute(e){this.started=!0,this.task((()=>{this.complete=!0,e()}))}}var p=n(6315);class h{constructor(e,t,n,r,a,i,s,o,c,u,d,l,f,g,p,h,_,m,b,v,y,w,k,E,P,S,I,D){this.logger=e,this.api=t,this.activationManager=n,this.sessionManager=r,this.metrics=a,this.viewId=i,this.userId=s,this.network=o,this.enrichers=c,this.clientContext=u,this.unprocessedEvents=d,this.queryManager=l,this.taskQueue=f,this.identities=g,this.permutiveReset=p,this.messages=h,this.addons=_,this.trace=m,this.permutiveRealtime=b,this.state=v,this.customProperties=y,this.config=w,this.permutiveData=k,this.externalData=E,this.cookies=P,this.identitiesIngestor=S,this.global=I,this.nextGen=D,this.initialisedAddons=[],this.triggerListeners=[]}identify(e){const t="[Identify]";this.logger.debug("<call> identify",e);const n=(0,f.b2)(),o=this.identities.parseCustomerDefinedIdentities(e),u=Object.assign(Object.assign({},this.identities.getIdentitiesMap()),o.reduce(((e,t)=>{let{tag:n,id:r,priority:a,expiry:i}=t;return Object.assign(Object.assign({},e),{[n]:Object.assign(Object.assign({id:r},void 0!==a?{priority:a}:{}),void 0!==i?{expiry:i}:{})})}),{})),d=(0,r.zG)(Object.values(u),s.DZ((e=>i.ij(e.id)))),l=this.identities.getPrioritizedIdentities(u);if("string"==typeof e&&(0,c.Bt)("68547f8f-2fd8-4ff3-9b63-51e86e2edee8","68547f8f-2fd8-4ff3-9b63-51e86e2edee8",d,window.location.hostname,this.userId.get()))return n.resolve(),n.promise;const h=()=>(0,a.mG)(this,void 0,void 0,(function*(){this.nextGen.refreshThirdPartyData()})),_=e=>(0,a.mG)(this,void 0,void 0,(function*(){yield(0,p.Yj)({clientContext:this.clientContext,global:this.global,identities:this.identities,logger:this.logger,nextGen:this.nextGen,reset:this.permutiveReset,userId:this.userId},e.user_id)}));return this.taskQueue.add(new g((e=>(0,a.mG)(this,void 0,void 0,(function*(){this.logger.debug("<task> identify",o);const r=()=>(0,a.mG)(this,void 0,void 0,(function*(){this.logger.log(t,"request identity");const e=yield this.api.identify(this.metrics,this.userId,l);this.userId.isEqual(e.user_id)?(this.metrics.track({name:"sdk_identity_remained_total",value:1,labels:{identify_reason:"identify_call"}}),yield h()):(this.metrics.track({name:"sdk_identity_changed_total",value:1,labels:{identify_reason:"identify_call"}}),yield _(e))}));this.identities.setIdentities(o).identifyRequestRequired()?yield r():this.logger.log(t,"skip request"),this.logger.debug("<done> identify",o),e(),n.resolve(),yield this.identitiesIngestor.ingestIfEligible(o).catch((e=>this.api.reportError(`Couldn't ingest identities, got ${e}`,this.userId.get())))}))),{wait_prev:!0,block_next:!0})),n.promise}on(e,t){return this.nextGen.eventCollection.on(e,t)}once(e,t){return this.nextGen.eventCollection.once(e,t)}track(){var e,t,n;const[r,a,i]=[arguments.length<=0?void 0:arguments[0],(arguments.length<=1?void 0:arguments[1])||{},(arguments.length<=2?void 0:arguments[2])||{}],s=this.trace.startSpan("track_event");this.logger.log("<call> track",r);const o=(0,f.b2)(),c=null!==(e=i.unprocessedData)&&void 0!==e?e:{},u=null!==(t=c.sessionId)&&void 0!==t?t:this.sessionManager.getSessionId(),d=null!==(n=c.viewId)&&void 0!==n?n:this.viewId.get(),l={success:i.success||(e=>{}),error:i.error||((e,t)=>{})};return this.taskQueue.add(new g((e=>{this.logger.log("<task> track",r);return(c.client?Promise.resolve(c.client):this.clientContext.getClient()).then((t=>{var n;const c={name:r,properties:a,session_id:u,view_id:d,time:new Date};return this.nextGen.eventCollection.track({client:a.client?(0,f.PM)(t,a.client):t,event:c,requestOptions:l,useBeacon:null!==(n=i.useBeacon)&&void 0!==n&&n}).then((t=>{this.logger.log("<done> track",c.name),o.resolve(c),e(),s.finish()})).catch((e=>{var t;null===(t=l.error)||void 0===t||t.call(l,e),this.api.reportError(e,this.userId.get()),o.reject(e)}))}))}))),o.promise}trigger(e,t,n){const r=(0,f.b2)();this.logger.log("<call> trigger",e),this.triggerListeners=this.triggerListeners||[];return this.taskQueue.add(new g((t=>{this.logger.log("<task> trigger",e);const a=this.messages.on("permutive:query:changed",(function(t){t.queryCode===e&&(n(t.result),r.resolve(t.result))}));this.triggerListeners.push(a),this.logger.log("<done> trigger",e),t()}))),r.promise}query(){return Promise.resolve({result:!1})}segment(e,t){const n=(0,f.b2)();this.logger.log("<call> segment",e);return this.taskQueue.add(new g((r=>{var a;this.logger.log("<task> segment",e);const i=this.queryManager.stateMap.value[e];t((null===(a=null==i?void 0:i.result)||void 0===a?void 0:a.result)||!1),n.resolve(),this.logger.log("<done> segment",e),r()}))),n.promise}segments(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";const n=(0,f.b2)();this.logger.log("<call> segments");return this.taskQueue.add(new g((r=>{this.logger.log("<task> segments ("+t+")");const a=a=>{e(a),n.resolve(a),this.logger.log("<done> segments ("+t+")"),r()};"dfp"===t?this.messages.once("permutive:dfp:ready",(()=>{this.addons.dfp&&a([...this.addons.dfp.segments.liveSegments])})):a([...this.nextGen.queryLanguageCohorts.all.current])}))),n.promise}reset(){return Promise.all([this.api.reset(this.metrics),this.identities.reset(),this.permutiveReset.reset(),this.unprocessedEvents.PageviewComplete.reset(),this.nextGen.resetQL({downloadState:!1,preserveEventsFromCurrentView:!1})]).then((e=>{let[t]=e;this.userId.set(t.id)})).then((()=>{this.messages.emit("permutive:reset")})).catch((e=>{this.api.reportError(`Error resetting internals. Got ${e}`)}))}addon(e,t){const s=Object.assign(Object.assign({},t),{permutive:this,api:this.api,activationManager:this.activationManager,network:this.network,clientContext:this.clientContext,logger:this.logger,unprocessedEvents:this.unprocessedEvents,metrics:this.metrics,state:this.state,queryManager:this.queryManager,messages:this.messages,userId:this.userId,viewId:this.viewId,customProperties:this.customProperties,config:this.config,permutiveData:this.permutiveData,sessionManager:this.sessionManager,addons:this.addons,enrichers:this.enrichers,externalData:this.externalData,cookies:this.cookies,nextGenOutput:this.nextGen}),c=(0,r.zG)(this.nextGen.pbjsPair,o.UI(i.UI((0,f.vg)("pbjs"))));if(-1===this.initialisedAddons.indexOf(e))switch(this.initialisedAddons.push(e),this.messages.emit("permutive:addon:preinit",e),e){case"web":Promise.resolve().then(n.bind(n,4400)).then((e=>this.addons.web=new e.WebAddon(s))).then((()=>this.messages.emit("permutive:web:ready")));break;case"publishers":case"overlays":case"scriptrunner":case"nativo":case"freewheel":case"eyeota_pixel":case"rubicon":case"tracking_pixel":case"twitter_pixel":case"pinterest_pixel":case"local_storage":case"appnexus_adserver":case"classification_models":case"gam_log":case"smart":case"ddp":case"dbm":case"appnexus":case"pubmatic":case"ctv":0;break;case"dfp":Promise.resolve().then(n.bind(n,9658)).then((e=>(0,a.mG)(this,void 0,void 0,(function*(){return this.addons.dfp=yield e.createAddon(s)}))));break;case"facebook_pixel_v2":Promise.resolve().then(n.bind(n,9278)).then((e=>this.addons.facebook_pixel_v2=new e.FacebookV2Pixel(s)));break;case"rubicon_ssp":Promise.resolve().then(n.bind(n,8563)).then((e=>this.addons.rubicon_ssp=new e.RubiconSspAddon(s)));break;case"prebid":Promise.resolve().then(n.bind(n,9581)).then((e=>this.addons.prebid=new e.PrebidAddon(Object.assign(Object.assign({},s),{pbjs:c}))));break;case"clean_room":Promise.resolve().then(n.bind(n,5912)).then((e=>this.addons.clean_room=new e.CleanRoomAddon(Object.assign(Object.assign({},s),{pbjs:c}))));break;case"tradedesk":Promise.resolve().then(n.bind(n,8394)).then((e=>this.addonIfTCFConsent({Addon:e.TradeDeskPixel,key:"tradedesk"},s)));break;case"ssp":Promise.resolve().then(n.bind(n,9557)).then((e=>this.addons.ssp=new e.SspAddon(s)))}else"web"===e&&!0!==t.auto_init?((e,t,n,r)=>new Promise(((a,s)=>{var o;const c=(0,i.Y3)(e);if((0,i.pC)(c))return a(c.value);n.once(t,(()=>(0,i.g_)((()=>s(new Error(`Error after waiting for event ${t}`))),a)((0,i.Y3)(e))));const u=null!==(o=null==r?void 0:r.timeout)&&void 0!==o?o:1e4;(0,l.HJ)((()=>s(new Error(`Event ${t} was not received within the timeout period ${u}ms`))),u)})))((()=>{if(!this.addons.web)throw new Error('"web" addon not ready');return this.addons.web.reset(t)}),"permutive:web:ready",this.messages).catch((e=>{this.api.reportError(`Got error while trying to reset web. Got ${e.message}`,this.state.userId.get())})):"ctv"===e&&(null==t||t.auto_init)}addonIfTCFConsent(e,t){const n=()=>{switch(e.key){case"tradedesk":this.addons.tradedesk=new e.Addon(t);break;case"ddp":this.addons.ddp=new e.Addon(t);break;case"appnexus":this.addons.appnexus=new e.Addon(t);break;case"pubmatic":this.addons.pubmatic=new e.Addon(t)}},a=t=>t[d.D[e.key]]?n():(0,r.Q1)();return(0,u._8)(window).then((e=>{switch(e.type){case"missing":return n();case"aborted":return(0,r.Q1)();case"loaded":return(0,r.zG)((0,u.Ec)(e.data),(0,i.g_)(n,a))}}))}ready(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"initialised";const n=(0,f.b2)(),r=()=>{e(),n.resolve()};switch(t){case"initialised":this.permutiveRealtime.isReady()?r():this.messages.on("permutive:ready",r);break;case"realtime":this.permutiveRealtime.isRealtime()?r():this.messages.once("permutive:realtime",r)}return n.promise}}var _=n(4769);const m=e=>{const{logger:t,consentTracking:n}=e,i=function(){return t.debug("Methods[track]: Cannot track as consent is revoked"),Promise.resolve(null)};return e=>class extends e{constructor(){super(...arguments),this.track=(0,_.v)(super.track.bind(this),i,n.isRevoked),n.isRevoked()&&this.consentRevoked(),n.listenForConsent((()=>this.consentRevoked()),r.Q1)}consentRevoked(){return(0,a.mG)(this,void 0,void 0,(function*(){return yield this.sessionManager.reset(),this.reset()}))}}},b=(e,t,n,a,i,s,o,c,u,d,l,f,g,p,_,b,v,y,w,k,E,P,S,I,D,M,O,T,q)=>new((0,r.zG)(h,m({consentTracking:T,logger:e})))(e,t,n,a,i,s,o,c,u,d,l,f,g,p,_,b,v,y,w,k,E,P,S,I,D,M,O,q)},6416:(e,t,n)=>{n.d(t,{O:()=>c});var r=n(1828),a=n(365),i=n(3735);const s=e=>(0,i.zG)((e=>"function"==typeof e.Map?(0,a.F2)(new e.Map([["a",1]])):(0,a.t$)("Maps not supported"))(e),a.tS((e=>1===e.size?(0,a.F2)(null):(0,a.t$)("Iterable Maps not supported")))),o=e=>(0,i.zG)((e=>"function"==typeof e.Set?(0,a.F2)(new e.Set([1,2])):(0,a.t$)("Sets not supported"))(e),a.tS((e=>2===e.size?(0,a.F2)(null):(0,a.t$)("Iterable Sets not supported")))),c=e=>(0,i.zG)((0,r.gz)(a.G5)(s(e),o(e),(e=>e.Worker&&e.Blob?(0,a.F2)(null):(0,a.t$)("WebWorkers not supported"))(e)),(e=>(0,a.UI)(i.Q1)(e)))},6315:(e,t,n)=>{n.d(t,{Yj:()=>p,TZ:()=>f});var r=n(655),a=n(2688),i=n(5151),s=n(7758),o=n(1828),c=n(3735),u=n(2652);var d=n(1540);const l=e=>(0,r.mG)(void 0,void 0,void 0,(function*(){yield e.identities.thirdParty,yield function(e,t){return(0,d.Bt)("68547f8f-2fd8-4ff3-9b63-51e86e2edee8","68547f8f-2fd8-4ff3-9b63-51e86e2edee8",e.identities.getPrioritizedIdentities(e.identities.getIdentitiesMap()).map((e=>e.id)),window.location.hostname,e.userId.get())?t.reset():Promise.resolve()}(e,e.permutiveMethods);const t=yield function(e){const t=e.trace.startSpan("identify");0;return(e=>(0,r.mG)(void 0,void 0,void 0,(function*(){const t="[Identify Init]",{logger:n,api:r,userId:a,identities:i,metrics:s,identitiesIngestor:o,messages:c,sessionManager:d}=e,l=yield i.thirdParty,f=i.extractIdentifyFromQueue(e),g=i.getIdentitiesMap(),p=f.reduce(((e,t)=>{let{tag:n,id:r,priority:a,expiry:i}=t;return Object.assign(Object.assign({},e),{[n]:Object.assign(Object.assign({id:r},i?{expiry:i}:{}),void 0!==a?{priority:a}:{})})}),{}),h=Object.assign(Object.assign({},g),p),_=i.setIdentities(Object.entries(h).map((e=>{let[t,{id:n,priority:r,expiry:a}]=e;return Object.assign(Object.assign({tag:t,id:n},a?{expiry:a}:{}),void 0!==r?{priority:r}:{})}))),m=i.getPrioritizedIdentities(h);n.log("Begin identification");const b=e.sessionCount>1&&d.sessionHasChanged()||l.identifyRequestRequired()||_.identifyRequestRequired()?yield(n.debug(t,"request identity"),r.identify(s,a,m).then((e=>{const r=e.user_id;return a.isEqual(r)?{identityChanged:!1}:(n.debug(t,"fetch received new user id",r),{identityChanged:!0,userId:r})})).catch((e=>(r.reportError(`${t} Fetch failed. Got ${e}`,a.get()),{identityChanged:!1}))).then((0,u.bw)((t=>e.metrics.track({name:`sdk_identity_${t.identityChanged?"changed":"remained"}_total`,value:1,labels:{identify_reason:"sdk_init"}}))))):(n.debug(t,"skip request"),{identityChanged:!1});return o.ingestIfEligible(m).catch((e=>r.reportError(`Couldn't ingest identities, got ${e}`,b.identityChanged?b.userId:a.get()))),c.emit("permutive:user:ready"),n.debug(t,"result",b),b})))(e).catch((t=>(e.api.reportError(`Failed to identify. Got ${(0,a.w)(t)}`),{identityChanged:!1}))).then((e=>(t.finish(),e)))}(e);return t.identityChanged?yield p(e,t.userId):(e.logger.log("Identity has not changed"),e.nextGen.refreshThirdPartyData()),t})),f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>{};return(0,r.mG)(void 0,void 0,void 0,(function*(){l(e).then(t),yield g(e.logger,e.trace,e.permutiveMethods,e.unprocessedEvents,e.queryManager,e.eventCollection,e.metrics)(),h(e.global,e.clientContext)}))};function g(e,t,n,a,d,l,f){e.log("Assuming identity hasn't changed");const g=d.hasNewOrModifiedQueries,p=g?(0,c.zG)((()=>l.allEvents()),i.tS((e=>d.bootstrap(e)))):d.bootstrap([]),h=(0,c.zG)((()=>a.PageviewComplete.getIfPresent()),(0,u.bw)(s.EQ((()=>e.debug("No unprocessed PVC data detected")),(t=>e.debug("Unprocessed PVC data detected",t)))),s.wE((e=>{var{props:t}=e,s=(0,r._T)(e,["props"]);return o.gz(i.oE)((()=>n.track("PageviewComplete",t,{unprocessedData:s})),(()=>a.PageviewComplete.reset()))})),i.UI((()=>{})));return(0,c.zG)(o.gz(i.oE)((()=>(0,r.mG)(this,void 0,void 0,(function*(){return t.startSpan(`qm_bootstrap_${g}`)}))),p,h),i.UI((e=>{let[t]=e;return t.finish()})))}function p(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){e.logger.log("Identity has changed"),yield e.reset.reset(),e.userId.set(t),h(e.global,e.clientContext),e.nextGen.refreshThirdPartyData(),e.identities.setIdentities([]),yield e.nextGen.resetQL({downloadState:!0,preserveEventsFromCurrentView:!0})}))}function h(e,t){return e.context=t.getContext()}},5919:(e,t,n)=>{function r(e,t,n,r,a){a.debug("set SDK as ready"),e.setAsReady(),t.emit("permutive:api:ready"),n.track({name:"sdk_local_storage_byte_total",value:r.getStateSizeInBytes(),labels:{}}),n.track({name:"sdk_query_states_byte_total",value:e.getStateSizeInBytes(),labels:{}})}n.d(t,{R:()=>r})},7985:(e,t,n)=>{n.d(t,{$o:()=>s,je:()=>o});var r=n(365),a=n(3735),i=n(6640);const s=e=>{var t,n;const i="68547f8f-2fd8-4ff3-9b63-51e86e2edee8",s=void 0!==(null===(t=e[i])||void 0===t?void 0:t.q)&&void 0!==(null===(n=e[i])||void 0===n?void 0:n.config)?i:"permutive";return(0,a.zG)(e[s],(0,r.ij)("Can't find permutive tag on the page"),(0,r.UI)((e=>({tag:e,key:s}))))},o=(e,t)=>{let{tag:n,key:r}=e;return Object.assign(Object.assign({},n),{config:(0,i.ti)(Object.assign(Object.assign({},n.config),{windowKey:r}),t)})}},7078:(e,t,n)=>{n.d(t,{LA:()=>o});var r=n(1500),a=n(7209),i=n(2652);const s=(e,t,n)=>{let{api:r,state:a}=n;r.reportError(`Function "permutive.${t.functionName}" caused an error: ${e.message}`,a.userId.get())};function o(e,t,n,r,a,i){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:l;const u=c(e),d=i.startSpan("queued_methods"),f={api:a,state:t},g=e=>{if(e.functionName in n){n[e.functionName].apply(r,e.arguments)}else s(new Error("Does not exist."),e,f)},p=e=>!o.includes(e);u.forEach((e=>{try{p(e.functionName)&&g(e)}catch(t){const n=t instanceof Error?t:new Error("Unknown error.");s(n,e,f)}})),d.finish()}function c(e){const t=(0,r.uK)((e=>-1!==d.indexOf(e.functionName)))(e),n=t.right,s=t.left.filter((e=>"consent"!==e.functionName)),o=(0,a.Zt)(((e,t)=>u(e)&&u(t)?(0,i.lW)(f).compare(e.arguments[0],t.arguments[0]):(0,i.lW)(d).compare(e.functionName,t.functionName)));return(0,r.DY)(o)(n).concat(s)}const u=e=>"addon"===e.functionName,d=["identify","trigger","addon","track"],l=["identify"],f=["dfp","appnexus_adserver","web"]},4922:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>initialiseWebSDK,f:()=>initialisationSequence});var tslib__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(655),_permutive_permutive_utils_ts_error__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(2688),fp_ts_Either__WEBPACK_IMPORTED_MODULE_49__=__webpack_require__(365),fp_ts_function__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(3735),fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(6934),_framework_ref__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2851),_identity_legacy_NeustarFabrickIdentitiesIngestor__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6967),_identity_legacy_PermutiveIdentities__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1540),_identity_legacy_PermutiveIdentitiesIngestorNoOp__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(7658),_sdkql_blockers__WEBPACK_IMPORTED_MODULE_50__=__webpack_require__(122),_sdkql_query_language_queryWorkerInit__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8318),_core_activations_PermutiveActivationManagerWeb__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(8975),_core_activations_PermutiveAddons__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9853),_core_context_PermutiveClientContextWeb__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(2836),_sdkql_event_collection_events_cache_store_crypto_HashcodeDigest__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(6197),_sdkql_event_collection_PermutiveEventCustomProps__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__(7748),_core_events_unprocessed_UnprocessedPageviewComplete__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(389),_core_events_unprocessed_UnprocessedPrebidAuctions__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(5865),_core_internals_CookiesWeb__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(5461),_core_internals_ExternalDataWeb__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(9773),_core_internals_PermutiveLogger__WEBPACK_IMPORTED_MODULE_55__=__webpack_require__(342),_core_internals_SDKMessages__WEBPACK_IMPORTED_MODULE_58__=__webpack_require__(8491),_core_metrics_MetricReporter__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(7594),_core_metrics_Metrics__WEBPACK_IMPORTED_MODULE_59__=__webpack_require__(4074),_sdkql_query_language_query_manager_QueryManagerWeb__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(1628),_core_session_SessionManager__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(8317),_core_state_PermutiveDataStoreWeb__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(4026),_sdkql_state_sync_PermutiveEventSourceId__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(3622),_core_state_PermutiveNamespace__WEBPACK_IMPORTED_MODULE_57__=__webpack_require__(569),_core_state_PermutiveRealtime__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(7575),_core_state_PermutiveReset__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__(7256),_sdkql_state_sync_PermutiveStateSyncWeb__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(1229),_core_state_PermutiveStateWeb__WEBPACK_IMPORTED_MODULE_48__=__webpack_require__(7274),_core_state_PermutiveUserId__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(9117),_core_state_PermutiveViewId__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(9880),_core_store_LocalStorage__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(7554),_core_store_SessionStorage__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(9332),_core_tcf_TCF__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(2497),_dynamic_addons_LoadAddons__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(6037),_sdkql_event_collection_enrichment_Enrichers_GlobalEnricher__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(7200),_sdkql_event_collection_enrichment_RegisterEnrichers__WEBPACK_IMPORTED_MODULE_52__=__webpack_require__(6341),_dynamic_messages_PermutiveMessages__WEBPACK_IMPORTED_MODULE_51__=__webpack_require__(9078),_http_PermutiveApi__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(7423),_http_PermutiveNetwork__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(4586),_http_PermutiveUrls__WEBPACK_IMPORTED_MODULE_56__=__webpack_require__(310),_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(2652),_utils_task_queue_PermutiveTaskQueue__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__(4996),_utils_Trace__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(6574),_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(3030),_Config__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(6640),_Consent_Consent__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(4564),_Consent_InitialisationCheckWeb__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(7708),_initialisation_browserFeatures__WEBPACK_IMPORTED_MODULE_54__=__webpack_require__(6416),_initialisation_identity__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(6315),_initialisation_initialisationLifecycle__WEBPACK_IMPORTED_MODULE_53__=__webpack_require__(5919),_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(7985),_initialisation_queuedMethods__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(7078),_PermutiveMethodsWeb__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(3298),_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__(3992),fp_ts_Task__WEBPACK_IMPORTED_MODULE_47__=__webpack_require__(5151);const prefix="[Initialisation Web]",sdkInitTimestamp=window.performance.now(),initialiseWebSDK=_ref=>{let{consentModule,logger,messages,metrics,namespace,network,partialTagWithKey,permutiveData,queryWorker,tag,sessionStorage,configFromQueryParams,urls}=_ref;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.Y3)((()=>(0,tslib__WEBPACK_IMPORTED_MODULE_30__.mG)(void 0,void 0,void 0,(function*(){const windowKey=partialTagWithKey.key,permutiveGlobal=window[windowKey],config=tag.config,viewId=new _core_state_PermutiveViewId__WEBPACK_IMPORTED_MODULE_15__.W(config),trace=new _utils_Trace__WEBPACK_IMPORTED_MODULE_31__.l(config),sdkReadySpan=trace.startSpan("sdk_ready"),{consentTracking,consentValidation}=consentModule;(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_32__.zG)(consentTracking.consentRef,_framework_ref__WEBPACK_IMPORTED_MODULE_0__.YP((e=>{e?sessionStorage.put(configFromQueryParams,_Config__WEBPACK_IMPORTED_MODULE_22__.iq).then(fp_ts_function__WEBPACK_IMPORTED_MODULE_32__.Q1,(e=>{logger.warn(prefix,`Failed to cache "${_Config__WEBPACK_IMPORTED_MODULE_22__.iq}".`,(0,_permutive_permutive_utils_ts_error__WEBPACK_IMPORTED_MODULE_33__.w)(e))})):sessionStorage.delete(_Config__WEBPACK_IMPORTED_MODULE_22__.iq)}))),window[windowKey].consent=consentValidation;const context=(0,_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_21__.PM)(tag.context||{},{path:window.location.pathname,url:(0,_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_34__.bk)(window.location.href),referrer:(0,_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_34__.bk)(document.referrer),view_id:viewId.get()}),createInternalsSpan=trace.startSpan("internals"),cookieStore=(0,_core_internals_CookiesWeb__WEBPACK_IMPORTED_MODULE_7__.S)(namespace,config,logger,consentTracking),localStorage=(0,_core_store_LocalStorage__WEBPACK_IMPORTED_MODULE_35__.E)(namespace,logger,consentTracking),externalData=(0,_core_internals_ExternalDataWeb__WEBPACK_IMPORTED_MODULE_36__.S)(namespace,logger,consentTracking),clientContext=new _core_context_PermutiveClientContextWeb__WEBPACK_IMPORTED_MODULE_37__.z(context);(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_32__.zG)(viewId.ref,_framework_ref__WEBPACK_IMPORTED_MODULE_0__.YP((e=>clientContext.updateContext(["view_id",e]))));const userId=new _core_state_PermutiveUserId__WEBPACK_IMPORTED_MODULE_14__.M(config,clientContext,cookieStore,externalData),eventSourceId=new _sdkql_state_sync_PermutiveEventSourceId__WEBPACK_IMPORTED_MODULE_12__.$(permutiveData),enrichers=new _sdkql_event_collection_enrichment_Enrichers_GlobalEnricher__WEBPACK_IMPORTED_MODULE_38__.J,api=new _http_PermutiveApi__WEBPACK_IMPORTED_MODULE_19__.F(urls,config,network,metrics,logger),identityProviderEnv={permutive:permutiveGlobal,network,api,userId,metrics,permutiveData,messages,config,cookies:cookieStore,logger},identities=new _identity_legacy_PermutiveIdentities__WEBPACK_IMPORTED_MODULE_2__.lg(metrics,trace,permutiveData,identityProviderEnv,logger),identitiesIngestor=new _identity_legacy_PermutiveIdentitiesIngestorNoOp__WEBPACK_IMPORTED_MODULE_39__.z,permutiveRealtime=new _core_state_PermutiveRealtime__WEBPACK_IMPORTED_MODULE_40__.u(metrics,messages),sessionManager=yield _core_session_SessionManager__WEBPACK_IMPORTED_MODULE_10__.S.initialise(cookieStore,localStorage,logger),unprocessedArgs={consentTracking,logger,namespace},unprocessedEvents={PageviewComplete:new _core_events_unprocessed_UnprocessedPageviewComplete__WEBPACK_IMPORTED_MODULE_41__.p(unprocessedArgs),PrebidAuctions:new _core_events_unprocessed_UnprocessedPrebidAuctions__WEBPACK_IMPORTED_MODULE_42__.J(unprocessedArgs)},customProperties=new _sdkql_event_collection_PermutiveEventCustomProps__WEBPACK_IMPORTED_MODULE_43__.X,queryManagerTransitionDebounceTime=1e3,queryManagerTransitionMaxDebounceTime=1e4,queryManager=new _sdkql_query_language_query_manager_QueryManagerWeb__WEBPACK_IMPORTED_MODULE_9__.c({customProperties,externalData,logger,messages,api,permutive:permutiveGlobal,permutiveData,queryWorker,realtime:permutiveRealtime,sessionManager,transitionDebounceMaxTime:queryManagerTransitionMaxDebounceTime,transitionDebounceTime:queryManagerTransitionDebounceTime,userId,viewId,metrics}),permutiveReset=new _core_state_PermutiveReset__WEBPACK_IMPORTED_MODULE_44__.a(config,localStorage,logger,permutiveData,eventSourceId,cookieStore,externalData),taskQueue=new _utils_task_queue_PermutiveTaskQueue__WEBPACK_IMPORTED_MODULE_45__.i(messages),stateSync=new _sdkql_state_sync_PermutiveStateSyncWeb__WEBPACK_IMPORTED_MODULE_13__.N(api,network,sessionManager,permutiveData,queryManager,metrics,userId,eventSourceId,(0,_sdkql_state_sync_PermutiveStateSyncWeb__WEBPACK_IMPORTED_MODULE_13__.e)()),activationManager=new _core_activations_PermutiveActivationManagerWeb__WEBPACK_IMPORTED_MODULE_4__.v(logger,permutiveGlobal,clientContext),[addonsLoadedRef,setAddonsLoaded]=_framework_ref__WEBPACK_IMPORTED_MODULE_0__.Ue(!1),nextGen=yield(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_32__.zG)((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,8327))),_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_46__.SF,fp_ts_Task__WEBPACK_IMPORTED_MODULE_47__.UI((e=>{let{runNextGenFeaturesWeb:t}=e;return t({activationManager,addonsLoaded:addonsLoadedRef,api,config,consentTracking,enrichers,externalData,identities:identities.ref,logger,messages,metrics,namespace,network,permutiveData,queryManager,realtime:permutiveRealtime,sessionManager,stateSync,trace,track:function(){return permutiveGlobal.track(...arguments)},unprocessedPVC:unprocessedEvents.PageviewComplete,urls,userId,viewId})})))();(0,_core_metrics_MetricReporter__WEBPACK_IMPORTED_MODULE_8__.p)({api,context:nextGen.metricContext,enrichers,logger,messages,metrics});const state=new _core_state_PermutiveStateWeb__WEBPACK_IMPORTED_MODULE_48__.u(permutiveData,permutiveReset,userId,viewId,nextGen.eventCollection),addons={},permutiveMethods=(0,_PermutiveMethodsWeb__WEBPACK_IMPORTED_MODULE_28__.S)(logger,api,activationManager,sessionManager,metrics,viewId,userId,network,enrichers,clientContext,unprocessedEvents,queryManager,taskQueue,identities,permutiveReset,messages,addons,trace,permutiveRealtime,state,customProperties,config,permutiveData,externalData,cookieStore,identitiesIngestor,permutiveGlobal,consentTracking,nextGen);createInternalsSpan.finish(),[].forEach((s=>{fp_ts_Either__WEBPACK_IMPORTED_MODULE_49__.Y3((()=>eval(s)),(e=>{api.reportError(Object.assign(Object.assign({},e),{message:`Error running custom script ${s}`}),userId.get())}))}));const blockers=(0,_sdkql_blockers__WEBPACK_IMPORTED_MODULE_50__.X)({logger,messages});blockers.addBlocker("permutive:queries:initialised"),messages.on("permutive:user:ready",(()=>{permutiveGlobal.identify=permutiveMethods.identify.bind(permutiveMethods);const e=identities.extractIdentifyFromQueue({global:permutiveGlobal});e.length>0&&permutiveGlobal.identify(e)})),messages.on("permutive:blockers:empty",(()=>{permutiveGlobal.on=permutiveMethods.on.bind(permutiveMethods),permutiveGlobal.once=permutiveMethods.once.bind(permutiveMethods),permutiveGlobal.track=permutiveMethods.track.bind(permutiveMethods),permutiveGlobal.trigger=permutiveMethods.trigger.bind(permutiveMethods),permutiveGlobal.query=permutiveMethods.query.bind(permutiveMethods),permutiveGlobal.segment=permutiveMethods.segment.bind(permutiveMethods),permutiveGlobal.segments=permutiveMethods.segments.bind(permutiveMethods),permutiveGlobal.reset=permutiveMethods.reset.bind(permutiveMethods),permutiveGlobal.ready=permutiveMethods.ready.bind(permutiveMethods),permutiveGlobal.addon=permutiveMethods.addon.bind(permutiveMethods),permutiveGlobal.context=clientContext.getContext(),permutiveGlobal.addons=addons,permutiveGlobal.config=config,permutiveRealtime.setAsReady(),(0,_initialisation_queuedMethods__WEBPACK_IMPORTED_MODULE_27__.LA)(permutiveGlobal.q,state,permutiveGlobal,permutiveMethods,api,trace),setAddonsLoaded(!0)}));const loadAddonsSpan=trace.startSpan("load_addons");(0,_dynamic_addons_LoadAddons__WEBPACK_IMPORTED_MODULE_18__.C)({extMessages:new _dynamic_messages_PermutiveMessages__WEBPACK_IMPORTED_MODULE_51__.a(messages),nextGen,messages,viewId,state,sessionManager,api,clientContext,externalData,logger,metrics,network,permutive:permutiveGlobal,q:permutiveGlobal.q,userId}),loadAddonsSpan.finish();const loadEnrichersSpan=trace.startSpan("load_enrichers"),enricherEnv={api,config,clientContext,logger,permutiveData,metrics,sessionManager,enrichers,network},loadEnrichersPromise=(0,_sdkql_event_collection_enrichment_RegisterEnrichers__WEBPACK_IMPORTED_MODULE_52__.H)(enricherEnv)();loadEnrichersPromise.then((()=>{loadEnrichersSpan.finish()})),yield(0,_initialisation_identity__WEBPACK_IMPORTED_MODULE_25__.TZ)({api,clientContext,eventCollection:nextGen.eventCollection,externalData,global:permutiveGlobal,identities,identitiesIngestor,logger,messages,metrics,network,nextGen,permutiveMethods,queryManager,reset:permutiveReset,stateSync,trace,unprocessedEvents,userId,sessionManager,sessionCount:nextGen.metricContext.current.session_count}),yield loadEnrichersPromise,(0,_initialisation_initialisationLifecycle__WEBPACK_IMPORTED_MODULE_53__.R)(queryManager,messages,metrics,state,logger),sdkReadySpan.finish()}))),(e=>`Exception during initialisation. Got ${e}`))},initialisationSequence=(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_32__.zG)(fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.Do,(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("support",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.Uo)((0,_initialisation_browserFeatures__WEBPACK_IMPORTED_MODULE_54__.O)(globalThis)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("queryWorker",(()=>_sdkql_query_language_queryWorkerInit__WEBPACK_IMPORTED_MODULE_3__.F)),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("partialTagWithKey",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.Uo)((0,_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_26__.$o)(window)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("configFromQueryParams",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.Uo)((0,_Config__WEBPACK_IMPORTED_MODULE_22__.B9)()))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("tag",(e=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)((0,_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_26__.je)(e.partialTagWithKey,e.configFromQueryParams)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("logger",(e=>{let{tag:t}=e;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)((0,_core_internals_PermutiveLogger__WEBPACK_IMPORTED_MODULE_55__.SX)(t.config))})),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("urls",(e=>{let{tag:t}=e;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)(new _http_PermutiveUrls__WEBPACK_IMPORTED_MODULE_56__.s(t.config))})),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("network",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)(new _http_PermutiveNetwork__WEBPACK_IMPORTED_MODULE_20__.E))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("namespace",(e=>{let{tag:t}=e;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)(new _core_state_PermutiveNamespace__WEBPACK_IMPORTED_MODULE_57__.L(t.config))})),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("messages",(e=>{let{logger:t}=e;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)(new _core_internals_SDKMessages__WEBPACK_IMPORTED_MODULE_58__.Q(t))})),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("consentModule",(e=>(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_32__.zG)((()=>(0,_Consent_Consent__WEBPACK_IMPORTED_MODULE_23__.NY)(Object.assign(Object.assign({},e),{consentRequired:e.tag.config.consentRequired}))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.Vn)((e=>e.message))))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("sessionStorage",(e=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)((0,_core_store_SessionStorage__WEBPACK_IMPORTED_MODULE_16__.u)(e.namespace,e.logger,e.consentModule.consentTracking)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("permutiveData",(e=>{let{tag:t,namespace:n,logger:r,consentModule:a}=e;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)((0,_core_state_PermutiveDataStoreWeb__WEBPACK_IMPORTED_MODULE_11__.S)(t.config,n,r,a.consentTracking))})),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("metrics",(e=>{let{tag:t,messages:n,logger:r,permutiveData:a}=e;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.F2)((0,_core_metrics_Metrics__WEBPACK_IMPORTED_MODULE_59__.g)(sdkInitTimestamp,t.config,a,n,r))})),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.ak)("consent",(e=>(0,_Consent_InitialisationCheckWeb__WEBPACK_IMPORTED_MODULE_24__.D)(e))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_29__.tS)((e=>initialiseWebSDK(e))))},333:(e,t,n)=>{n.r(t);var r=n(365),a=n(3735),i=n(6341),s=n(7927),o=n(2197),c=n(6567),u=n(4673),d=n(1500),l=n(2652),f=n(6308);class g{constructor(e,t){this.config=e,this.logger=t,this.defaultReplacementMap=this.filterReplacementMap(this.config.defaultMap),this.replacementMap=this.setReplacementMap(this.config.replacementMap)}get getReplacementMap(){return this.replacementMap}setReplacementMap(e){return this.replacementMap=Object.assign(Object.assign({},this.defaultReplacementMap),this.filterReplacementMap(e)),this.logger.debug(`enrichers[${this.config.name}]: replacement map updated`,this.getReplacementMap),this.getReplacementMap}}class p extends g{filterReplacementMap(e){return(0,a.zG)(e,l.qh,(0,d.DZ)((e=>{const[,t]=e;return(0,f.t)(t)?c.YP:(0,c.G)(e)})),(0,d.u4)({},((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e})))}}class h extends g{filterReplacementMap(e){return e}}const _="geoip",m="enricher:geoip",b={},v={include_geo:(null==b?void 0:b.include_geo)||!0,include_isp:(null==b?void 0:b.include_isp)||!0,include_ip_hash:(null==b?void 0:b.include_ip_hash)||!0,include_ip:(null==b?void 0:b.include_ip)||!1},y=(e,t)=>{var n;const{$ip_geo_info_continent:r,$ip_address:i,$ip_address_hash:c}=u.U,d={$ip_geo_info_continent:r,$ip_address:i,$ip_geo_info:{city:u.U.$ip_geo_info_city,continent:u.U.$ip_geo_info_continent,country:u.U.$ip_geo_info_country,postal_code:u.U.$ip_geo_info_postal_code,province:u.U.$ip_geo_info_province},$ip_address_hash:c,$ip_isp_info:{autonomous_system_number:0,isp:u.U.$ip_isp_info_isp,autonomous_system_organization:u.U.$ip_isp_info_autonomous_system_organization,organization:u.U.$ip_isp_info_organization}},l=(0,a.zG)({$ip_geo_info:null==e?void 0:e.geo_info,$ip_geo_info_continent:null===(n=null==e?void 0:e.geo_info)||void 0===n?void 0:n.continent,$ip_isp_info:null==e?void 0:e.isp_info,$ip_address:null==e?void 0:e.ip,$ip_address_hash:null==e?void 0:e.ip_hash},s.hX(o.ff((e=>void 0===e))));return new h({name:_,defaultMap:d,replacementMap:l},t)},w=e=>{let{clientContext:t,api:n,permutiveData:r,metrics:a,sessionManager:i,enrichers:s,network:o,logger:c,config:u}=e;const d=e=>{e.isp_info&&t.updateContext(["isp",e.isp_info.isp],["organization",e.isp_info.organization],["autonomous_system_number",e.isp_info.autonomous_system_number],["autonomous_system_organization",e.isp_info.autonomous_system_organization]),e.geo_info&&t.updateContext(["continent",e.geo_info.continent],["country",e.geo_info.country],["city",e.geo_info.city],["province",e.geo_info.province],["postal_code",e.geo_info.postal_code])},l=r.getData(m);return l&&l.session_id===i.getSessionId()?(d(l.data),s.register(y(l.data,c)),Promise.resolve()):(c.debug("enrichers[geoip]: start HTTP request"),k(n,a,u,v).then((e=>(c.debug("enrichers[geoip]: end HTTP request"),d(e),r.setData(m,{session_id:i.getSessionId(),data:e}),e))).catch((e=>(n.reportError(`Error while registering the geoip enricher: got ${e}`),null))).then((e=>{s.register(y(e,c))})))},k=(e,t,n,r)=>{const a=[];return r.include_geo&&a.push(["include","geo"]),r.include_isp&&a.push(["include","isp"]),r.include_ip&&a.push(["include","ip"]),r.include_ip_hash&&a.push(["include","ip_hash"]),e.reqWithMetrics(t,"sdk_http_geoip_seconds",{url:e.urls.getEndpointUrl("/geoip",(0,c.G)(n.apiVersion),a),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!1})},E=()=>(0,i.B)({load:w});var P=n(655),S=n(2751);const I="watson";function D(e){if(!e)return[];const t=(0,d.xH)(e.filter(Boolean).map((e=>(e=>{const t=e.split("/").filter((e=>e));return t.map(((e,n)=>"/"+t.slice(0,n+1).join("/")))})(e.label))));return(0,d.jj)(S.Eq)(t)}const M=e=>{let{api:t,clientContext:n,config:r,enrichers:a,logger:i,metrics:s}=e;i.debug("enrichers[watson]: is enabled",r.watson.enabled);const o=r.watson.enabled?()=>(0,P.mG)(void 0,void 0,void 0,(function*(){const e=yield n.getClient();i.debug("enrichers[watson]: start HTTP request");const a=yield O(t,s,r,e.url);return i.debug("enrichers[watson]: end HTTP request",a),a})):()=>(0,P.mG)(void 0,void 0,void 0,(function*(){return i.debug("enrichers[watson]: stubbing response"),null})),c=o().then((e=>{n.updateContext([I,e||void 0]),a.register(((e,t)=>{var n,r,a,i;const s={$alchemy_concepts:null==e?void 0:e.concepts,$alchemy_document_emotion:null===(r=null===(n=null==e?void 0:e.emotion)||void 0===n?void 0:n.document)||void 0===r?void 0:r.emotion,$alchemy_document_sentiment:null===(a=null==e?void 0:e.sentiment)||void 0===a?void 0:a.document,$alchemy_entities:null==e?void 0:e.entities,$alchemy_entity_names:null===(i=null==e?void 0:e.entities)||void 0===i?void 0:i.map((e=>e.text)),$alchemy_keywords:null==e?void 0:e.keywords,$alchemy_taxonomy:null==e?void 0:e.taxonomy,$alchemy_taxonomy_labels:D(null==e?void 0:e.taxonomy),$taxonomy_labels:D(null==e?void 0:e.taxonomy)};return new p({name:I,defaultMap:{$alchemy_concepts:[],$alchemy_document_emotion:null,$alchemy_document_sentiment:null,$alchemy_entities:[],$alchemy_entity_names:[],$alchemy_keywords:[],$alchemy_taxonomy:[],$alchemy_taxonomy_labels:[],$taxonomy_labels:[]},replacementMap:s},t)})(e,i))}));return c.catch((e=>{i.error(`Error while registering the watson enricher: got ${e}`),s.track({name:"sdk_watson_classification_fail_count",value:1,labels:{}})})),c},O=(e,t,n,r)=>e.reqWithMetrics(t,"sdk_http_watson_seconds",{url:e.urls.getEndpointUrl("/watson",(0,c.G)(n.apiVersion)),method:"POST",contentType:"text/plain",dataType:"json",withCredentials:!1,payload:{url:r,classify:!0}}),T=()=>(0,i.B)({load:M});var q,C=n(4922);q=C.f,E(),T(),q().then((0,r.g_)((e=>console.warn(`Permutive was not initialized. ${e}`)),a.Q1))},2652:(e,t,n)=>{n.d(t,{Bf:()=>v,G6:()=>I,Gz:()=>w,HP:()=>x,Or:()=>O,PM:()=>l,PQ:()=>D,SL:()=>g,Z_:()=>q,a4:()=>h,aT:()=>b,b0:()=>k,b2:()=>p,bw:()=>U,cO:()=>M,eu:()=>_,fl:()=>P,k$:()=>y,lW:()=>T,lo:()=>G,m8:()=>E,qh:()=>d,rH:()=>z,rO:()=>A,vg:()=>C,vp:()=>f});var r=n(1500),a=n(3735),i=n(6567),s=n(7209),o=n(6017),c=n(2751),u=n(3992);const d=e=>Object.entries(e);function l(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>Object.assign(Object.assign({},e),t)),{})}function f(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t}function g(e){return t=>{let n=0;for(let r of t){n=n+e(r)|0}return n}}o.ff(c.xb);function p(){let e,t;return{promise:new Promise(((n,r)=>{e=n,t=r})),reject:t,resolve:e}}function h(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r={waitTimeInMs:50,exponentialBackOff:!1,maxAttempts:20},{waitTimeInMs:s,exponentialBackOff:o,maxAttempts:c}=l(r,n);let d=0;const f=n=>new Promise((r=>Promise.resolve(t()).then((t=>t?Promise.resolve(e()).then((e=>r((0,i.G)(e)))):(0,a.zG)(d++,(e=>e<c?(0,u.HJ)((()=>r(f(n*(o?2:1)))),n):r(i.YP)))))));return f(s)}function _(e,t){const n=Object.create(null);for(const r of t)n[r]=e[r];return n}let m=[];function b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:navigator.userAgent;if(m.unshift(e),m.length>1)return;const n=["beforeunload","pagehide"],r=n.concat(["visibilitychange"]),a=e=>{if(!i&&e){i=!0;const e=m;m=[],e.forEach((e=>{try{e()}catch(e){}}))}};let i=!1;r.forEach((e=>{window.addEventListener(e,(()=>{const n=("visibilitychange"!==e||document.hidden)&&S(t);a(n)}))})),n.forEach((e=>{window.addEventListener(e,(()=>a(!0)))}))}function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object.assign({capture:!0},t);const n=["visibilitychange","pagehide"];n.forEach((n=>window.addEventListener(n,(()=>i.Y3((()=>{"pagehide"!==n&&"hidden"!==document.visibilityState||e()}))),{capture:t.capture})))}function y(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^(globalThis.crypto||globalThis.msCrypto).getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}function w(e){return 36===e.length&&/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i.test(e)}function k(e,t){const n=Object.keys(e),r=n.length,a={};for(let s=0;s<r;s++){const r=n[s],o=t(r,e[r]);(0,i.pC)(o)&&(a[r]=o.value)}return a}function E(){const e={},t=arguments.length;for(let n=0;n<t;n++){const[t,r]=n<0||arguments.length<=n?void 0:arguments[n];e[t]=r}return e}function P(e,t){return k(e,((e,n)=>t(e)?(0,i.G)(n):i.YP))}function S(e){return/Mobi|Android/i.test(e)}function I(e){return/^((?!chrome|android).)*safari/i.test(e)}function D(e,t){return new Promise((n=>{var r;(0,u.HJ)((()=>{Promise.resolve(e()).then(n)}),null!==(r=null==t?void 0:t.timeout)&&void 0!==r?r:0)}))}function M(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}const O=()=>({equals:(e,t)=>Object.is(e,t)});function T(e){return(0,s.Zt)(((t,n)=>{const r=e.indexOf(t),a=e.indexOf(n);switch(!0){case-1===r&&-1===a:return 0;case-1!==r&&-1===a:return-1;case-1===r&&-1!==a:return 1;default:return r<=a?-1:1}}))}function q(e,t,n){return function(){try{return n(...arguments)}catch(n){e.reportError(n,t.get())}}}function C(e){return t=>null!=t&&e in t?t[e]:void 0}function x(e){let t=i.YP;const n=(0,i.fS)((()=>{const n=e();return t=(0,i.G)(n),n}));return()=>n(t)}const A=e=>t=>{var n;const r=Object.assign({},t);for(const a in e)r[a]=null===(n=e[a])||void 0===n?void 0:n.call(e,t[a]);return r};function U(e){return t=>(e(t),t)}const G=e=>t=>{const n=e.slice(0,-1),s=e.slice(-1)[0];return(0,a.zG)(n,r.f2((e=>{let[n,r]=e;return(0,a.zG)(t,i.DT(n),i.UI(r))})),i.fS((()=>s(t))))},j=e=>t=>{if("number"==typeof t)return t;if("string"==typeof t){const n=e(t);return Number.isNaN(n)?void 0:n}},z=j(parseInt);j(parseFloat)},6574:(e,t,n)=>{n.d(t,{l:()=>r});class r{constructor(e){var t;this.config=e,this.shouldUsePerformanceMark=!1,this.placeholderSpan={spanId:null,finish:()=>({})},this.shouldUsePerformanceMark=(null===(t=null===window||void 0===window?void 0:window.performance)||void 0===t?void 0:t.mark)&&this.config.tracingEnabled}startSpan(e){var t;if(this.shouldUsePerformanceMark){const n=this.generateId(),r=`permutive_${e}`,a=`${r}${n}_start`;return null===(t=null===window||void 0===window?void 0:window.performance)||void 0===t||t.mark(a),{spanId:a,finish:()=>{var e,t;null===(t=null===(e=null===window||void 0===window?void 0:window.performance)||void 0===e?void 0:e.measure)||void 0===t||t.call(e,r,a)}}}return this.placeholderSpan}generateId(){return"_"+Math.random().toString(36).substr(2,9)}}},4730:(e,t,n)=>{n.d(t,{b:()=>i});var r=n(2652),a=n(3992);class i{constructor(e,t){this.timeoutDurationInMilliseconds=e,this.maxTimeOutDurationInMilliseconds=t}schedule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeoutDurationInMilliseconds,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.maxTimeOutDurationInMilliseconds;return this.debounce(e,t,n)}scheduleAccumulated(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeoutDurationInMilliseconds,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.maxTimeOutDurationInMilliseconds;return this.debounce(e,n,r,t)}scheduleForPageUnload(e){return(0,r.aT)(e)}debounce(e,t,n,i){let s,o,c,u=[];return d=>{i&&(c=i.concat(null!=c?c:i.empty,d));const l=(0,r.b2)();u.push(l);return null==s||s(),s=(0,a.HJ)((()=>{null==o||o(),o=void 0;const t=e(c||d);u.forEach((e=>e.resolve(t))),c=null==i?void 0:i.empty,u=[]}),t),o||(o=(0,a.HJ)((()=>{null==s||s(),o=void 0;const t=e(c||d);u.forEach((e=>e.resolve(t))),c=null==i?void 0:i.empty,u=[]}),n)),l.promise}}}},4996:(e,t,n)=>{n.d(t,{i:()=>a});var r=n(3992);class a{constructor(e){this.messages=e,this.queue=[],this.nextNotify=null,e.on("permutive:taskQueue:update",(()=>{this.execute()}))}add(e){this.queue.push(e),this.notify()}notify(){const e=()=>{this.messages.emit("permutive:taskQueue:update")},t=(new Date).getTime();null===this.nextNotify||this.nextNotify<t-50?(this.nextNotify=t,e()):this.nextNotify<=t&&(this.nextNotify=t+50,(0,r.HJ)(e,50))}execute(){if(0===this.queue.length)return;let e=!1,t=!1,n=0;for(let r=0;r<this.queue.length;r++){const a=this.queue[r];if(a.complete)n+=1;else if(a.started)t=!0,e=e||a.blocks();else{if(a.waits()&&t)break;e||(t=!0,e=e||a.blocks(),a.execute((()=>{this.notify()})))}}this.queue.splice(0,n)}size(){return this.queue.length}}},3030:(e,t,n)=>{n.d(t,{_Y:()=>s,bk:()=>i,zM:()=>a});var r=n(3735);const a=()=>{var e,t;const n=null===(t=null===(e=window.location.href.split("?")[1])||void 0===e?void 0:e.split("#")[0])||void 0===t?void 0:t.split("&");return void 0===n?{}:n.reduce(((e,t)=>{const[n,r]=t.split("=");return Object.assign(Object.assign({},e),{[n]:r})}),{})},i=e=>{if(!e)return"";return(0,r.zG)(e,(e=>{const t=e.length-1;return"/"===e[t]?e.slice(0,t):e}))};function s(e){const t=e.match(/\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b/),n=e.match(/[a-z0-9][a-z0-9-]+\.[a-z.]{2,24}$/i),r=e.match(/localhost/);if(n&&n.length>0){const t=e.split(".").reverse();return t.length>=3&&t[1].match(/^(com|edu|gov|net|mil|org|nom|co|ac|name|info|biz)$/i)?t[2]+"."+t[1]+"."+t[0]:t[1]+"."+t[0]}return t&&(null==t?void 0:t.length)>0?t[0]:r&&(null==r?void 0:r.length)>0?"localhost":""}},7826:(e,t,n)=>{n.d(t,{$7:()=>_,Cg:()=>g,Qd:()=>h,cs:()=>p,dN:()=>l,zi:()=>f});var r=n(365),a=n(3735),i=n(6567),s=n(3328),o=n(2116),c=n(2851),u=n(2652);const d="[PrebidJS]";function l(e){const t=(()=>{const e=["pbjs",...window._pbjsGlobals||[]];return[...new Set(e)]})();e.logger.debug(d,"Found keys",t);return o.K4((()=>(0,a.zG)(t,s.UI((0,a.ls)((e=>(e=>{const t={maxAttempts:100,waitTimeInMs:50};let n;return{windowPropertyKey:e,pbjs:(0,u.a4)((()=>n),(()=>{const t=(0,a.zG)(window,(0,u.vg)(e));return!(!(null==t?void 0:t.que)||"function"!=typeof(null==t?void 0:t.getEvents)||(n=t,0))}),t)}})(e)),(t=>(0,a.zG)(c.p4(t.pbjs),c.UI((n=>{const s=r.pF((n=>(n.message=`Failed to resolve key "${t.windowPropertyKey}". ${n.message}`,e.reportError(`${d} ${n.toString()}`),i.YP)));return(0,a.zG)(n,(0,u.bw)(i.UI((n=>e.logger.debug(d,`Completed check for key "${t.windowPropertyKey}"`,{result:n})))),i.UI(s),i.UI(i.UI((e=>({windowPropertyKey:t.windowPropertyKey,pbjs:e})))))})))))),(e=>c.vP(...e)),c.UI((e=>({completedChecks:e.every(i.pC),pbjsKeyPairs:e.map(i.xH)}))),c.UI((e=>{let{pbjsKeyPairs:t,completedChecks:n}=e;const r=t.filter(i.pC),[o,...c]=r;return{completedChecks:n,mainPair:null!=o?o:i.YP,otherPairs:(0,a.zG)(c,s.DZ(a.yR))}})))))}const f=e=>"function"==typeof e.readConfig?e.readConfig():e.getConfig();function g(e){var t;const n=null===(t=e.meta)||void 0===t?void 0:t.advertiserDomains;if("string"==typeof n)return[n];if(Array.isArray(n)){const e=n.filter((e=>"string"==typeof e));return e.length>0?e:void 0}}const p=e=>{var t;const n=e.appnexus&&"object"==typeof e.appnexus&&"buyerMemberId"in e.appnexus&&e.appnexus.buyerMemberId,r=e.rubicon&&"object"==typeof e.rubicon&&"networkId"in e.rubicon&&e.rubicon.networkId,a=n||r||(null===(t=null==e?void 0:e.meta)||void 0===t?void 0:t.networkId);return a?`${a}`:void 0},h=e=>{var t;const n=e=>isNaN(e)?void 0:e;try{return"number"==typeof e.cpm?n(e.cpm):(0,a.zG)(null!==(t=e.cpm)&&void 0!==t?t:"",parseFloat,n)}catch(e){return}},_=e=>e.dealId?`${e.dealId}`:void 0},122:(e,t,n)=>{n.d(t,{X:()=>r});const r=e=>{let t=!0;const n=[];return{addBlocker:r=>{n.push(r),e.logger.log("<blockers> added blocker "+r),e.messages.on(r,(()=>{if(t){const a=n.indexOf(r);a>=0&&(n.splice(a,1),e.logger.log("<blockers> removed blocker "+r)),0===n.length&&(t=!1,e.messages.emit("permutive:blockers:empty"),e.logger.log("<blockers> complete"))}}))}}}},7748:(e,t,n)=>{n.d(t,{X:()=>r});class r{constructor(){this.properties={}}overrideCustomProps(e){this.properties=e}getCustomProps(){return this.properties}}},7200:(e,t,n)=>{n.d(t,{J:()=>a});var r=n(6308);class a{constructor(){this.replacementMap={}}register(e){this.replacementMap=Object.assign(Object.assign({},this.replacementMap),e.getReplacementMap)}enrich(e,t){return this.enrichRecursive(e,t)}enrichRecursive(e,t){const n={output:{},isFullyEnriched:!0},a=Object.keys(e);for(let i=0;i<a.length;i++){const s=a[i],o=e[s];switch(!0){case(0,r.t)(o):const[e,a]=this.isPropertyReplaceable(o);n.output[s]=e?a:o,this.replacementMap.hasOwnProperty(o)&&a===o&&t&&delete n.output[s],n.isFullyEnriched=!!e&&n.isFullyEnriched;break;case null!==o&&"object"==typeof o&&o.constructor===Object:const i=this.enrichRecursive(o,t);n.output[s]=i.output,n.isFullyEnriched=n.isFullyEnriched&&i.isFullyEnriched;break;default:n.output[s]=o}}return n}isPropertyReplaceable(e){const t=this.replacementMap[e];return[this.replacementMap.hasOwnProperty(e)&&t!==e,t]}}},6341:(e,t,n)=>{n.d(t,{B:()=>o,H:()=>c});var r=n(3735),a=n(5151),i=n(6934);const s=[],o=e=>{s.push(e)},c=e=>{const t=s.map((t=>(0,i.Y3)((()=>t.load(e)),(t=>{e.api.reportError(t)}))));return(0,r.zG)((0,a.RD)(t),(0,a.UI)(r.Q1))}},6308:(e,t,n)=>{n.d(t,{t:()=>r});const r=e=>"string"==typeof e&&"$"===e[0]},2546:(e,t,n)=>{n.r(t),n.d(t,{make:()=>A});var r=n(3735),a=n(655);let i,s;const o=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,l=new WeakMap;let f={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return c.get(e);if("objectStoreNames"===t)return e.objectStoreNames||u.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return h(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function g(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(_(this),t),h(o.get(this))}:function(...t){return h(e.apply(_(this),t))}:function(t,...n){const r=e.call(_(this),t,...n);return u.set(r,t.sort?t.sort():[t]),h(r)}}function p(e){return"function"==typeof e?g(e):(e instanceof IDBTransaction&&function(e){if(c.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",i),e.removeEventListener("abort",i)},a=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",a),e.addEventListener("error",i),e.addEventListener("abort",i)}));c.set(e,t)}(e),t=e,(i||(i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,f):e);var t}function h(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",a),e.removeEventListener("error",i)},a=()=>{t(h(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",a),e.addEventListener("error",i)}));return t.then((t=>{t instanceof IDBCursor&&o.set(t,e)})).catch((()=>{})),l.set(t,e),t}(e);if(d.has(e))return d.get(e);const t=p(e);return t!==e&&(d.set(e,t),l.set(t,e)),t}const _=e=>l.get(e);const m=["get","getKey","getAll","getAllKeys","count"],b=["put","add","delete","clear"],v=new Map;function y(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(v.get(t))return v.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,a=b.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!a&&!m.includes(n))return;const i=async function(e,...t){const i=this.transaction(e,a?"readwrite":"readonly");let s=i.store;return r&&(s=s.index(t.shift())),(await Promise.all([s[n](...t),a&&i.done]))[0]};return v.set(t,i),i}f=(e=>({...e,get:(t,n,r)=>y(t,n)||e.get(t,n,r),has:(t,n)=>!!y(t,n)||e.has(t,n)}))(f);var w=n(2688),k=n(365),E=n(5151),P=n(6934),S=n(2652);function I(e){return"development"===e.environment?window.isSecureContext:"https:"===window.location.protocol}var D=n(3992);const M="[IDB]",O=(e,t,n,i,s,o)=>(0,r.zG)((0,E.of)(e.getNamespacedStorageKey(s)),(0,E.tS)((e=>(0,P.Y3)((()=>(0,a.mG)(void 0,void 0,void 0,(function*(){return n.put(i,o,e)}))),w.w))),(0,E.UI)((0,k.g_)((e=>{throw t.error(M,`Failed to store crypto key to ${i} due to unexpected error,\n`,e),e}),(()=>o))),(e=>e()));class T{constructor(e,t,n,r,a,i,s,o){this.namespace=e,this.logger=t,this.cryptoAlg=n,this.idb=r,this.mainObjectStore=a,this.keyObjectStore=i,this.keyObjectKey=s,this.cryptoKey=o,this.MAX_CONSECUTIVE_PUTS=30,this.puts=1,this.hasForcedCompaction=!1,this.logDebug("Created",this.idb)}static initialise(e,t,n,i,s,o,c,u,d,l){const f=(0,S.G6)(navigator.userAgent)&&!1,g=[I(e),s.isAvailable(),!f].every((e=>!0===e)),p=(e,n,o)=>(0,a.mG)(this,void 0,void 0,(function*(){return(0,r.zG)(yield e.get(o,t.getNamespacedStorageKey(n)),(e=>(0,a.mG)(this,void 0,void 0,(function*(){return null!=e?e:s.generateKey(!1)}))),(n=>(0,a.mG)(this,void 0,void 0,(function*(){return O(t,i,e,u,d,yield n)})))).catch((e=>{const t=(0,w.w)(e);throw i.error(M,"Get crypto key failed. Got\n",t),t}))})),h=(e,t,n)=>t.includes(n)?(0,r.Q1)():e.createObjectStore(n),_=g?(0,k.Y3)((()=>function(e){if(!(0,S.G6)(navigator.userAgent)||!indexedDB.databases)return Promise.resolve();let t=()=>{},n=0;return new Promise((e=>{const r=()=>(n++,indexedDB.databases().finally((0,D.GL)(e)));t=(0,D.UM)(r,100),r()})).finally((()=>{t(),e.track({name:"sdk_idb_conn_attempt_safari_count",value:n,labels:{}})}))}(n).then((()=>q(o,l,{upgrade:e=>{const t=[...e.objectStoreNames];h(e,t,c),h(e,t,u)}})))),String):(0,k.t$)("Connection not attempted. Default to localStorage");return(0,k.g_)((e=>(0,P.t$)(e)),(e=>(0,r.zG)((0,P.Y3)((()=>e.then((e=>(0,a.mG)(this,void 0,void 0,(function*(){return{db:e,cryptoKey:yield p(e,d,u)}}))))),String),(0,P.UI)((e=>{let{db:n,cryptoKey:r}=e;return new T(t,i,s,n,c,u,d,r)})))))(_)}put(e,t){return(0,a.mG)(this,void 0,void 0,(function*(){return(0,r.zG)((()=>(0,a.mG)(this,void 0,void 0,(function*(){return(0,r.bc)(JSON.stringify(e),this.cryptoKey)}))),(0,E.tS)((e=>{let[t,n]=e;return(0,E.of)(this.cryptoAlg.encrypt(n,t))})),(0,E.tS)((e=>()=>(0,a.mG)(this,void 0,void 0,(function*(){return yield this.resetIfRequired(this.puts++),e})))),(0,E.tS)((e=>(0,P.Y3)((()=>this.idb.put(this.mainObjectStore,e,this.namespace.getNamespacedStorageKey(String(t)))),w.w))),(0,E.UI)((0,k.g_)((n=>{throw this.logError(`Failed to put "${t.toString()}" value`,e,". Got \n",n),"QuotaExceededError"===n.name&&this.forceCompaction(),n}),(()=>t))),(e=>e()))}))}get(e){return(0,r.zG)(this.namespace.getNamespacedStorageKey(String(e)),(t=>this.idb.get(this.mainObjectStore,t).then((e=>(0,a.mG)(this,void 0,void 0,(function*(){return e?JSON.parse(yield this.cryptoAlg.decrypt(this.cryptoKey,e)):null})))).catch((t=>{const n=(0,w.w)(t);throw this.logError(`Get ${e.toString()} failed. Got`,n),n}))))}delete(e){return(0,r.zG)(this.namespace.getNamespacedStorageKey(String(e)),(e=>this.idb.delete(this.mainObjectStore,e)))}deleteStore(){return this.logDebug("Deleting",this.idb),this.idb.close(),C(this.idb.name)}forceCompaction(){if(this.hasForcedCompaction)return null;this.hasForcedCompaction=!0,this.logDebug("Attempting to force compaction");const e=`__${this.mainObjectStore}`;return q(e).then((t=>(t.close(),C(e))))}resetIfRequired(e){return(0,S.G6)(navigator.userAgent)&&e%this.MAX_CONSECUTIVE_PUTS==0?this.reset():Promise.resolve()}reset(){return(0,a.mG)(this,void 0,void 0,(function*(){const e=this.idb.name,t=this.idb.version;yield this.deleteStore(),this.idb=yield q(e,t),this.idb.createObjectStore(this.mainObjectStore),this.idb.createObjectStore(this.keyObjectStore),yield O(this.namespace,this.logger,this.idb,this.keyObjectStore,this.keyObjectKey,this.cryptoKey),this.logDebug("Reset to",this.idb)}))}logDebug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.debug(M,...t)}logError(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.error(M,...t)}}const q=(0,r.ls)((function(e,t,{blocked:n,upgrade:r,blocking:a,terminated:i}={}){const s=indexedDB.open(e,t),o=h(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(h(s.result),e.oldVersion,e.newVersion,h(s.transaction))})),n&&s.addEventListener("blocked",(()=>n())),o.then((e=>{i&&e.addEventListener("close",(()=>i())),a&&e.addEventListener("versionchange",(()=>a()))})).catch((()=>{})),o}),D.t_,(e=>e.then((e=>({close:e.close.bind(e),createObjectStore:(0,r.ls)(e.createObjectStore.bind(e),r.Q1),delete:(0,r.ls)(e.delete.bind(e),D.t_),get:(0,r.ls)(e.get.bind(e),D.t_),get name(){return e.name},put:(0,r.ls)(e.put.bind(e),D.t_),get version(){return e.version}}))))),C=(0,r.ls)((function(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(()=>t())),h(n).then((()=>{}))}),D.t_);var x=n(8259);const A=(e,t,n,a,i,s,o,c,u,d,l)=>(0,r.zG)(T,(0,x._z)({logger:d,consentTracking:l,prefix:M})).initialise(e,t,n,d,a,i,s,o,c,u)},6197:(e,t,n)=>{n(2652)},9581:(e,t,n)=>{n.r(t),n.d(t,{PrebidAddon:()=>y,load:()=>v});var r=n(9853),a=n(655),i=n(1500),s=n(365),o=n(3735),c=n(6567),u=n(2851),d=n(2652),l=n(7826);const f="prebidAddonLoadingtime",g="prebidAddonInitStart",p="prebidAddonInitEnd",h=(0,r.Hn)("prebid")("revenue_insights_enabled",!1);class _{constructor(e){this.trackedBids=[],this.logger=e.logger,this.permutive=e.permutive,this.options=e,this.startRevenueInsights()}startRevenueInsights(){return(0,a.mG)(this,void 0,void 0,(function*(){if(this.logger.debug("[Revenue Insights]","revenue insights enabled",h),!1===h)return;performance.mark(g);const e={maxAttempts:200,waitTimeInMs:50};(0,o.zG)(this.options.pbjs,u.UI(c.UI((t=>(0,d.a4)((()=>this.runRevenueInsights(t)),(()=>{var e;return!!(null===(e=window.googletag)||void 0===e?void 0:e.pubads)}),e)))))}))}runRevenueInsights(e){this.trackMetrics();const t=()=>{e.getAllWinningBids().forEach((e=>n(e,!0))),e.onEvent("bidWon",(e=>n(e,!0)))},n=(e,t)=>(0,s.Y3)((()=>u(e,t)),(e=>{})),r=e=>{var t,n,r,a,i,s;const o=(null===(t=null==e?void 0:e.meta)||void 0===t?void 0:t.brandName)||(null===(n=null==e?void 0:e.meta)||void 0===n?void 0:n.clickUrl)||(null===(r=null==e?void 0:e.adomain)||void 0===r?void 0:r[0])||(null===(a=null==e?void 0:e.meta)||void 0===a?void 0:a.advertiserName)||(null!==(i=(0,l.Cg)(e))&&void 0!==i?i:[])[0]||(null===(s=null==e?void 0:e.adserverTargeting)||void 0===s?void 0:s.hb_adomain);return o?`${o}`:void 0},a=e=>{var t,n,r;const a=e.rubicon&&"object"==typeof e.rubicon&&"advertiserId"in e.rubicon&&e.rubicon.advertiserId||(null===(t=null==e?void 0:e.meta)||void 0===t?void 0:t.brandId)||(null===(n=null==e?void 0:e.meta)||void 0===n?void 0:n.buyerId)||(null===(r=null==e?void 0:e.meta)||void 0===r?void 0:r.advertiserId);return a?`${a}`:void 0},o={equals:(e,t)=>e.ad_unit_code===t.ad_unit_code&&e.ad_id===t.ad_id&&e.auction_id===t.auction_id&&e.winning_bid===t.winning_bid},c=e=>!(0,i.t9)(o)(e,this.trackedBids),u=(t,n)=>{const i=(0,l.zi)(e),s=((e,t,n)=>{var i,s;return{ad_id:null!==(i=e.adId)&&void 0!==i?i:"",ad_unit_code:null!==(s=e.adUnitCode)&&void 0!==s?s:"",bidder:e.bidder,bidder_timeout:n,deal_id:(0,l.$7)(e),cpm:(0,l.Qd)(e),hb_pb:e.adserverTargeting&&e.adserverTargeting.hb_pb,height:(0,d.rH)(e.height),width:(0,d.rH)(e.width),time_to_respond:e.timeToRespond,bid_available:"string"==typeof e.statusMessage&&e.statusMessage.indexOf("empty")<0,winning_bid:t,advertiser_id:a(e),advertiser_name:r(e),dsp_id:(0,l.cs)(e),auction_id:e.auctionId}})(t,n,(0,d.rH)(i.bidderTimeout));c(s)&&(s.cpm&&s.cpm>0&&n&&this.permutive.track("PrebidBid",s),this.updateTrackedBids(s))};e.que.push((()=>{window.googletag.cmd.push(t)}))}trackMetrics(){performance.mark(p),performance.measure(f,g,p);const e=performance.getEntriesByName(f)[0].duration;this.options.metrics.track({name:"sdk_addon_init_duration_seconds",value:e,labels:{addon:"prebid"}})}updateTrackedBids(e){const t=this.trackedBids.findIndex((t=>e.ad_id===t.ad_id&&e.winning_bid!==t.winning_bid));t>-1?this.trackedBids[t]=Object.assign(Object.assign({},this.trackedBids[t]),e):this.trackedBids.push(e)}}const m="prebid",b=(0,r.Hn)("prebid")("data_provider_config",{ac_bidders:[]}),v=e=>{e.q.push({functionName:"addon",arguments:[m,{}]})};class y extends _{constructor(e){super(e),this.dataProviderParamsFromIntegrationConfig={},this.logger=e.logger,this.externalData=e.externalData,this.parsePrebidConfig()}getPermutiveRtdConfig(){return this.logDebug("RTD config retrieved",this.dataProviderParamsFromIntegrationConfig),this.dataProviderParamsFromIntegrationConfig}storeAndSetPermutiveRtdConfig(e){this.externalData.setExternalJsonData("permutive-prebid-rtd",e),this.dataProviderParamsFromIntegrationConfig=e}parsePrebidConfig(){this.logDebug("data provider config",b);const{ac_bidders:e}=b;this.storeAndSetPermutiveRtdConfig({acBidders:e})}logDebug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.log("[prebid]",...t)}}},8036:(e,t,n)=>{n.d(t,{AG:()=>o,UC:()=>i,Yh:()=>s});var r=n(6567),a=n(2652);const i=(e,t,n)=>e in t||(()=>{const t="number"==typeof e?e:parseInt(e);return!1===isNaN(t)&&n.has(t)})(),s=e=>(0,a.b0)(e,((e,t)=>t.state?(0,r.G)({[t.checksum]:t.state}):r.YP));function o(e){var t;return["SegmentEntry","SegmentExit"].includes(e.name)&&void 0!==(null===(t=e.properties)||void 0===t?void 0:t.segment_number)}},1628:(e,t,n)=>{n.d(t,{c:()=>Ne,e:()=>$e});var r=n(7183),a=n(2688),i=n(3735),s=n(6934),o=n(4386);const c=()=>({kind:"null",value:null}),u=e=>({kind:"string",value:e}),d=e=>({kind:"number",value:e}),l=e=>({kind:"array",value:e}),f=e=>({kind:"object",value:e}),g=e=>e,p=()=>({kind:"bottom"}),h=e=>({kind:"inner",a:e}),_=e=>({kind:"top",error:e}),m=e=>({kind:"unbounded",group:e}),b=(e,t)=>({kind:"windowed",key:t,group:e}),v=(e,t,n)=>({kind:"countLimit",n,limit:t,group:e}),y=(e,t,n)=>({kind:"uniqueLimit",n,limit:t,group:e}),w=e=>({kind:"numberGroup",group:e}),k=e=>({kind:"stringGroup",group:e}),E=e=>({kind:"tuple",tuple:e}),P=e=>({state:e}),S=(e,t)=>({commands:e,payload:t});var I=n(7209),D=n(2751);const M=(e,t)=>{switch(e.kind){case"bottom":return{kind:"bottom"};case"inner":return h(t(e.a));case"top":return _(e.error)}},O=e=>(0,I.Zt)(((t,n)=>{if("bottom"===t.kind&&"bottom"===n.kind)return 0;if("bottom"===t.kind)return-1;if("bottom"===n.kind)return 1;if("top"===t.kind&&"top"===n.kind)return D.Df.compare(t.error,n.error);if("top"===t.kind)return 1;if("top"===n.kind)return-1;if("inner"===t.kind&&"inner"===n.kind)return e.compare(t.a,n.a);throw new Error("Non exhaustive match in extendedAlgebraOrd")}));var T=n(6567),q=n(1885),C=n(1500),x=n(365),A=function(e){return-1===e?1:1===e?-1:0};function U(e,t){return(0,C.oA)(e.map(t))}function G(e,t,n,r){const a=(e,t)=>{if(0===e.length)return(0,C.oA)(t.map((e=>(0,T.G)({1:e[1],2:n(T.YP,(0,T.G)(e[2]))}))));if(0===t.length)return(0,C.oA)(e.map((e=>(0,T.G)({1:e[1],2:n((0,T.G)(e[2]),T.YP)}))));if(e.length>0&&t.length>0&&(0,I.lt)(r)(e[0][1],t[0][1])){const[r,...i]=e,s=r[1],o=r[2];return(0,C.Ce)({1:s,2:n((0,T.G)(o),T.YP)})(a(i,t))}if(e.length>0&&t.length>0&&(0,I.gt)(r)(e[0][1],t[0][1])){const[r,...i]=t,s=r[1],o=r[2];return(0,C.Ce)({1:s,2:n(T.YP,(0,T.G)(o))})(a(e,i))}if(e.length>0&&t.length>0){const[r,...i]=e,[s,...o]=t,c=r[1],u=r[2],d=s[2];return(0,C.Ce)({1:c,2:n((0,T.G)(u),(0,T.G)(d))})(a(i,o))}throw new Error("Non exhaustive match in mapOption2")},i=(0,I.Uz)((e=>e[1]))(r),s=(e=>{const t=U(e,(e=>(0,T.pC)(e[2])?(0,T.G)({1:e[1],2:e[2].value}):T.YP));return 0===t.length?T.YP:(0,T.G)(t)})(a((0,C.DY)(i)([...e].map((e=>({1:e[0],2:e[1]})))),(0,C.DY)(i)([...t].map((e=>({1:e[0],2:e[1]}))))));return(0,T.UI)((e=>new Map(e.map((e=>[e[1],e[2]])))))(s)}function j(e,t,n,r){const a=(0,I.Uz)((e=>e[0]))(r),i=(0,C.DY)(a)([...t]).reduceRight(((e,t)=>{if((0,x.nM)(e)){const r=n(t[1],e.left);return(0,T.pC)(r)?(0,x.t$)(r.value):(0,x.F2)(t[0])}return e}),(0,x.t$)(e));return(0,T.Uo)(i)}function z(e,t){return new Map([...e].map(t))}function R(e,t){return new Map([...e].filter(t))}var L=n(4268),B=n(4011);function W(e){return JSON.stringify($(e))}function $(e){switch(e.kind){case"null":return F.encode(e);case"string":return Y.encode(e);case"number":return V.encode(e);case"array":return Q.encode(e);case"object":return H.encode(e)}}function K(e){return null===e?F.decode(e):"number"==typeof e?V.decode(e):"string"==typeof e?Y.decode(e):Array.isArray(e)?Q.decode(e):H.decode(e)}const N=(e,t)=>(0,x.t$)(`Failed to decode. Input was ${JSON.stringify(e)}. Codec type was ${t}`),F={encode:e=>null,decode:e=>null===e?(0,x.F2)({kind:"null",value:null}):N(e,"SimpleNull")},Y={encode:e=>e.value,decode:e=>"string"==typeof e?(0,x.F2)(u(e)):N(e,"SimpleString")},V={encode:e=>e.value,decode:e=>"number"==typeof e?(0,x.F2)(d(e)):N(e,"SimpleNumber")},Q={encode:e=>e.value.map($),decode:e=>{if(Array.isArray(e)){const t=(0,C.fw)(x.g1)(K)(e);return(0,x.UI)(l)(t)}return N(e,"SimpleArray")}},H={encode:e=>{const t=[...e.value.entries()];return Object.assign({},...Array.from(t,(([e,t])=>({[e]:$(t)}))))},decode:e=>{if(e&&e.constructor===Object){const t=(0,C.fw)(x.g1)((([e,t])=>(0,i.zG)(K(t),(0,x.UI)((t=>(0,i.bc)(e,t))))))(Object.entries(e));return(0,x.UI)((e=>f(new Map([...e]))))(t)}return N(e,"SimpleObject")}};function J(e){return(0,i.zG)(e,Z,(0,T.UI)(W),(0,T.fS)((()=>"<encode error>")))}function X(e){return(0,T.UI)(ie)(function(e){switch(e.state.kind){case"top":return(0,T.G)(u(e.state.error));case"bottom":return T.YP;case"inner":return Z(e.state.a)}}(e))}function Z(e){return function(e){switch(e.kind){case"numberGroup":case"stringGroup":return ee(e.group);case"tuple":return e.tuple.length>0}}(e.payload)?(0,T.G)(l(function(e,t){const n=(0,T.UI)((e=>(0,C.Ce)(e)(t)))(e);return(0,T.fS)((()=>t))(n)}((0,T.UI)((e=>u(function(e){const t=e=>(0,T.EQ)((()=>""),(e=>"b"+JSON.stringify(e)))(e.bound),n=e=>{switch(e.operation){case"add":return"p";case"mul":return"m";case"max":return"v";case"min":return"n"}},r=e=>{const r=t(e[1])+n(e[1]);return 1===e[2]?r:r+JSON.stringify(e[2])};return e.map(r).join("")}(e))))(e.commands),function(e){const t=e=>{switch(e.kind){case"bottom":return{kind:"null",value:null};case"top":return u(e.error);case"inner":return d(e.a)}},n=e=>U([te,ne,e=>(0,i.zG)(e,ae,f,T.G)],(t=>t(e))),r=e=>U([te,re,e=>(0,i.zG)(e,ae,(e=>z(e,(([e,t])=>[JSON.stringify(e),t]))),f,T.G)],(t=>t(e)));switch(e.kind){case"tuple":return e.tuple.map(t);case"stringGroup":return n(e.group);case"numberGroup":return r(e.group)}}(e.payload)))):T.YP}function ee(e){switch(e.kind){case"unbounded":return e.group.size>0;case"windowed":return e.group.size>0||(0,T.pC)(e.key);case"countLimit":case"uniqueLimit":return e.group.size>0||(0,T.pC)(e.limit)}}function te(e){switch(e.kind){case"unbounded":return T.YP;case"windowed":return(0,T.G)(u("w"));case"countLimit":return(0,T.G)(u(1===e.n?"x":`x${e.n}`));case"uniqueLimit":return(0,T.G)(u(1===e.n?"u":`u${e.n}`))}}function ne(e){switch(e.kind){case"unbounded":return T.YP;case"windowed":return(0,T.G)(u((0,T.pC)(e.key)?e.key.value:""));case"countLimit":case"uniqueLimit":return(0,T.G)(u((0,T.pC)(e.limit)?e.limit.value:""))}}function re(e){switch(e.kind){case"unbounded":return T.YP;case"windowed":return(0,T.pC)(e.key)?(0,T.G)(d(e.key.value)):(0,T.G)({kind:"null",value:null});case"countLimit":case"uniqueLimit":return(0,T.pC)(e.limit)?(0,T.G)(d(e.limit.value)):(0,T.G)({kind:"null",value:null})}}function ae(e){switch(e.kind){case"unbounded":case"windowed":case"countLimit":case"uniqueLimit":return e.group}}function ie(e){switch(e.kind){case"array":return 0===e.value.length?{kind:"null",value:null}:1===e.value.length?ie(e.value[0]):l(e.value.map(ie));case"object":return(0,i.zG)(R(e.value,(([e,t])=>"null"!==t.kind)),(e=>z(e,(e=>[e[0],ie(e[1])]))),f);default:return e}}var se=n(902);function oe(e){const t=e=>{if(0===e.length)return{kind:"bottom"};const t=(e=>{if(4!==e.length)return T.YP;const[t,n,r,a]=e;if("string"===t.kind&&"string"===n.kind&&"object"===a.kind){const e=(0,T.DT)((e=>ce(e[1].value)&&ue(e[2].value)))({1:t,2:n});return(0,T.UI)((e=>({prim:e[1].value,grp:e[2].value,cutoff:r,m:a.value})))(e)}return T.YP})(e);if((0,T.pC)(t)){const{prim:e,grp:n,cutoff:r,m:a}=t.value,i=de(r,a,le(n));return"string"==typeof i?_(i):h(S(fe(e),i))}const n=(e=>{if(3!==e.length)return T.YP;const[t,n,r]=e;if("string"===t.kind&&"object"===r.kind){const e=(0,T.DT)((e=>ue(e.value)))(t);return(0,T.UI)((e=>({grp:e.value,cutoff:n,m:r.value})))(e)}return T.YP})(e);if((0,T.pC)(n)){const{grp:e,cutoff:t,m:r}=n.value,a=de(t,r,le(e));return"string"==typeof a?_(a):h(S(T.YP,a))}const r=(e=>{if(2!==e.length)return T.YP;const[t,n]=e;if("string"===t.kind&&"object"===n.kind){const e=(0,T.DT)((e=>ce(e.value)))(t);return(0,T.UI)((e=>({prim:e.value,m:n.value})))(e)}return T.YP})(e);if((0,T.pC)(r)){const{prim:e,m:t}=r.value;return h(S(fe(e),k(m(t))))}const a=(e=>{if(1!==e.length)return T.YP;const[t]=e;return"object"===t.kind?(0,T.G)({m:t.value}):T.YP})(e);if((0,T.pC)(a)){const{m:e}=a.value;return h(S(T.YP,k(m(e))))}const i=(e=>{if(e.length<1)return T.YP;const[t,...n]=e;if("string"===t.kind){const e=(0,T.DT)((e=>ce(e.value)))(t);return(0,T.UI)((e=>({prim:e.value,rest:n})))(e)}return T.YP})(e);if((0,T.pC)(i)){const{prim:e,rest:t}=i.value;return h(S(fe(e),pe(t)))}return h(S(T.YP,pe(e)))},n=e=>"array"===e.kind?(0,C.tS)(n)(e.value):[e];return"null"===e.kind?P({kind:"bottom"}):P(t(n(e)))}function ce(e){const t=e.split("");if(!0==(0===t.length))return!1;{const[e,...n]=t;return-1!=="bpmvn".indexOf(e)&&n.every((e=>-1!=="bpmvn0123456789.".indexOf(e)))}}function ue(e){const t=e.split("");switch(!0){case 0===t.length:return!1;case"w"===t[0]&&void 0===t[1]:return!0;default:{const[e,...n]=t;return-1!=="ux".indexOf(e)&&-1===n.map((e=>!isNaN(parseInt(e)))).indexOf(!1)}}}function de(e,t,n){switch(e.kind){case"string":return k(n({1:(0,T.G)(e.value),2:t}));case"number":case"null":return w(n({1:"null"===e.kind?T.YP:(0,T.G)(e.value),2:R(z(t,(([e,t])=>[Number(e),t])),(e=>!isNaN(e[0])))}));default:return"{bad cutoff}"}}function le(e){const t=e=>t=>y(t[2],t[1],e),n=e=>t=>v(t[2],t[1],e),r=e.split("");switch(!0){case"w"===r[0]&&void 0===r[1]:return e=>b(e[2],e[1]);case"u"===r[0]&&void 0===r[1]:return t(1);case"u"===r[0]&&void 0!==r[1]:return t(parseInt(r.slice(1).join("")));case"x"===r[0]&&void 0===r[1]:return n(1);case"x"===r[0]&&void 0!==r[1]:return n(parseInt(r.slice(1).join("")));default:throw new Error("This should never happen if you use isGroupCommand")}}function fe(e){const t=e=>(0,T.Wi)(e.bound)||"add"===e.operation||"mul"===e.operation?(0,T.G)(e):T.YP,n=(e,n,r)=>{const a=((e,n)=>(0,se.zG)(e,(e=>{switch(e){case"p":return(0,T.G)("add");case"m":return(0,T.G)("mul");case"v":return(0,T.G)("max");case"n":return(0,T.G)("min");default:return T.YP}}),T.UI((e=>({operation:e,bound:n}))),T.tS(t)))(e,r);return(0,T.UI)((e=>{const{init:t,rest:r}=(0,C.zT)((e=>{return"number"==typeof(t=parseInt(e))&&isFinite(t)&&Math.floor(t)===t;var t}))(n);return{1:{1:e,2:0===t.length?1:parseInt(t.join(""))},2:r.join("")}}))(a)};return(0,T.UI)(g)((0,q.nI)(ge(e,(e=>{const t=e.split("");if(0===t.length)return T.YP;const[r,...a]=t;if("b"===r){const{init:e,rest:t}=(0,se.zG)(a,(0,C.zT)((e=>-1!=="1234567890.".indexOf(e))));if(0===e.length||0===t.length)return T.YP;const r=parseFloat(e.join("")),[i,...s]=t;return n(i,s,(0,T.G)(r))}return n(r,a,T.YP)}))))}function ge(e,t){const n=t(e);return(0,T.fS)((()=>[]))((0,T.UI)((e=>[e[1]].concat(ge(e[2],t))))(n))}function pe(e){return E(e.map(he))}function he(e){switch(e.kind){case"number":return h(e.value);case"string":return _(e.value);case"null":return{kind:"bottom"};case"object":return _("{object}");case"array":return _("{array}")}}var _e=n(1828);const me={strategy:(e,t,n)=>r=>{if((0,T.Wi)(n))return t;if("delta"===e&&(0,T.Wi)(t))return T.YP;if((0,T.Wi)(t))return n;if((0,T.pC)(t)&&(0,T.pC)(n))return r(t.value,n.value);throw new Error("Non exhaustive match in combineCommand.strategy")},operation:(e,t,n,r,a,s)=>{const o=(0,C.pR)(O(s)),c=(0,i.zG)(t.bound,T.EQ((()=>i.yR),(e=>t=>(0,I.VV)(s)(a.fromNumber(e),t))));if("append"===e&&"add"===t.operation)return(0,C.yL)(n,r,Pe("append",(0,i.ls)(a.plus,c)));if("append"===e&&"mul"===t.operation)return(0,C.yL)(n,r,Pe("append",(0,i.ls)(a.times,c)));if("append"===e&&"max"===t.operation)return(0,I.Fp)(o)(n,r);if("join"===e&&"add"===t.operation)return(0,C.yL)(n,r,Pe("join",(0,I.Fp)(s)));if("join"===e&&"mul"===t.operation)return(0,C.yL)(n,r,Pe("join",(0,I.Fp)(s)));if("join"===e&&"max"===t.operation)return(0,I.Fp)(o)(n,r);if("min"===t.operation)return me.operation(e,{operation:"max",bound:t.bound},n,r,a,function(e){return(0,I.Zt)(((t,n)=>A(e.compare(t,n))))}(s));if("delta"===e&&"max"===t.operation)return(0,I.gt)(o)(n,r)?n:r.map(p);if("delta"===e)return(0,C.yL)(n,r,((e,t)=>(0,I.gt)(O(s))(e,t)?M(e,c):{kind:"bottom"}));throw new Error("Non exhaustive match in combineCommand.operation")},extend:(e,t,n,r)=>{if("delta"===e&&"top"===n.kind&&"top"===r.kind)return(0,I.gt)(D.Df)(n.error,r.error)?_(n.error):{kind:"bottom"};if("delta"===e&&"bottom"===r.kind)return n;if("delta"===e&&"bottom"===n.kind)return{kind:"bottom"};if("top"===n.kind&&"top"===r.kind)return _((0,I.Fp)(D.Df)(n.error,r.error));if("top"===n.kind)return n;if("top"===r.kind)return r;if("inner"===n.kind&&"inner"===r.kind)return t(n.a,r.a);if("bottom"===n.kind)return r;if("bottom"===r.kind)return n;throw new Error("Non exhaustive match in extend")}},be={fromNumber:i.yR,plus:(e,t)=>e+t,times:(e,t)=>e*t};function ve(e,t,n,r){if("unbounded"===e.kind&&"unbounded"===t.kind){const a=e.group,i=t.group;return(0,T.fS)(p)((0,T.UI)((e=>h(m(e))))(G(a,i,n,r)))}if("windowed"===e.kind&&"windowed"===t.kind){const a=e.key,i=e.group,s=t.key,o=t.group,c=(0,I.Fp)((0,T.pR)(r))(a,s);return(0,T.fS)(p)((0,T.UI)((e=>h(b(e,c))))(G(i,o,n,r)))}if("countLimit"===e.kind&&"countLimit"===t.kind){const a=e.n,i=t.n;if(a===i){const i=e.limit,s=e.group,o=t.limit,c=t.group,u=(0,I.Fp)((0,T.pR)(r))(i,o);return(0,T.fS)(p)((0,T.UI)((e=>h(v(e,u,a))))(G(s,c,n,r)))}return _("Non matching counts")}if("uniqueLimit"===e.kind&&"uniqueLimit"===t.kind){const a=e.n,i=t.n;if(a===i){const i=e.limit,s=e.group,o=t.limit,c=t.group,u=(0,I.Fp)((0,T.pR)(r))(i,o);return(0,T.fS)(p)((0,T.UI)((e=>h(y(e,u,a))))(G(s,c,n,r)))}return _("Non matching counts")}return _("Non matching group types")}function ye(e,t,n){return(0,T.fS)(c)(we(e,T.YP)(t,n))}function we(e,t){const n=t=>(n,r)=>me.strategy(e,n,r)(we(e,t)),r=(t,r,a)=>{if("stringGroup"===r.kind&&"stringGroup"===a.kind){const e=ve(r.group,a.group,n(t),D.Df);return M(e,(e=>k(Ee(e,D.Df))))}if("numberGroup"===r.kind&&"numberGroup"===a.kind){const e=ve(r.group,a.group,n(t),B.Df);return M(e,(e=>w(Ee(e,B.Df))))}if("tuple"===r.kind&&"tuple"===a.kind){const n=(0,T.pC)(t)?t.value:[];return h(E(function(e,t,n,r,a,i){const s=(e,t)=>({1:(0,C.ke)(e)(t).concat((0,C.KB)(Math.max(0,e-t.length),p)),2:(0,C.md)(e)(t)}),o=(t,n,r)=>{if(0===t.length)return me.operation(e,{operation:"max",bound:T.YP},n,r,a,i);if(t.length>0){const[c,...u]=t,d=s(c[2],n),l=d[1],f=d[2],g=s(c[2],r),p=g[1],h=g[2];return me.operation(e,c[1],l,p,a,i).concat(o(u,f,h))}throw new Error("Non exhaustive match in recurse")};return(0,C.GY)((0,C.Qp)((e=>"bottom"===e.kind))((0,C.GY)(o(t,n,r))))}(e,n,r.tuple,a.tuple,be,B.Df)))}throw new Error(`Non matching payload. Got ${r.kind} and ${a.kind}`)},a=(e,n)=>{if((0,T.Eh)((0,q.Eh)((0,L.n_)({1:(0,L.n_)({operation:D.Eq,bound:(0,T.Eh)(B.Eq)}),2:B.Eq}))).equals(e.commands,n.commands)){const a=(0,T.Wi)(e.commands)?t:e.commands,i=r(a,e.payload,n.payload);return M(i,(t=>S(e.commands,t)))}if(a=e.commands,s=n.commands,(0,T.Eh)((0,q.Eh)((0,L.n_)({1:(0,L.n_)({operation:D.Eq}),2:B.Eq}))).equals(a,s)){const a=(0,i.zG)(((e,t)=>(0,i.zG)((0,_e.gz)(T.G5)(e,t),(0,T.UI)((([e,t])=>q.yL(e,t,((e,t)=>({1:{operation:e[1].operation,bound:(0,i.zG)((0,_e.gz)(T.G5)(e[1].bound,t[1].bound),T.UI((([e,t])=>Math.min(e,t))),T.wp((()=>e[1].bound)),T.wp((()=>t[1].bound)))},2:e[2]})))))))(e.commands,n.commands),T.wp((()=>t))),s=r(a,e.payload,n.payload);return M(s,(e=>S(a,e)))}throw new Error(`Non matching primitive strings. Got ${J(e)} and ${J(n)}`);var a,s};return(t,n)=>X(P(me.extend(e,a,oe(t).state,oe(n).state)))}function ke(e,t,n){const r=(0,T.UI)((t=>R(e,(([e,r])=>(0,I.gf)(n)(e,t)))))(t);return(0,T.fS)((()=>e))(r)}function Ee(e,t){switch(e.kind){case"unbounded":return e;case"windowed":return(0,T.Wi)(e.key)?e:b(ke(e.group,e.key,t),e.key);case"countLimit":{const n=e.limit,r=e.n,a=e.group,i=j(r,a,((e,t)=>t<=1?T.YP:(0,T.G)(t-1)),t),s=(0,I.Fp)((0,T.pR)(t))(n,i);return v(ke(a,s,t),s,r)}case"uniqueLimit":{const n=e.limit,r=e.n,a=e.group,i=(e,t)=>{if("object"===e.kind){const n=[...e.value.keys(),...t.keys()],a=new Set(n);return a.size>=r?T.YP:(0,T.G)(a)}return T.YP},s=j(new Set,a,i,t),o=(0,I.Fp)((0,T.pR)(t))(n,s);return y(ke(a,o,t),o,r)}}}function Pe(e,t){return(n,r)=>me.extend(e,((e,n)=>h(t(e,n))),n,r)}var Se=n(5151),Ie=n(922),De=n(2652),Me=n(4730),Oe=n(8036);class Te{constructor(e,t,n){this.externalData=e,this.localQueries=t,this.externalQueries=n,this.queryCodesAsList=[],this.queryCodesAsMap={};const r=this.externalData.getExternalJsonData(Ie.mL)||[],a=(0,i.zG)((0,T.Y3)((()=>r.filter((e=>(0,Oe.UC)(e,this.localQueries,this.externalQueries))))),(0,T.fS)((()=>[])));this.add(a)}add(e){return(0,i.zG)(e.forEach((e=>this.queryCodesAsMap[e]=!0)),(e=>this.updateSegmentsList()))}remove(e){return(0,i.zG)(e.forEach((e=>delete this.queryCodesAsMap[e])),(e=>this.updateSegmentsList()))}getAllAsList(){return this.queryCodesAsList}getAllAsMap(){return this.queryCodesAsMap}getUpdates(e){const t=[],n=[];return Object.entries(e).forEach((e=>{let[r,a]=e;const i=parseInt(r),s=(null==a?void 0:a.result)||{result:!1},o=!0===(null==s?void 0:s.result)&&!(i in this.queryCodesAsMap),c=!1===(null==s?void 0:s.result)&&i in this.queryCodesAsMap;o?t.push(i):c&&n.push(i)})),{entered:t,exited:n}}flush(){this.externalData.setExternalJsonData(Ie.mL,this.getAllAsList())}reset(){this.externalData.removeExternalData(Ie.mL),this.queryCodesAsList=[],this.queryCodesAsMap={}}updateSegmentsList(){this.queryCodesAsList=Object.keys(this.queryCodesAsMap).map((e=>parseInt(e)))}}const qe="bootstrap",Ce="process",xe="processTransitions",Ae="updateExternalState",Ue="updateLAL",Ge="updateTPD";var je=n(2851);const ze="permutive:query:changed",Re="internal_query_states",Le="external_query_states",Be=e=>class extends e{constructor(){super(...arguments),this.prefix="[Query Manager]",this.isWorkerReady=!1,this.stateMap={value:{},promise:Promise.resolve({})},this.extStateMap={},this.userSegments=new Te(this.externalData,this.queryMetadata,this.externalQueries),this.segmentEntryQueryCodes=new Set,this.segmentExitQueryCodes=new Set,this.cohortEntryQueryCodes=new Set,this.cohortExitQueryCodes=new Set,this.hasNewOrModifiedQueries=!1,this.scheduler=new Me.b(this.transitionDebounceTime,this.transitionDebounceMaxTime),this.debouncedProcessTransitions=this.makeDebouncedProcessTransitions(),this.registerListenersOnlyOnce=(0,De.HP)((()=>{this.lalRef.onChange(T.UI((e=>this.postMessage(Ue,[e])()))),this.tpdRef.onChange(T.UI((e=>this.postMessage(Ge,[e])())))}));const[e,t]=je.Ue(this.userSegments.getAllAsList());this.queryCodesRef=e,this.queryCodesRefUpdate=t;const[n,r]=je.Ue(je.a9(T.YP));this.setLalRef=r,this.lalRef=je.xH(n);const[a,i]=je.Ue(je.a9(T.YP));this.setTpdRef=i,this.tpdRef=je.xH(a)}get queryCodesAsRef(){return this.queryCodesRef}makeStateMaps(){const e=this.permutiveData.getData(Re)||{},t=this.permutiveData.getData(Le)||{};for(const t in e)if("activations"in e[t]){const n=e[t].activations;for(const e in n)n[e]=[...new Set(n[e])]}this.logDebug("Cached state maps",{internal:e,external:t});const n=Object.keys(this.queryMetadata),r=Object.keys(e);this.hasNewOrModifiedQueries=n.length!==r.length||n.filter((t=>{var n;return this.queryMetadata[t]!==(null===(n=e[t])||void 0===n?void 0:n.checksum)})).length>0,this.logDebug("has new or modified queries",this.hasNewOrModifiedQueries);const a=this.hasNewOrModifiedQueries?(0,De.fl)(e,(t=>{var n;const r=null===(n=e[t])||void 0===n?void 0:n.checksum,a=r===this.queryMetadata[t];return a||this.logDebug(`Dropping state for query ${t}, mismatched checksum`,{cachedChecksum:r,checksum:this.queryMetadata[t]}),a})):e;this.extStateMap=this.hasNewOrModifiedQueries?this.dropExternalStateMissingFromStateMap(t,a):t,this.stateMap={value:a,promise:Promise.resolve(a)},this.logDebug("Initialised state maps",{internal:this.stateMap.value,external:this.extStateMap,metadata:this.queryMetadata});this.permutiveData.getData("query_states")&&this.permutiveData.deleteKey("query_states")}dropExternalStateMissingFromStateMap(e,t){const n=(0,De.fl)(e,(e=>e in t));return this.permutiveData.setData(Le,n),n}makeDebouncedProcessTransitions(){return this.scheduler.scheduleAccumulated((e=>this.processTransitions(e)()),{concat:(e,t)=>e.concat(t),empty:[]})}makeMessage(e,t,n){return{type:e,payload:(0,i.bc)(this.queryMetadata,this.extStateMap,...t),stateMap:n,userId:this.userId.get()}}trackTransition(e,t){const n=Ie.ED?this.customProperties.getCustomProps():{},r=Object.assign(Object.assign(Object.assign({},n),{segment_number:t}),{});e?(this.segmentEntryQueryCodes.add(t),this.cohortEntryQueryCodes.add(t.toString())):(this.segmentExitQueryCodes.add(t),this.cohortExitQueryCodes.add(t.toString())),this.permutive.track(e?"SegmentEntry":"SegmentExit",r)}trackSegmentsTransition(e,t){e.forEach((e=>{this.trackTransition(!0,e),this.messages.emit(ze,{queryCode:e,result:{result:!0}})})),t.forEach((e=>{this.trackTransition(!1,e),this.messages.emit(ze,{queryCode:e,result:{result:!1}})}))}updateUserSegments(e,t){e.length>0&&this.userSegments.add(e),t.length>0&&this.userSegments.remove(t),(e.length>0||t.length>0)&&(this.userSegments.flush(),this.queryCodesRefUpdate(this.userSegments.getAllAsList()))}onStateChangeReady(e){const{entered:t,exited:n}=this.userSegments.getUpdates(e);this.trackSegmentsTransition(t,n),this.updateUserSegments(t,n),this.logDebug("Updating query state",{updatedStateMap:e}),this.permutiveData.setData(Re,e);return(t.length>0||n.length>0)&&(this.logDebug("Updated cohorts",{entered:t,exited:n}),this.messages.emit("permutive:segments:updated")),{segmentsEntered:new Set(t),segmentsExited:new Set(n),cohortsEntered:new Set(t.map(String)),cohortsExited:new Set(n.map(String))}}postMessage(e,t){const n=()=>({segmentsEntered:new Set,segmentsExited:new Set,cohortsEntered:new Set,cohortsExited:new Set});return(0,i.ls)((()=>(0,i.a9)(this.stateMap.promise)),Se.UI((n=>this.makeMessage(e,t,n))),Se.tS((e=>this.processMessage(e))),s.UI((e=>this.userId.get()===e.userId?e:{diff:{},errors:[]})),s.UI((0,De.bw)((e=>{e.errors.length>0&&this.api.reportError(`QL error(s). Got ${e.errors.join("; ")}`,this.userId.get())}))),s.UI((e=>{let{diff:t,externalStateToDrop:r}=e;if(r){const e=(0,De.fl)(this.stateMap.value,(e=>!(e in r)));this.extStateMap=this.dropExternalStateMissingFromStateMap(this.extStateMap,e)}this.stateMap.value=Object.assign(Object.assign({},this.stateMap.value),t);const a=this.isWorkerReady?this.onStateChangeReady(this.stateMap.value):n();return{updatedStateMap:this.stateMap.value,result:(0,i.bc)(t,a)}})),s.fS((e=>(this.api.reportError(`Error during query execution. Got ${e}`,this.userId.get()),Se.of({updatedStateMap:this.stateMap.value,result:(0,i.bc)({},n())})))),(e=>e()),(e=>(this.stateMap.promise=e.then((e=>e.updatedStateMap)),e.then((e=>e.result)))))}processTransitions(e){return this.postMessage(xe,[e])}bootstrap(e){return(0,i.zG)(_e.gz(Se.oE)(this.postMessage(qe,[{segments:{"1p":this.userSegments.getAllAsMap()},sessionId:this.sessionManager.getSessionId(),viewId:this.viewId.get(),lookalikeModels:this.lalRef.current,thirdPartydata:this.tpdRef.current},e]),(()=>Promise.resolve(this.registerListenersOnlyOnce()))),Se.UI((e=>{let[t]=e;return t})))}process(e,t){return(0,Oe.AG)(e)?()=>this.debouncedProcessTransitions([e]):this.processStandard([e],t)}processStandard(e,t){return(0,i.zG)(this.postMessage(Ce,[e]),Se.UI((0,De.bw)((()=>{t&&this.setAsRealTimeifNeeded(e)}))))}updateExternalState(e){return(0,i.zG)((()=>{const t=(0,De.b0)(e,((e,t)=>{const n=this.queryMetadata[e];return n&&t[n]?(0,T.Uo)(K(t[n])):T.YP})),n=(0,De.b0)(this.extStateMap,((e,t)=>(0,T.Uo)(K(t)))),r=(e,t,n)=>(0,i.zG)((0,T.Y3)((()=>(this.logDebug("Joining external state",{newExtState:e,currentExtState:t}),ye("join",e,t)))),(0,T.fS)((()=>(this.api.reportError(`Failed to join external state for query: ${n}. Had ${W(t)}, received ${W(e)}}`,this.userId.get()),e)))),a=(0,De.b0)(Object.assign(Object.assign({},n),t),((e,t)=>n[e]?(0,T.G)($(r(t,n[e],e))):(0,T.G)($(t))));return this.permutiveData.setData(Le,a),this.extStateMap=a,Promise.resolve()}),Se.tS((()=>this.postMessage(Ae,[]))))}reset(){this.userSegments.reset(),this.permutiveData.setData(Re,{}),this.permutiveData.setData(Le,{}),this.stateMap={value:{},promise:Promise.resolve({})},this.extStateMap={}}setAsReady(){this.isWorkerReady=!0,this.onStateChangeReady(this.stateMap.value),this.messages.emit("permutive:queries:initialised")}getStateSizeInBytes(){return 2*JSON.stringify(this.stateMap.value).length}setAsRealTimeifNeeded(e){return!this.realtime.isRealtime()&&e.filter((e=>"Pageview"===e.name)).length>0?this.realtime.setAsRealtime(this.userSegments.getAllAsList().length):void 0}logDebug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger.debug(this.prefix,...t)}};var We=n(3992);function $e(){return(0,r.h)(new o.Z)}class Ke{constructor(e){this.queryMetadata={84255:"0c8b70cdb7",85689:"d78532ae74",85691:"3877b49cee",85694:"2aaab28a4e",85695:"78f79907f7",85696:"fab918c1f2",86184:"e9658f2605",87566:"4be9417e48",87697:"89b1bfe9b9",87698:"19f0a545b3",87699:"bf0cb96ef9",87700:"65dee15227",87703:"902ad5a1a0",87704:"009edc1012",87705:"947bf06ca5",87706:"238a3704f8",87709:"44e0186503",87710:"026b3f6b85",87711:"e03fa25aeb",87712:"71bb6e6b8e",87715:"c85d169c97",87716:"ad9aa45304",87718:"951abee00a",87721:"eab4eae96d",87724:"f004ddf9b9",87725:"83a4be84a5",87727:"57a4981a5c",87728:"cf1a5c260c",87730:"706e64988d",87733:"06abab1f6a",87734:"9059170fee",87751:"0b6b24c048",88614:"c7efb647d7",88621:"b3784d21fa",89520:"6caa8382c4",89521:"6d00083512",89641:"79be72568e",90306:"44de0fb967",90307:"e7c90b6acd",90308:"42e571894f",90309:"b7679f2c7f",90310:"26818d6205",90311:"1d30eae1a2",90312:"e1f3677a96",90313:"f25e48d2b3",90314:"995256f8bd",90315:"2c5d449f2b",90316:"6acc038fbf",90317:"4d2e7631d8",90318:"9295069ac7",90319:"a61b3f3acd",90320:"4ab5277faa",90321:"7333c48c53",90322:"34e31e6ab8",90323:"db12161c54",90324:"30d7c5789a",90325:"792d92bb93",90326:"8d91db9fb5",90327:"6089ca04f3",90328:"577e5df406",90329:"5eef12d16d",90330:"1594c0b750",90331:"12e57d5332",90332:"a1c63ff8c9",90333:"7178da916c",90334:"ed505b6595",90335:"d3d8c8a6e0",90336:"4571491704",90337:"1944dbce27",90338:"8d8569855a",90339:"ed75d547d4",90340:"79ac7d100d",90341:"05a4eed4e6",90342:"0345a56c84",90343:"e9ab6be15f",90344:"6579d7f68b",90345:"54f8fa929c",90346:"1fa97963a0",90347:"bcb139f38c",90348:"8079d4227b",90349:"ce10c60c01",90350:"11b85a19f1",90351:"2226b3c14f",90352:"b878136b2b",90353:"05938a7950",90354:"65e3e1578f",90355:"42c52f853d",90356:"d43d6f84d9",90357:"f53bcf9f03",90358:"c1997bbfb0",90359:"584d8862bc",90360:"629285ff09",90803:"cace970c00",90943:"d467a5d62f",90944:"52cabf9b46",90945:"ab5d9bf6ae",90946:"eca8c7e1d0",90947:"5ea23aa092",90948:"e18d01bffa",90949:"11d7897b30",90950:"8e168185eb",90951:"06ee9f82a4",90952:"814afd9130",90953:"062a522ffd",90954:"4f5eee0d1d",90955:"78ab81354e",90956:"2deb6d9699",90957:"d7bc9f68d4",90958:"a3fa2c5cd1",90959:"249411042e",90960:"c9c5696d08",90961:"3733dbd1f5",90962:"0b7b881464",90964:"b99e7d082b",90965:"24296da5ef",90966:"093f480477",90967:"54f8bbec5c",90969:"cd5f560f1e",90970:"479121f1ad",90971:"084efc2eb4",90972:"24f8884ba5",90973:"1978b02485",90974:"7632ec6067",90975:"e35390f9fe",90976:"bf67c03205",90977:"94e97c1043",90978:"f076d25077",90979:"24ee4b98a5",90980:"542123d2d3",90981:"4a468a819a",90982:"c9cd6dec42",90983:"a8060451a7",90984:"04deadbb12",90985:"b748e6d177",90986:"26f2423d8b",90987:"bb5e730a83",92177:"6ad9b3532a",92178:"e6ed949d4c",92179:"4893b0946e",92180:"bca8d48927",92182:"7f6901dcee",92183:"6bd76f806b",92196:"8576970bab",92204:"ee759a9074",92205:"24fa0d4f00",92206:"ecf10498db",92207:"0bb0c4044c",92208:"42b3c9ee01",92209:"3d0257829e",92210:"0e8fccc532",92211:"64e75aae19",92212:"e500542b39",92213:"91f112267d",92214:"6f5997e996",92883:"888d18ed21",92894:"470384c1db",92895:"d60ee5c4eb",92898:"43a2b77329",93050:"e9a4e3d18f",93051:"4269a944b9",93052:"1d726add59",93053:"fd037bd12c",93054:"ee849636f4",93055:"4b5435b318",93058:"1ecd8f363d",93383:"7b21c07c58",93384:"46b8c5330a",93521:"13dc706094",93650:"e14431745c",93651:"c0d6a29c83",93653:"2a2a7a944e",93654:"edddafafd5",93655:"dd873afd7d",93656:"f426b625e6",93658:"3be171cf09",93659:"9692ec18d7",93672:"526cf11c54",93673:"9d912ed734",93674:"2d1ede21e5",93676:"7ac6eeb674",93677:"e15dcc609a",93678:"6c74dc0a8c",93679:"8284c0e00c",93680:"793e26459e",93681:"fe1da2aaf7",93682:"21c10d822b",93683:"7d288014f7",93684:"91d3338811",93685:"8416e330bf",93686:"f62464f6a7",93687:"0b7bb8dfde",93688:"5bb9eee0b4",93689:"df36274fce",93691:"fe896fd1d5",93692:"6773235e90",93693:"5bf17ebbf7",93694:"18288b798b",93696:"a27853666b",93697:"1545100b94",93698:"9c0b2acb15",94503:"5ae8458b0d",94814:"30c1dfe318",94815:"8408c24525",94816:"cda2477166",94902:"9ad491859a",95370:"b0ec8a2e70",95371:"6503047e7b",95373:"1bb50e49ad",95375:"ba43630839",95491:"65e60b48f5",95587:"12644da0f7",95592:"a0293a0d5d",95596:"695d5192a7",95597:"43114112b1",95599:"f5d52562a4",95602:"a96e960def",95604:"bb5197f539",95605:"c34ef8ddf7",95606:"74da01fac1",95607:"7c40ed7d55",95610:"48e7ab4c2a",95611:"66f1bfa3cd",95612:"f1181d3103",95613:"c49bd06bd7",95615:"cf4a3a23ea",95617:"4429ecf1b8",95618:"5a88d4df29",95619:"23346c9d99",95620:"a663ed57b3",96740:"3ca24bd85e",96742:"f19c1b681b",96743:"9502060e2a",96744:"c5c2a18218",96745:"94619aa2fb",96747:"f7b0248008",96748:"d0699281dc",96749:"fa5bb6fa67",96750:"c2e297b9a0",96752:"9957f56cb0",96753:"7b71a9bd90",96754:"5981d78089",96755:"6e1e242a06",96756:"e402a1201f",96757:"22bc698b78",96758:"266e8bc8c6",96759:"b2b2744acb",96761:"4670091c1c",96762:"011682632c",96763:"ca925c6200",96764:"cde87bbd95",96765:"fac253bb97",96766:"199850c6ae",96767:"7d2321b34b",96768:"e266f6cb91",96769:"b9d66ff9b4",96770:"063b3c62da",96772:"f9fcda8973",96773:"877f5dca48",96775:"c66d910f21",96776:"941c1b9b1c",96777:"65df04ffd6",96778:"0c05a75663",96780:"11412edc77",96781:"f9aec7da76",96782:"c0a3fd6b6a",96783:"7dab158dae",96784:"fa8f283702",98292:"60997cff5f",98293:"de9e4b331c",98948:"dbee871900",98949:"c7bafab5d2",99464:"cd84f7f7f6",99465:"713bf4fb2a",99466:"d729c9c16f",99467:"474284234f",99468:"3f35d24b75",99469:"02ef6e8511",99676:"76fbf5bf77",99677:"6cd1a46538",99678:"84ee9644ce",99681:"b699939e4d",99685:"f76c8ef1c1",99688:"b9900452ee",100190:"057d113a80",103007:"0320c2bfaf",103821:"40881c2957",104166:"f433efdc19",104167:"221dec8407",104168:"97976b15de",104169:"7ce203656c",104241:"6ce081435f",104242:"a2292d08fb",104243:"5281873d04",104623:"d1d1767b3c",104624:"a79a40c1ae",104907:"f9ad6ded3b",104920:"44f57da507",104921:"9a43900ab8",104922:"ff9528cbca",104923:"29cc6787d6",104924:"a06218af81",104925:"a73e6a1c1f",104934:"4e90d2c1ef",105097:"f61ba72e5c",105201:"5c96853c9e",105459:"617b9db95a",105463:"fe9f38ded2",105468:"e4b453bfc2",105469:"e8d0aeed85",105470:"916bc8d690",105471:"feda2b7644",105491:"f29bde11da",105784:"f767b2ad54",105787:"2e3e4213d9",105791:"7c1411c872",105844:"058e336520",105850:"ffa16f103d",105855:"838355b830",105856:"931460f384",105857:"4a2aa8e8a5",105858:"8439033587",105859:"90f0e53e4b",105860:"d19a00779f",105861:"6d1ebf0460",105862:"5b14187d5a",106373:"b71d5fa844",106594:"c5c10bf16c",106595:"8038f40723",106605:"3526a18e76",106606:"c73c31746e",107200:"9989d92edd",107201:"d48098b07a",107202:"ef67f1efd8",107203:"151a01883b",107204:"96a5dd7d3d",107205:"bc911065a7",107206:"0cd2220f4d",107207:"f17b887bfc",107208:"15f49f511a",107209:"77fb348a1f",107234:"c706f3fa2b",107235:"e8336476e4",107236:"845cf50caf",107237:"6369b263e6",107238:"5460edf14b",107418:"9587a31a56",107419:"a2aa313656",107485:"5c4c8f15c8",107486:"a12859d3f8",107487:"d2613329b6",107597:"726a1b217b",107697:"4c6c09c90e",107698:"2822d5801f",107699:"0ee81f2a2b",107700:"f6093ff635",107701:"280d9f38fc",107702:"48af7f2f25",107703:"eaa18e0760",107704:"4f543c2e39",107705:"2bdf613705",107706:"bb03b59bf1",107709:"b5264278f1",107710:"7fc925b11f",107711:"a163a1b4a4",107712:"3119cee029",107941:"175ff77202",108460:"ed301d47be",108462:"8399ec8dbe",110017:"49f9b11620",110018:"90d9013920",110806:"933df6ecdb",112065:"ea47aba3c2",112066:"3291237c67",112067:"fae4a37e53",112069:"e80a683677",112070:"68681e2ecf",113388:"7f504d0a25",113390:"88c8468b41",113609:"4af16dbee1",115817:"3a40eccbbb",116437:"03de25f841",116923:"09ee002837",117413:"c872cee184",118207:"69fe44d987",118517:"935a44544a",118812:"5584016f18",119319:"6ab50356b1",119320:"9124d871c4",119321:"406e38e9e6",120730:"08d6ea0546",121177:"52ecb93f6b",121577:"ad9082a06b",122077:"c35e7844c2",122078:"a3f6427402",122133:"159bdcfec5",122528:"ea6643b600",124051:"cd4f761821",124052:"3d3d767c43",124059:"e106032fa9",124717:"2dcc0f5c35",124718:"bf62fccc26",127273:"9012d5773e",127274:"e13c6eb12b",127661:"1e23ba6802",127663:"1838e8a56c",128113:"fbaf6a8ff8",128773:"b9f67a5b9e",129527:"c9ae20cbdd",129528:"d94ab99a6d",131335:"8091a0531b",131361:"cb92c5c962",131845:"99481a9a2f",132444:"46f819b0db",134115:"791747f186",134117:"89a4d0d00c",135599:"27fa59aa96",135708:"887ccdd616",135715:"86be9c425b",135716:"a9db374c28",135717:"129ca5bc13",136339:"d01e7dceff",137071:"5d9e919b63",137072:"e28db5dae0",137073:"6f966fbd7c",137074:"c6933c48f5",137075:"6074c5d9bf",137076:"da50efdd7d",137077:"a824c409ec",137078:"7e44cf836e",137079:"378971f614",137080:"96fa271eb7",137083:"3da42bf6af",137084:"3ade0dc6f1",137085:"f813fc55bd",137094:"60baf9d482",137608:"222c192326",137859:"00368246ee",137860:"d02270ee88",139079:"60baf9d482",141647:"ed5eeb4039",141648:"702c143306",141997:"1484763079",142390:"432c47f1b7",143929:"37cf56921d",145736:"2bf0932fea",145852:"adebf84974",146373:"9098fb787d",146374:"26988910f1",146375:"d25c654bb1",147319:"196a2ea6b3",147320:"54f49c7690",147818:"7414054111",148079:"9db47b2c70",148146:"daeadbaead",148315:"143fab4d9f",148316:"b9ea66e2a5",149079:"e9760d20f4",149081:"1b94ddafec",154471:"49d38de26e",154472:"e1d315373f",155947:"56d40ffeb3",156319:"b9cb6a0cba",163475:"5c98fd1800",163476:"90ff8f956c",164547:"79d24b8e3a",1e7:"ab2a79b4e1",10000001:"ea7eca3b49",10000002:"7a0b76bb2f",10000003:"49e502122c",10000004:"f1c67fac3c",10000005:"377db020e8",10000006:"547879da4e",10000007:"ca176545c8",10000008:"1a9d700b97",10000010:"a4cefa7f58",10000011:"aa7075e35b",10000012:"1ae8bddb93",10000013:"1e8886ad72",10000014:"f516ad362e",10000015:"787c19bee4",10000016:"d6475b75d5",10000017:"38ea08fad7",10000018:"5fab00fa2c",10000019:"e109f9b360",10000020:"90a178ea71",10000021:"bd128fcfed",10000022:"cd3face523",10000023:"c2f26784d1",10000024:"eb85193dfd",10000025:"9674e8f207",10000026:"6d37ba6b9a",10000035:"b0aca14cab",10000036:"d36ef645a5",10000037:"adf0bd9d7d",10000038:"0a8427037a",10000039:"9b0eb48861",10000040:"de880ed625",10000041:"82f6856d68",10000042:"98ff38947b",10000043:"3cde49fc7f",10000044:"204ea1bd83",10000045:"87b257dec6",10000046:"5579a14726",10000047:"aca78f9e2e",10000048:"fa2ea1e2fa",10000049:"673bfae6e5",10000050:"6f4e13e789",10000051:"d7f4837226",10000052:"53669c17cf",10000053:"cd9d4baf1b",10000054:"36a6a1b8ac",10000055:"61fbd3f45d",10000056:"36169adc34",10000057:"4dcf4dc5ea",10000058:"91ed3d5df9",10000059:"9975f2d18a",10000060:"291bb4c201",10000061:"835df65992",10000062:"8af22f787c",10000063:"13625d9512",10000064:"865b534730",10000065:"711a803835",10000066:"3f5a01518e",10000067:"a90790be86",10000068:"840b4c697a",10000069:"5b811cacf3",10000070:"26f90895bf",10000071:"ecfb5c1cab",10000072:"49ab120d1d",10000073:"8816deadae",10000074:"5c7a1ac24a",10000075:"0dc58fe713",10000076:"c791f64ecd",10000077:"fb2601505c",10000078:"ec0d63e687",10000079:"9f1a1f7510",10000080:"e51622030c",10000081:"c7a8cae6d0",10000082:"8ce761d02d",10000083:"7b6a42ef76",10000084:"479977505c",10000085:"930fdc5c22",10000086:"39e47fa144",10000087:"08cf53e104",10000088:"a2e20ffb1f",10000089:"68f37c2880",10000090:"be04a0b54e",10000324:"1ccab119ee",10000325:"1f783b581b",10000327:"21c25a4900",10000328:"482cefaa5d",10000329:"8ea8e0687e",10000330:"7f88a52c7e",10000687:"8cfe8cac9d",10000688:"6e4f7fa14e",10000689:"52ef8e630f",10000690:"e072687254",10000691:"3fe53e0c18",10000692:"9d30d89615",10000693:"d7956f1d3d",10000694:"05129d3c08",10000695:"74ef454681",10000696:"7ae9936d9c",10000697:"26fc0f70c4",10000698:"ae27296fe1",10000699:"d5f5b0f0cd",10000700:"eb8125a768",10000701:"3bea66735c",10000702:"16ae6df770",10000703:"761e431f4d",10000704:"063893f005",10000705:"55d48462e7",10000706:"5c3875edd3",10000707:"8968e719ff",10000708:"c517d35d9c",10000709:"5a2afc0cd9",10000710:"3e7a4e35f2",10000711:"44912da274",10000712:"e4ce60c3dd",10000713:"f18696c094",10000714:"017f28f8bb",10000715:"55116c14c3",10000716:"0f4395c2c4",10000717:"f3450f1ac2",10000718:"d1bc7ccfce",10000719:"88d3e1a480",10000720:"8eda205ac0",10000721:"f384ae2fa0",10000722:"4a3d1ff840",10000723:"68fd2589c4",10000724:"bae84a23bd",10000725:"d0f5458a4e",10000726:"6676d3d9a9",10000727:"aae1e1dcd7",10000728:"91ed3d5df9",10000729:"8f0eb3e289",10000730:"f1cea45a0b",10000731:"9351a7c7b0",10000732:"8ff05a8c34",10000733:"03f2821968",10000734:"7e89a633cb",10000735:"5f368efb3a",10000736:"5f368efb3a",10000737:"5bb87220bd",10000738:"6254881159",10000739:"1e02537eb0",10000740:"39270e0a06",10000741:"012978eb27",10000742:"d04b907379",10000743:"7070b1a14e",10000744:"6fc892f976",10000745:"8669619b19",10000746:"8b94534036",10000747:"7a40512ab1",10000748:"38d2e91fcf",10000749:"257cd6d50c",10000750:"3aa7ebea4f",10000751:"7e89a633cb",10000752:"a5abec86a6",10000753:"abafd1fcfc",10000754:"26fe7dbd61",10000755:"66d80d09bc",10000756:"08faf112c3",10000757:"05fedf88fd",10000758:"7680d4aba9",10000759:"f634153f8a",10000760:"46657a12ff",10000761:"64531a69c2",10000762:"904c2afaa9",10000763:"a3a3991956",10000764:"603cbf8d13",10000765:"78b12b1080",10000766:"211483a594",10000767:"07a0d69300",10000768:"183297f1ac",10000769:"e1c66b1569",10000770:"66b9851322",10000771:"fea86fbb59",10000772:"79a6fb7d55",10000773:"17f646de43",10000774:"468b27f1e6",10000775:"dab0ea43a2",10000776:"c3dc556a6d",10000777:"5b4df291a5",10000778:"17f4fcfd36",10000779:"47f71b40c3",10000780:"5c22398d33",10000781:"be5e562f33",10000782:"8b1de71fa0",10000783:"fdad521149",10000784:"d9dd4fd30f",10000785:"78e513e696",10000786:"5d44629314",10000787:"a5ab24f97d",10000788:"fb921aed0e",10000789:"d7f4f9500b",10000790:"8e63833564",10000791:"e3f4d88317",10000792:"533d5822ba",10000793:"4b226ceeb1",10000794:"a479c5c4c7",10000795:"df7301c3d9",10000796:"54fc95930e",10000797:"0c10dbde30",10000798:"b91b525b50",10000799:"6a4d2d099e",10000800:"0adbbddcf3",10000801:"38c747aefd",10000802:"f33b4f3f34",10000803:"a2d275785b"},this.externalQueries=new Set([]),this.customProperties=e.customProperties,this.externalData=e.externalData,this.logger=e.logger,this.messages=e.messages,this.api=e.api,this.permutive=e.permutive,this.permutiveData=e.permutiveData,this.queryWorker=e.queryWorker,this.realtime=e.realtime,this.sessionManager=e.sessionManager,this.transitionDebounceMaxTime=e.transitionDebounceMaxTime,this.transitionDebounceTime=e.transitionDebounceTime,this.userId=e.userId,this.viewId=e.viewId,this.metrics=e.metrics}processMessage(e){return s.Y3((()=>(0,We.t_)(this.queryWorker.postMessage(Object.assign({engine:"QLE"},e)))),a.w)}}class Ne extends((()=>(0,i.zG)(Ke,Be))()){constructor(e){super(e),this.makeStateMaps()}}},8318:(e,t,n)=>{n.d(t,{F:()=>s});var r=n(6934),a=n(1628),i=n(3992);const s=(0,r.Y3)((()=>{const e=(0,a.e)();return(0,i.t_)(e.postMessage({engine:"QLE",type:"noop",userId:""})),Promise.resolve(e)}),(e=>`Failed to start QueryWorker. Got ${e}`))},3622:(e,t,n)=>{n.d(t,{$:()=>a});var r=n(2652);class a{constructor(e){this.permutiveData=e,this.eventSourceId=e.getData("event-source-id")||this.generateAndStoreEventSourceId()}get(){return this.eventSourceId}generateAndSet(){this.eventSourceId=this.generateAndStoreEventSourceId()}generateAndStoreEventSourceId(){const e=(0,r.k$)();return this.permutiveData.setData("event-source-id",e),e}}},1229:(e,t,n)=>{n.d(t,{N:()=>p,e:()=>f});var r=n(655),a=n(2688),i=n(7183),s=n(365),o=n(3735),c=n(4386),u=n(4730),d=n(8036),l=n(3992);function f(){return(0,i.h)(new c.Z)}const g={concat:(e,t)=>Object.assign(Object.assign({},e),t),empty:{}};class p{constructor(e,t,n,r,a,i,s,o,c){this.api=e,this.network=t,this.sessionManager=n,this.permutiveData=r,this.queryManager=a,this.metrics=i,this.userId=s,this.eventSourceId=o,this.stateWorker=c,this.DEBOUNCE_TIME=1e3,this.MAX_DEBOUNCE_TIME=5e3,this.fetchUnseenState=!0,this.scheduler=new u.b(this.DEBOUNCE_TIME,this.MAX_DEBOUNCE_TIME),this.debouncedSyncIfNotEmpty=this.scheduler.scheduleAccumulated((e=>this.syncIfNotEmpty.bind(this)("standard",e)),g),this.fetchUnseenState=!!h.includes("68547f8f-2fd8-4ff3-9b63-51e86e2edee8")||this.sessionManager.sessionHasChanged(),this.stateOffset=this.permutiveData.getData("state_offset")||0,this.lastSentStateMapWithChecksum=(0,d.Yh)(this.permutiveData.getData("internal_query_states")||{}),(0,l.t_)(this.stateWorker.postMessage({engine:"SSE",type:"noop"}))}sync(e){return(0,o.zG)(this.debouncedSyncIfNotEmpty(e),(e=>Promise.resolve()))}syncWithUnseen(){return this.syncIfNotEmpty("unseen",{}).then(o.Q1)}syncIfNotEmpty(e,t){const[n,r,i]="standard"===e?[this.stateOffset,t,this.fetchUnseenState]:"unseen"===e?[this.stateOffset,this.queryManager.stateMap.value,!0]:[0,{},!0],s=this.metrics.startTimer("sdk_compute_delta_seconds",{}),c={type:"delta",stateMap:r,lastSentStateMapWithChecksum:this.lastSentStateMapWithChecksum},u=(0,o.zG)(this.stateWorker.postMessage(Object.assign({engine:"SSE"},c)),l.t_,(e=>e.then((e=>(this.metrics.stopTimer("sdk_compute_delta_seconds",s),e))))),d=e=>{this.fetchUnseenState=!1;const t=(0,o.ls)((e=>this.api.reportError(`Error sending state delta. Got ${(0,a.w)(e)}`,this.userId.get())),(e=>({})));return this.api.state(this.metrics,this.userId.get(),this.eventSourceId.get(),e,n,i).then((e=>function(e){return!!e}(e)?this.onStateResponse(e):{})).then((t=>(this.lastSentStateMapWithChecksum=e,t))).catch(t)};return u.then((e=>i||Object.keys(e).length>0?d(e):Promise.resolve({})))}resetSync(){return(0,r.mG)(this,void 0,void 0,(function*(){this.reset(),yield this.syncIfNotEmpty("reset",{})}))}reset(){this.lastSentStateMapWithChecksum={}}onStateResponse(e){const t=(0,s.Y3)((()=>JSON.parse(e.state)),(e=>this.api.reportError(`Failed to parse State API response, got ${e}`,this.userId.get()))),n=e=>e?this.queryManager.updateExternalState(e)():(0,o.Q1)();return(0,s.tO)(t)?(0,o.zG)(e.state_offset,(e=>this.stateOffset=e),(e=>this.permutiveData.setData("state_offset",e)),(e=>n(t.right)),(e=>t.right)):{}}}const h=["fe68d1f7-c9f4-45b3-8905-7cda73d3fd74"]},926:(e,t,n)=>{n.d(t,{Kd:()=>a,eJ:()=>i});var r=n(2116);n(2851),n(2652);const a="addon:twitter_pixel",i=function(e){return r.K4((()=>{}))}},1828:(e,t,n)=>{n.d(t,{ap:()=>i,gz:()=>u});var r=n(3735),a=n(9384);function i(e,t){return function(n){return function(r){return e.ap(e.map(r,(function(e){return function(n){return t.ap(e,n)}})),n)}}}function s(e,t,n){return function(r){for(var a=Array(n.length+1),i=0;i<n.length;i++)a[i]=n[i];return a[n.length]=r,0===t?e.apply(null,a):s(e,t-1,a)}}var o={1:function(e){return[e]},2:function(e){return function(t){return[e,t]}},3:function(e){return function(t){return function(n){return[e,t,n]}}},4:function(e){return function(t){return function(n){return function(r){return[e,t,n,r]}}}},5:function(e){return function(t){return function(n){return function(r){return function(a){return[e,t,n,r,a]}}}}}};function c(e){return a.e$.call(o,e)||(o[e]=s(r.bc,e-1,[])),o[e]}function u(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=t.length,a=c(r),i=e.map(t[0],a),s=1;s<r;s++)i=e.ap(i,t[s]);return i}}},1500:(e,t,n)=>{n.d(t,{Ce:()=>d,DY:()=>E,DZ:()=>U,Ew:()=>v,GY:()=>k,KB:()=>f,Qp:()=>b,UI:()=>q,f2:()=>y,fw:()=>W,hX:()=>j,jV:()=>M,jj:()=>I,ke:()=>p,md:()=>m,oA:()=>G,pR:()=>N,t9:()=>S,tS:()=>C,u4:()=>L,uK:()=>z,vP:()=>$,xH:()=>x,yL:()=>P,zT:()=>_});var r=n(3735),a=(n(7341),n(9384)),i=n(1885),s=n(3328),o=n(4870),c=(n(5605),function(e){return 0===e.length}),u=i.Od,d=i.Ce,l=(i.ws,i.R3),f=(i.Im,function(e,t){return e<=0?[]:i.KB(t)(e)});var g=i.dC,p=(s.P5,s.YM,s.Z$,function(e){return function(t){return g(e,t)?w(t):t.slice(0,e)}});var h=function(e,t){for(var n=e.length,r=0;r<n&&t(e[r]);r++);return r};function _(e){return function(t){var n=D(h(t,e))(t);return{init:n[0],rest:n[1]}}}var m=function(e){return function(t){return e<=0||c(t)?w(t):e>=t.length?[]:t.slice(e,t.length)}};function b(e){return function(t){return t.slice(h(t,e))}}s.cx;function v(e){return s.Ew(e)}var y=s.f2;s.JO,s.qr;var w=function(e){return e.slice()},k=function(e){return c(e)?[]:e.slice().reverse()},E=function(e){return function(t){return t.length<=1?w(t):t.slice().sort(e.compare)}},P=function(e,t,n){for(var r=[],a=Math.min(e.length,t.length),i=0;i<a;i++)r[i]=n(e[i],t[i]);return r};var S=s.t9,I=function(e){var t=i.jj(e);return function(e){return u(e)?t(e):w(e)}},D=function(e){return function(t){return e>=1&&u(t)?i.lx(e)(t):c(t)?[w(t),[]]:[[],w(t)]}};function M(e){var t=S(e);return function(n,r){if(void 0===r){var a=M(e);return function(e){return a(e,n)}}return n.filter((function(e){return t(e,r)}))}}var O=function(e,t,n){return(0,r.zG)(e,L(t,n))},T=(s.kp,s.Eq,i.of),q=function(e){return function(t){return t.map((function(t){return e(t)}))}},C=function(e){return function(t){return(0,r.zG)(t,function(e){return function(t){for(var n=[],r=0;r<t.length;r++)n.push.apply(n,e(r,t[r]));return n}}((function(t,n){return e(n)})))}},x=C(r.yR),A=function(e){return function(t){for(var n=[],r=0;r<t.length;r++){var i=e(r,t[r]);a.pC(i)&&n.push(i.value)}return n}},U=function(e){return A((function(t,n){return e(n)}))},G=U(r.yR),j=function(e){return function(t){return t.filter(e)}},z=function(e){return R((function(t,n){return e(n)}))},R=function(e){return function(t){for(var n=[],r=[],a=0;a<t.length;a++){var i=t[a];e(a,i)?r.push(i):n.push(i)}return(0,o.s4)(n,r)}},L=(s.Lx,s.xP,s.u4),B=s.OE,W=(s.nq,s.iw,function(e){var t=K(e);return function(e){return t((function(t,n){return e(n)}))}}),$=function(e){return function(t){return O(t,e.of([]),(function(t,n){return e.ap(e.map(t,(function(e){return function(t){return(0,r.zG)(e,l(t))}})),n)}))}},K=function(e){return function(t){return B(e.of([]),(function(n,a,i){return e.ap(e.map(a,(function(e){return function(t){return(0,r.zG)(e,l(t))}})),t(n,i))}))}},N=(s.ZN,s.Eh,s.pR);s.pJ,s.oR,i.oo,s.yW,s.j0,a.F4,i.w6,i.QI,i.Ss},6862:(e,t,n)=>{function r(e){return function(t){return function(n){return e.chain(n,(function(n){return e.map(t(n),(function(){return n}))}))}}}function a(e){return function(t,n){return function(r){return e.chain(r,(function(r){return e.map(n(r),(function(e){var n;return Object.assign({},r,((n={})[t]=e,n))}))}))}}}n.d(t,{a:()=>a,m:()=>r})},365:(e,t,n)=>{n.d(t,{g1:()=>b,G5:()=>m,dO:()=>p,Pd:()=>k,ak:()=>R,tS:()=>y,g_:()=>q,ij:()=>G,Yo:()=>I,DT:()=>S,fS:()=>x,pF:()=>C,nM:()=>D,tO:()=>M,t$:()=>o,UI:()=>g,Vn:()=>E,EQ:()=>T,vx:()=>U,F2:()=>c,LF:()=>A,i$:()=>z,Y3:()=>j});var r=n(6862),a=n(2690),i=n(3735),s=(n(7341),n(9384)),o=s.t$,c=s.F2,u=function(e,t){return(0,i.zG)(e,g(t))},d=function(e,t){return(0,i.zG)(e,_(t))},l=function(e,t){return(0,i.zG)(e,y(t))},f="Either",g=function(e){return function(t){return D(t)?t:c(e(t.right))}},p={URI:f,map:u},h=c,_=function(e){return function(t){return D(t)?t:D(e)?e:c(t.right(e.right))}},m={URI:f,map:u,ap:d},b={URI:f,map:u,ap:d,of:h},v=function(e){return function(t){return D(t)?t:e(t.right)}},y=v,w={URI:f,map:u,ap:d,chain:l},k=function(e,t){return function(n){return D(n)?o(e(n.left)):c(t(n.right))}},E=function(e){return function(t){return D(t)?o(e(t.left)):t}},P={URI:f,fromEither:i.yR},S=(0,a.DT)(P),I=(0,a.Yo)(P),D=s.nM,M=s.tO,O=function(e,t){return function(n){return D(n)?e(n.left):t(n.right)}},T=O,q=T,C=function(e){return function(t){return D(t)?e(t.left):t.right}},x=C,A=function(e){return D(e)?c(e.left):o(e.right)},U=function(e){return function(t){return D(t)?e(t.left):t}},G=function(e){return function(t){return null==t?o(e):c(t)}},j=function(e,t){try{return c(e())}catch(e){return o(t(e))}},z=O(i.yR,i.yR);s.F4;var R=(0,r.a)(w);s.Xl},4268:(e,t,n)=>{n.d(t,{Uz:()=>i,f7:()=>r,n_:()=>a,w4:()=>s});n(3735);var r=function(e){return{equals:function(t,n){return t===n||e(t,n)}}},a=function(e){return r((function(t,n){for(var r in e)if(!e[r].equals(t[r],n[r]))return!1;return!0}))},i=function(e){return function(t){return r((function(n,r){return t.equals(e(n),e(r))}))}},s={equals:function(e,t){return e===t}};s.equals},2690:(e,t,n)=>{n.d(t,{DT:()=>s,Yo:()=>i,fX:()=>c});var r=n(3735),a=n(9384);function i(e){return function(t){return function(n){return e.fromEither(a.Wi(n)?a.t$(t()):a.F2(n.value))}}}function s(e){return function(t,n){return function(r){return e.fromEither(t(r)?a.F2(r):a.t$(n(r)))}}}function o(e){return function(t){return(0,r.ls)(t,e.fromEither)}}function c(e,t){var n=o(e);return function(e){return function(r){return t.chain(r,n(e))}}}},1130:(e,t,n)=>{n.d(t,{At:()=>s,oU:()=>i});var r=n(6862),a=n(3735);function i(e,t){return function(n){var r=(0,a.ls)(n,e.fromIO);return function(e){return t.chain(e,r)}}}function s(e,t){var n=(0,r.m)(t);return function(t){return n((0,a.ls)(t,e.fromIO))}}},9679:(e,t,n)=>{n.d(t,{oU:()=>a});var r=n(3735);function a(e,t){return function(n){var a=(0,r.ls)(n,e.fromTask);return function(e){return t.chain(e,a)}}}},7341:(e,t,n)=>{function r(e,t){return function(n){return function(r){return e.map(r,(function(e){return t.map(e,n)}))}}}function a(e){return function(t){return function(n){return e.map(n,(function(e){var n;return(n={})[t]=e,n}))}}}function i(e){return function(t,n){return function(r){return e.map(r,(function(e){var r;return Object.assign({},e,((r={})[t]=n(e),r))}))}}}n.d(t,{Hr:()=>i,UI:()=>r,YO:()=>a})},1885:(e,t,n)=>{n.d(t,{Ce:()=>d,Eh:()=>E,Im:()=>l,KB:()=>m,Od:()=>o,QI:()=>I,R3:()=>f,Ss:()=>D,dC:()=>c,jj:()=>p,lx:()=>k,nI:()=>_,of:()=>y,oo:()=>g,w6:()=>b,ws:()=>u,yL:()=>w});var r=n(3735),a=(n(7341),n(9384)),i=n(7241),s=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},o=function(e){return e.length>0},c=function(e,t){return e<0||e>=t.length},u=function(e){return function(t){return s([e],t,!0)}},d=u,l=function(e){return function(t){return s(s([],t,!0),[e],!1)}},f=l,g=function(e,t,n){if(o(n)){var r=h(n);return r.splice(e,0,t),r}return[t]},p=function(e){return function(t){if(1===t.length)return v(t);for(var n=[P(t)],r=function(t){n.every((function(n){return!e.equals(n,t)}))&&n.push(t)},a=0,i=S(t);a<i.length;a++){r(i[a])}return n}},h=a.r1,_=function(e){return o(e)?a.G(e):a.YP},m=function(e){return function(t){for(var n=Math.max(0,Math.floor(t)),r=[e(0)],a=1;a<n;a++)r.push(e(a));return r}},b=function(e,t){return e<=t?m((function(t){return e+t}))(t-e+1):[e]};var v=h,y=function(e){return[e]},w=function(e,t,n){for(var r=[n(e[0],t[0])],a=Math.min(e.length,t.length),i=1;i<a;i++)r[i]=n(e[i],t[i]);return r};i.xP,i.Lx;var k=function(e){return function(t){var n=Math.max(1,e);return n>=t.length?[v(t),[]]:[(0,r.zG)(t.slice(1,n),d(P(t))),t.slice(n)]}},E=(i.u4,i.OE,i.nq,i.iw,i.YM,i.ZN,i.Eh),P=(a.F4,i.YM),S=function(e){return e.slice(1)};i.Z$,i.VV,i.Fp,i.j0;function I(e,t){return void 0===t?d(e):(0,r.zG)(t,d(e))}var D=function(e,t){return(0,r.zG)(e,f(t))};i.ur},6567:(e,t,n)=>{n.d(t,{DT:()=>u,DZ:()=>x,EK:()=>l,EQ:()=>B,Eh:()=>v,G:()=>c,G5:()=>S,IS:()=>d,Ri:()=>q,UI:()=>w,Uo:()=>j,Wi:()=>R,Y3:()=>F,YP:()=>o,dO:()=>k,fS:()=>$,g_:()=>W,hX:()=>C,ij:()=>N,pC:()=>z,pR:()=>y,tS:()=>I,wp:()=>D,xH:()=>K,xu:()=>G});var r=n(3735),a=(n(7341),n(9384)),i=n(6017),s=n(4870),o=(n(5605),a.YP),c=a.G;function u(e){return function(t){return e(t)?c(t):o}}var d=function(e){return"Right"===e._tag?o:c(e.left)},l=function(e){return"Left"===e._tag?o:c(e.right)},f=function(e,t){return(0,r.zG)(e,w(t))},g=function(e,t){return(0,r.zG)(e,P(t))},p=function(e,t){return(0,r.zG)(e,C(t))},h=function(e,t){return(0,r.zG)(e,x(t))},_=function(e,t){return(0,r.zG)(e,A(t))},m=function(e,t){return(0,r.zG)(e,U(t))},b="Option",v=function(e){return{equals:function(t,n){return t===n||(R(t)?R(n):!R(n)&&e.equals(t.value,n.value))}}},y=function(e){return{equals:v(e).equals,compare:function(t,n){return t===n?0:z(t)?z(n)?e.compare(t.value,n.value):1:-1}}},w=function(e){return function(t){return R(t)?o:c(e(t.value))}},k={URI:b,map:f},E=c,P=function(e){return function(t){return R(t)||R(e)?o:c(t.value(e.value))}},S={URI:b,map:f,ap:g},I=function(e){return function(t){return R(t)?o:e(t.value)}},D=function(e){return function(t){return R(t)?e():t}},M=I(r.yR),O=(0,s.s4)(o,o),T=function(e){return R(e)?O:(0,s.s4)(d(e.value),l(e.value))},q={URI:b,compact:M,separate:T},C=function(e){return function(t){return R(t)?o:e(t.value)?t:o}},x=function(e){return function(t){return R(t)?o:e(t.value)}},A=function(e){return function(t){return(0,s.s4)(p(t,(0,i.ff)(e)),p(t,e))}},U=function(e){return(0,r.ls)(w(e),T)},G={URI:b,map:f,compact:M,separate:T,filter:p,filterMap:h,partition:_,partitionMap:m},j=l,z=a.pC,R=function(e){return"None"===e._tag},L=function(e,t){return function(n){return R(n)?e():t(n.value)}},B=L,W=B,$=function(e){return function(t){return R(t)?e():t.value}},K=M,N=function(e){return null==e?o:c(e)},F=function(e){try{return c(e())}catch(e){return o}};a.F4,a.Xl},7209:(e,t,n)=>{n.d(t,{Fp:()=>f,Uz:()=>o,VV:()=>l,Zt:()=>s,gf:()=>d,gt:()=>u,lt:()=>c,uZ:()=>g});var r=n(4268),a=n(3735),i=function(e){return function(t,n){return t===n||0===e(t,n)}},s=function(e){return{equals:i(e),compare:function(t,n){return t===n?0:e(t,n)}}},o=function(e){return function(t){return s((function(n,r){return t.compare(e(n),e(r))}))}},c=(a.W8,function(e){return function(t,n){return-1===e.compare(t,n)}}),u=function(e){return function(t,n){return 1===e.compare(t,n)}},d=function(e){return function(t,n){return-1!==e.compare(t,n)}},l=function(e){return function(t,n){return t===n||e.compare(t,n)<1?t:n}},f=function(e){return function(t,n){return t===n||e.compare(t,n)>-1?t:n}},g=function(e){var t=l(e),n=f(e);return function(e,r){return function(a){return n(t(a,r),e)}}};r.w4.equals},6017:(e,t,n)=>{n.d(t,{ff:()=>r,xD:()=>a});n(3735);var r=function(e){return function(t){return!e(t)}},a=function(e){return function(t){return function(n){return t(n)&&e(n)}}}},3328:(e,t,n)=>{n.d(t,{DZ:()=>U,Eh:()=>N,Eq:()=>D,Ew:()=>v,JO:()=>w,Lx:()=>L,OE:()=>B,Od:()=>f,P5:()=>h,Su:()=>C,UI:()=>q,YM:()=>_,Z$:()=>m,ZN:()=>K,bj:()=>P,cx:()=>b,f2:()=>y,hX:()=>x,hp:()=>E,iw:()=>$,j0:()=>J,kp:()=>I,nq:()=>W,oR:()=>V,pJ:()=>Y,pR:()=>F,qr:()=>k,t9:()=>S,u4:()=>R,uK:()=>G,xH:()=>T,xP:()=>z,xb:()=>l,yW:()=>H});var r=n(4268),a=n(3735),i=(n(7341),n(9384)),s=n(4011),o=n(7209),c=n(7241),u=n(4870),d=(n(5605),function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}),l=function(e){return 0===e.length},f=c.Od;c.Ce,c.ws,c.R3,c.Im;var g=function(e,t){return function(n){return f(n)?t(n):e()}},p=c.dC;function h(e,t){return void 0===t?function(t){return h(e,t)}:p(e,t)?i.YP:i.G(t[e])}var _=function(e){return f(e)?i.G(c.YM(e)):i.YP},m=function(e){return f(e)?i.G(c.Z$(e)):i.YP};var b=function(e){return function(t){for(var n=0;n<t.length;n++)if(e(t[n]))return i.G(n);return i.YP}};function v(e){return function(t){for(var n=0;n<t.length;n++)if(e(t[n]))return i.G(t[n]);return i.YP}}var y=function(e){return function(t){for(var n=0;n<t.length;n++){var r=e(t[n]);if(i.pC(r))return r}return i.YP}};var w=function(e){return function(t){for(var n=t.length-1;n>=0;n--){var r=e(t[n]);if(i.pC(r))return r}return i.YP}},k=function(e){return function(t){for(var n=t.length-1;n>=0;n--)if(e(t[n]))return i.G(n);return i.YP}},E=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];"Right"===r._tag&&t.push(r.right)}return t},P=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];"Left"===r._tag&&t.push(r.left)}return t};function S(e){return function(t,n){if(void 0===n){var r=S(e);return function(e){return r(t,e)}}for(var a,i=0;i<n.length;i++)if(a=n[i],e.equals(a,t))return!0;return!1}}var I=function(e,t){return(0,a.zG)(e,Y(t))},D=function(e,t){return(0,a.zG)(e,V(t))},M=c.of,O=function(e){return function(t){return(0,a.zG)(t,function(e){return function(t){if(l(t))return Q;for(var n=[],r=0;r<t.length;r++)n.push.apply(n,e(r,t[r]));return n}}((function(t,n){return e(n)})))}},T=O(a.yR),q=function(e){return function(t){return t.map((function(t){return e(t)}))}},C=function(e){return function(t){return t.map((function(t,n){return e(n,t)}))}},x=function(e){return function(t){return t.filter(e)}},A=function(e){return function(t){for(var n=[],r=0;r<t.length;r++){var a=e(r,t[r]);i.pC(a)&&n.push(a.value)}return n}},U=function(e){return A((function(t,n){return e(n)}))},G=(a.yR,function(e){return j((function(t,n){return e(n)}))}),j=function(e){return function(t){for(var n=[],r=[],a=0;a<t.length;a++){var i=t[a];e(a,i)?r.push(i):n.push(i)}return(0,u.s4)(n,r)}},z=function(e){return function(t){return function(n){return n.reduce((function(n,r,a){return e.concat(n,t(a,r))}),e.empty)}}},R=function(e,t){return B(e,(function(e,n,r){return t(n,r)}))},L=function(e){var t=z(e);return function(e){return t((function(t,n){return e(n)}))}},B=function(e,t){return function(n){for(var r=n.length,a=e,i=0;i<r;i++)a=t(i,a,n[i]);return a}},W=function(e,t){return $(e,(function(e,n,r){return t(n,r)}))},$=function(e,t){return function(n){return n.reduceRight((function(e,n,r){return t(r,n,e)}),e)}},K=function(e){return{show:function(t){return"[".concat(t.map(e.show).join(", "),"]")}}},N=function(e){return(0,r.f7)((function(t,n){return t.length===n.length&&t.every((function(t,r){return e.equals(t,n[r])}))}))},F=function(e){return(0,o.Zt)((function(t,n){for(var r=t.length,a=n.length,i=Math.min(r,a),o=0;o<i;o++){var c=e.compare(t[o],n[o]);if(0!==c)return c}return s.Df.compare(r,a)}))},Y=function(e){return function(t){for(var n=d([],e(t),!0),r=[];n.length>0;){var a=n.shift();i.nM(a)?n.unshift.apply(n,e(a.left)):r.push(a.right)}return r}},V=function(e){return function(t){var n=e(t),r=[],a=[];function s(t){i.nM(t)?e(t.left).forEach((function(e){return r.push(e)})):a.push(t.right)}for(var o=0,c=n;o<c.length;o++){s(c[o])}for(;r.length>0;)s(r.shift());return a}},Q=(c.oo,c.cS);function H(e){return function(t){return t.every(e)}}var J=function(e){var t=c.j0(e);return function(n){return g((function(){return e.empty}),t(n))}};i.F4,c.w6,c.QI,c.Ss},7241:(e,t,n)=>{n.d(t,{R3:()=>m,Im:()=>_,ur:()=>B,QI:()=>$,cS:()=>l,Lx:()=>M,xP:()=>q,Eh:()=>U,ZN:()=>A,ru:()=>k,vM:()=>E,YM:()=>G,j0:()=>W,Od:()=>f,dC:()=>g,Z$:()=>z,Fp:()=>L,VV:()=>R,of:()=>I,Ce:()=>h,ws:()=>p,w6:()=>y,u4:()=>D,nq:()=>O,iw:()=>C,OE:()=>T,Ss:()=>K,oo:()=>b,Ri:()=>P});var r,a=n(4268),i=n(3735),s=(n(7341),n(9384)),o=n(7209),c=function(e){return{concat:o.VV(e)}},u=function(e){return{concat:o.Fp(e)}};r=void 0;var d=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},l=s.Xl,f=s.Od,g=function(e,t){return e<0||e>=t.length},p=function(e){return function(t){return d([e],t,!0)}},h=p,_=function(e){return function(t){return d(d([],t,!0),[e],!1)}},m=_,b=function(e,t,n){if(f(n)){var r=s.r1(n);return r.splice(e,0,t),r}return[t]},v=function(e){return function(t){for(var n=Math.max(0,Math.floor(t)),r=[e(0)],a=1;a<n;a++)r.push(e(a));return r}},y=function(e,t){return e<=t?v((function(t){return e+t}))(t-e+1):[e]};function w(e,t){return t?e.concat(t):function(t){return t.concat(e)}}function k(e){return function(t){var n=t.length;if(0===n)return l;for(var r=[],a=t[0],i=[a],s=1;s<n;s++){var o=t[s];e.equals(o,a)?i.push(o):(r.push(i),i=[a=o])}return r.push(i),r}}var E=function(e){return function(t){for(var n={},r=0,a=t;r<a.length;r++){var i=a[r],o=e(i);s.e$.call(n,o)?n[o].push(i):n[o]=[i]}return n}};var P=function(e){for(var t=[e[0][0]],n=[e[0][1]],r=1;r<e.length;r++)t[r]=e[r][0],n[r]=e[r][1];return[t,n]},S=function(e){return function(t){for(var n=[e,t[0]],r=1;r<t.length;r++)n.push(e,t[r]);return n}},I=s.ri,D=function(e,t){return T(e,(function(e,n,r){return t(n,r)}))},M=function(e){return function(t){return function(n){return n.slice(1).reduce((function(n,r){return e.concat(n,t(r))}),t(n[0]))}}},O=function(e,t){return C(e,(function(e,n,r){return t(n,r)}))},T=function(e,t){return function(n){return n.reduce((function(e,n,r){return t(r,e,n)}),e)}},q=function(e){return function(t){return function(n){return n.slice(1).reduce((function(n,r,a){return e.concat(n,t(a+1,r))}),t(0,n[0]))}}},C=function(e,t){return function(n){return n.reduceRight((function(e,n,r){return t(r,n,e)}),e)}},x=s.YM,A=function(e){return{show:function(t){return"[".concat(t.map(e.show).join(", "),"]")}}},U=function(e){return(0,a.f7)((function(t,n){return t.length===n.length&&t.every((function(t,r){return e.equals(t,n[r])}))}))},G=(s.F4,x),j=s.Gb,z=function(e){return e[e.length-1]},R=function(e){var t=c(e);return function(e){return e.reduce(t.concat)}},L=function(e){var t=u(e);return function(e){return e.reduce(t.concat)}},B=function(e){return function(t){return t.reduce(e.concat)}},W=function(e){var t=B(e);return function(e){return(0,i.ls)(function(e){return function(t){var n=j(t);return f(n)?(0,i.zG)(n,S(e),h(G(t))):t}}(e),t)}};function $(e,t){return void 0===t?h(e):(0,i.zG)(t,h(e))}var K=function(e,t){return(0,i.zG)(e,w([t]))}},4923:(e,t,n)=>{n.d(t,{Bu:()=>_,CC:()=>z,DZ:()=>te,EW:()=>N,Eh:()=>de,G:()=>x,HA:()=>U,I8:()=>L,P5:()=>m,RF:()=>R,RJ:()=>W,SW:()=>Y,Su:()=>v,UI:()=>y,Ub:()=>Q,V_:()=>K,XP:()=>l,Yz:()=>T,_Y:()=>$,_r:()=>I,dp:()=>c,dx:()=>p,e$:()=>h,hX:()=>ee,jt:()=>M,kp:()=>j,mK:()=>X,mS:()=>B,nn:()=>G,nr:()=>fe,nu:()=>F,oA:()=>oe,oh:()=>ce,qS:()=>J,ri:()=>P,sq:()=>q,t9:()=>A,tV:()=>re,uK:()=>ne,uZ:()=>le,vA:()=>H,vP:()=>S,xb:()=>u,yW:()=>C,z7:()=>O,zV:()=>V});var r=n(4268),a=n(3735),i=n(9384),s=n(4870),o=n(2751),c=(n(5605),function(e){return Object.keys(e).length}),u=function(e){for(var t in e)if(i.e$.call(e,t))return!1;return!0},d=function(e){return function(t){return Object.keys(t).sort(e.compare)}},l=d(o.Df);function f(e){if("function"==typeof e)return f(o.Df)(e);var t=d(e);return function(e){return function(n){for(var r=[],a=0,i=t(n);a<i.length;a++){var s=i[a];r.push(e(s,n[s]))}return r}}}var g=f(o.Df)((function(e,t){return[e,t]}));var p=function(e,t){return function(n){if(i.e$.call(n,e)&&n[e]===t)return n;var r=Object.assign({},n);return r[e]=t,r}},h=function(e,t){return i.e$.call(t,e)};function _(e){return function(t,n){if(void 0===n){var r=_(e);return function(e){return r(e,t)}}for(var a in t)if(!i.e$.call(n,a)||!e.equals(t[a],n[a]))return!1;return!0}}function m(e,t){return void 0===t?function(t){return m(e,t)}:i.e$.call(t,e)?i.G(t[e]):i.YP}var b={};function v(e){return function(t){var n={};for(var r in t)i.e$.call(t,r)&&(n[r]=e(r,t[r]));return n}}function y(e){return v((function(t,n){return e(n)}))}function w(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return w(o.Df).apply(void 0,e);var n=d(e[0]);return function(e,t){return function(r){for(var a=e,i=n(r),s=i.length,o=0;o<s;o++){var c=i[o];a=t(c,a,r[c])}return a}}}function k(e){if("compare"in e){var t=d(e);return function(e){return function(n){return function(r){for(var a=e.empty,i=t(r),s=i.length,o=0;o<s;o++){var c=i[o];a=e.concat(a,n(c,r[c]))}return a}}}}return k(o.Df)(e)}function E(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return E(o.Df).apply(void 0,e);var n=d(e[0]);return function(e,t){return function(r){for(var a=e,i=n(r),s=i.length-1;s>=0;s--){var o=i[s];a=t(o,r[o],a)}return a}}}var P=function(e,t){var n;return(n={})[e]=t,n};function S(e){return X(o.Df)(e)}function I(e){return function(t){var n={},r={};for(var a in t)if(i.e$.call(t,a)){var o=e(a,t[a]);switch(o._tag){case"Left":n[a]=o.left;break;case"Right":r[a]=o.right}}return(0,s.s4)(n,r)}}function D(e){return function(t){var n={},r={};for(var a in t)if(i.e$.call(t,a)){var o=t[a];e(a,o)?r[a]=o:n[a]=o}return(0,s.s4)(n,r)}}function M(e){return function(t){var n={};for(var r in t)if(i.e$.call(t,r)){var a=e(r,t[r]);i.pC(a)&&(n[r]=a.value)}return n}}function O(e){return function(t){var n={},r=!1;for(var a in t)if(i.e$.call(t,a)){var s=t[a];e(a,s)?n[a]=s:r=!0}return r?n:t}}var T=g,q=function(e){for(var t={},n=0,r=e;n<r.length;n++){var a=r[n];t[a[0]]=a[1]}return t};function C(e){return function(t){for(var n in t)if(!e(t[n]))return!1;return!0}}function x(e){return function(t){for(var n in t)if(e(t[n]))return!0;return!1}}function A(e){return function(t,n){if(void 0===n){var r=A(e);return function(e){return r(t,e)}}for(var a in n)if(e.equals(n[a],t))return!0;return!1}}var U=function(e,t){return(0,a.zG)(e,y(t))},G=function(e,t){return(0,a.zG)(e,v(t))},j=function(e){var t=ae(e);return function(e,n,r){return(0,a.zG)(e,t(n,r))}},z=function(e){return function(t){var n=ie(e)(t);return function(e,t){return(0,a.zG)(e,n(t))}}},R=function(e){var t=se(e);return function(e,n,r){return(0,a.zG)(e,t(n,r))}},L=function(e,t){return(0,a.zG)(e,ee(t))},B=function(e,t){return(0,a.zG)(e,te(t))},W=function(e,t){return(0,a.zG)(e,ne(t))},$=function(e,t){return(0,a.zG)(e,re(t))},K=function(e){var t=w(e);return function(e,n,r){return(0,a.zG)(e,t(n,r))}},N=function(e){var t=k(e);return function(e){var n=t(e);return function(e,t){return(0,a.zG)(e,n(t))}}},F=function(e){var t=E(e);return function(e,n,r){return(0,a.zG)(e,t(n,r))}},Y=function(e,t){return(0,a.zG)(e,I(t))},V=function(e,t){return(0,a.zG)(e,D(t))},Q=function(e,t){return(0,a.zG)(e,M(t))},H=function(e,t){return(0,a.zG)(e,O(t))},J=function(e){var t=Z(e);return function(e){var n=t(e);return function(e,t){return n(e,(0,a.ls)(a.SK,t))}}},X=function(e){var t=J(e);return function(e){var n=t(e);return function(e){return n(e,a.yR)}}},Z=function(e){return function(t){var n=d(e);return function(e,r){var a=n(e);if(0===a.length)return t.of(b);for(var i=t.of({}),s=function(n){i=t.ap(t.map(i,(function(e){return function(t){var r;return Object.assign({},e,((r={})[n]=t,r))}})),r(n,e[n]))},o=0,c=a;o<c.length;o++){s(c[o])}return i}}},ee=function(e){return O((function(t,n){return e(n)}))},te=function(e){return M((function(t,n){return e(n)}))},ne=function(e){return D((function(t,n){return e(n)}))},re=function(e){return I((function(t,n){return e(n)}))};function ae(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=w(e[0]);return function(e,t){return n(e,(function(e,n,r){return t(n,r)}))}}return ae(o.Df).apply(void 0,e)}function ie(e){if("compare"in e){var t=k(e);return function(e){var n=t(e);return function(e){return n((function(t,n){return e(n)}))}}}return ie(o.Df)(e)}function se(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=E(e[0]);return function(e,t){return n(e,(function(e,n,r){return t(n,r)}))}}return se(o.Df).apply(void 0,e)}var oe=function(e){var t={};for(var n in e)if(i.e$.call(e,n)){var r=e[n];i.pC(r)&&(t[n]=r.value)}return t},ce=function(e){var t={},n={};for(var r in e)if(i.e$.call(e,r)){var a=e[r];i.nM(a)?t[r]=a.left:n[r]=a.right}return(0,s.s4)(t,n)},ue="ReadonlyRecord";function de(e){var t=_(e);return(0,r.f7)((function(e,n){return t(e)(n)&&t(n)(e)}))}function le(e){return{concat:function(t,n){if(u(t))return n;if(u(n))return t;var r=Object.assign({},t);for(var a in n)i.e$.call(n,a)&&(r[a]=i.e$.call(t,a)?e.concat(t[a],n[a]):n[a]);return r},empty:b}}o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df;function fe(e,t){return i.e$.call(void 0===t?this:t,e)}o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df},7927:(e,t,n)=>{n.d(t,{UI:()=>u,XP:()=>o,dx:()=>c,hX:()=>y,xb:()=>i});var r=n(4923),a=n(2751),i=(n(5605),r.dp,r.xb),s=function(e){return function(t){return Object.keys(t).sort(e.compare)}},o=s(a.Df);var c=r.dx;r.e$;r.Bu,r.P5,r.Su;var u=r.UI;r.ri;function d(e){return r.vP(e)}r._r;r.jt;r.yW,r.G,r.t9;var l=r.HA,f=(r.nn,r.kp),g=r.CC,p=r.RF,h=(r.I8,r.mS,r.RJ,r._Y,r.V_),_=r.EW,m=r.nu,b=(r.SW,r.zV,r.Ub,r.vA,r.qS),v=(r.mK,function(e){return function(t){var n=s(e);return function(e,r){var a=n(e);if(0===a.length)return t.of({});for(var i=t.of({}),s=function(n){i=t.ap(t.map(i,(function(e){return function(t){return e[n]=t,e}})),r(n,e[n]))},o=0,c=a;o<c.length;o++){s(c[o])}return i}}}),y=r.hX;r.DZ,r.uK,r.tV;r.oA,r.oh;var w="Record";r.Eh,r.uZ,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,r.nr,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df},2197:(e,t,n)=>{n.d(t,{ff:()=>r});var r=function(e){return function(t){return!e(t)}}},4870:(e,t,n)=>{n.d(t,{Pd:()=>a,s4:()=>r});n(3735);var r=function(e,t){return{left:e,right:t}},a=function(e,t){return function(n){return r(e(i(n)),t(s(n)))}},i=function(e){return e.left},s=function(e){return e.right}},5151:(e,t,n)=>{n.d(t,{At:()=>S,Hi:()=>v,PM:()=>b,RD:()=>C,UA:()=>w,UI:()=>f,YO:()=>I,ak:()=>D,dO:()=>m,mU:()=>E,oE:()=>A,of:()=>p,pE:()=>x,qo:()=>y,tD:()=>c,tS:()=>h,uU:()=>q});var r=n(6862),a=n(1130),i=n(3735),s=n(7341),o=n(9384),c=function(e){return function(){return Promise.resolve().then(e)}};var u=function(e,t){return(0,i.zG)(e,f(t))},d=function(e,t){return(0,i.zG)(e,g(t))},l=function(e,t){return(0,i.zG)(e,h(t))},f=function(e){return function(t){return function(){return Promise.resolve().then(t).then(e)}}},g=function(e){return function(t){return function(){return Promise.all([Promise.resolve().then(t),Promise.resolve().then(e)]).then((function(e){return(0,e[0])(e[1])}))}}},p=function(e){return function(){return Promise.resolve(e)}},h=function(e){return function(t){return function(){return Promise.resolve().then(t).then((function(t){return e(t)()}))}}},_="Task";var m={URI:_,map:u},b={URI:_,of:p},v={URI:_,map:u,ap:d},y={URI:_,map:u,ap:d,chain:l},w={URI:_,map:u,of:p,ap:d,chain:l},k=i.yR,E=(0,r.m)(y),P={URI:_,fromIO:c},S=(0,a.At)(P,y),I=(o.F4,(0,s.YO)(m)),D=(0,r.a)(y),M=p(o.Xl),O=function(e){var t=function(e){return function(t){return function(){return Promise.all(t.map((function(t,n){return Promise.resolve().then((function(){return e(n,t)()}))})))}}}(e);return function(e){return o.Od(e)?t(e):M}},T=function(e){var t=function(e){return function(t){return function(){return o.Gb(t).reduce((function(t,n,r){return t.then((function(t){return Promise.resolve().then(e(r+1,n)).then((function(e){return t.push(e),t}))}))}),Promise.resolve().then(e(0,o.YM(t))).then(o.ri))}}}(e);return function(e){return o.Od(e)?t(e):M}},q=function(e){return O((function(t,n){return e(n)}))},C=q(i.yR),x=function(e){return T((function(t,n){return e(n)}))},A={URI:_,map:u,of:p,ap:d,chain:l,fromIO:c,fromTask:k}},6934:(e,t,n)=>{n.d(t,{Do:()=>ve,ak:()=>ye,tS:()=>se,fX:()=>pe,oU:()=>_e,wE:()=>be,Zl:()=>oe,g_:()=>F,Uo:()=>$,tD:()=>B,fF:()=>W,fS:()=>Y,t$:()=>G,UI:()=>ne,Vn:()=>ae,EQ:()=>K,vx:()=>Q,F2:()=>j,Ij:()=>we,Y3:()=>V});var r=n(6862),a=n(1828),i=n(365),s=n(3735),o=n(7341);function c(e){return(0,s.ls)(i.F2,e.of)}function u(e){return(0,s.ls)(i.t$,e.of)}function d(e){return function(t){return e.map(t,i.F2)}}function l(e){return function(t){return e.map(t,i.t$)}}function f(e){return function(t){return(0,s.ls)(i.ij(t),e.of)}}function g(e){var t=f(e);return function(e){var n=t(e);return function(e){return(0,s.ls)(e,n)}}}function p(e){var t=m(e),n=g(e);return function(e){var r=n(e);return function(e){return t(r(e))}}}function h(e){return(0,o.UI)(e,i.dO)}function _(e){return(0,a.ap)(e,i.G5)}function m(e){return function(t){return function(n){return e.chain(n,(function(n){return i.nM(n)?e.of(n):t(n.right)}))}}}function b(e){return function(t){return function(n){return e.chain(n,(function(n){return i.nM(n)?t():e.of(n)}))}}}function v(e){return function(t,n){return function(r){return e.map(r,i.Pd(t,n))}}}function y(e){return function(t){return function(n){return e.map(n,i.Vn(t))}}}function w(e){return function(t,n){return function(r){return e.map(r,i.EQ(t,n))}}}function k(e){return function(t,n){return function(r){return e.chain(r,i.EQ(t,n))}}}function E(e){return function(t){return function(n){return e.chain(n,i.EQ(t,e.of))}}}function P(e){return function(t){return function(n){return e.chain(n,(function(n){return i.nM(n)?t(n.left):e.of(n)}))}}}function S(e){var t=P(e);return function(n){return t((function(t){return e.map(n(t),(function(e){return i.nM(e)?e:i.t$(t)}))}))}}function I(e){return function(t){return function(n){return e.chain(n,i.EQ((function(n){return e.map(t(n),i.t$)}),(function(t){return e.of(i.F2(t))})))}}}function D(e){return function(t){return e.map(t,i.LF)}}function M(e){return function(t){return e.map(t,i.i$)}}var O=n(2690),T=n(1130),q=n(9679),C=n(9384),x=n(5151),A=function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function o(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}c((r=r.apply(e,t||[])).next())}))},U=function(e,t){var n,r,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(a=s.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},G=u(x.PM),j=c(x.PM),z=d(x.dO),R=l(x.dO),L=(0,s.ls)(x.tD,z),B=(x.tD,L),W=z,$=x.of,K=(x.tD,w(x.dO)),N=k(x.UA),F=N,Y=E(x.UA),V=function(e,t){return function(){return A(void 0,void 0,void 0,(function(){var n;return U(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e().then(C.F2)];case 1:return[2,r.sent()];case 2:return n=r.sent(),[2,C.t$(t(n))];case 3:return[2]}}))}))}},Q=(x.dO,x.PM,x.PM,x.UA,P(x.UA)),H=(x.UA,x.UA,x.dO,function(e,t){return(0,s.zG)(e,ne(t))}),J=function(e,t){return(0,s.zG)(e,ie(t))},X=function(e,t){return(0,s.zG)(e,se(t))},Z=function(e,t,n){return(0,s.zG)(e,re(t,n))},ee=function(e,t){return(0,s.zG)(e,ae(t))},te=function(e,t){return(0,s.zG)(e,ce(t))},ne=h(x.dO),re=v(x.dO),ae=y(x.dO),ie=_(x.Hi),se=m(x.UA),oe=se,ce=b(x.UA),ue=j,de=G,le="TaskEither";var fe={URI:le,map:H,ap:J,chain:X},ge={URI:le,fromEither:$},pe=(0,O.fX)(ge,fe),he={URI:le,fromIO:B},_e=(0,T.oU)(he,fe),me={URI:le,fromIO:B,fromTask:W},be=(0,q.oU)(me,fe);var ve=ue(C.F4),ye=(0,r.a)(fe),we=(C.Xl,{URI:le,bimap:Z,mapLeft:ee,map:H,of:ue,ap:J,chain:X,alt:te,fromIO:B,fromTask:W,throwError:de})},7758:(e,t,n)=>{n.d(t,{NG:()=>L,wE:()=>X,hX:()=>N,tD:()=>G,fS:()=>R,EQ:()=>z});var r=n(3735),a=n(7341),i=n(6567),s=n(4870);function o(e,t){return function(n){return e.map(n,t.compact)}}function c(e,t,n){var c=o(e,t),u=(0,a.UI)(e,n);return function(e){return s.s4(c((0,r.zG)(e,u(i.IS))),c((0,r.zG)(e,u(i.EK))))}}var u=n(6017);function d(e,t){return function(n){return function(r){return e.map(r,(function(e){return t.filter(e,n)}))}}}function l(e,t){return function(n){return function(r){return e.map(r,(function(e){return t.filterMap(e,n)}))}}}function f(e,t){var n=d(e,t);return function(e){var t=n((0,u.ff)(e)),r=n(e);return function(e){return(0,s.s4)(t(e),r(e))}}}function g(e,t){var n=l(e,t);return function(e){return function(t){return(0,s.s4)((0,r.zG)(t,n((function(t){return(0,i.IS)(e(t))}))),(0,r.zG)(t,n((function(t){return(0,i.EK)(e(t))}))))}}}var p=n(9679),h=n(9384),_=n(1828);function m(e){return(0,r.ls)(i.G,e.of)}function b(e){return(0,r.a9)(e.of(i.YP))}function v(e){return function(t){return e.map(t,i.G)}}function y(e){return(0,r.ls)(i.ij,e.of)}function w(e){var t=y(e);return function(e){return(0,r.ls)(e,t)}}function k(e){var t=C(e),n=w(e);return function(e){return t(n(e))}}function E(e){return function(t){return(0,r.ls)(t,e.of)}}function P(e){var t=C(e),n=E(e);return function(e){return t(n(e))}}function S(e){return function(t){return function(n){return e.of(i.DT(t)(n))}}}function I(e){return(0,r.ls)(i.Uo,e.of)}function D(e){return function(t,n){return function(r){return e.map(r,i.EQ(t,n))}}}function M(e){return function(t,n){return function(r){return e.chain(r,i.EQ(t,n))}}}function O(e){return function(t){return function(n){return e.chain(n,i.EQ(t,e.of))}}}function T(e){return(0,a.UI)(e,i.dO)}function q(e){return(0,_.ap)(e,i.G5)}function C(e){var t=b(e);return function(n){return function(r){return e.chain(r,i.EQ((function(){return t()}),n))}}}function x(e){var t=m(e);return function(n){return function(r){return e.chain(r,i.EQ(n,t))}}}var A=n(5151),U=m(A.PM),G=(A.PM,A.of,A.PM,function(e){return j(A.tD(e))}),j=v(A.dO),z=(i.Uo,D(A.dO)),R=(A.qo,O(A.UA)),L=(A.PM,A.PM,k(A.UA)),B=(A.PM,A.UA,T(A.dO)),W=q(A.Hi),$=U,K=C(A.UA),N=(A.UA,A.PM,A.dO,i.Ri,A.dO,i.Ri,i.dO,d(A.dO,i.xu)),F=(A.dO,i.xu,A.dO,i.xu,A.dO,i.xu,function(e,t){return(0,r.zG)(e,B(t))}),Y=function(e,t){return(0,r.zG)(e,W(t))},V=function(e,t){return(0,r.zG)(e,K(t))},Q="TaskOption",H={URI:Q,map:F,ap:Y,chain:V},J={URI:Q,fromIO:G,fromTask:j},X=(0,p.oU)(J,H);h.F4,h.Xl},5605:(e,t,n)=>{function r(e,t){return function(n){var r=e.traverse(n);return function(e,a){return n.map(r(e,a),t.separate)}}}function a(e,t){return function(n){var r=e.traverse(n);return function(e,a){return n.map(r(e,a),t.compact)}}}n.d(t,{BL:()=>a,Fj:()=>r})},3735:(e,t,n)=>{n.d(t,{MZ:()=>a,Q1:()=>c,SK:()=>f,W8:()=>s,a9:()=>i,bc:()=>d,gn:()=>o,ls:()=>u,yR:()=>r,zG:()=>l});function r(e){return e}var a=r;function i(e){return function(){return e}}var s=i(!0),o=i(null),c=i(void 0);function u(e,t,n,r,a,i,s,o,c){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return n(t(e.apply(this,arguments)))};case 4:return function(){return r(n(t(e.apply(this,arguments))))};case 5:return function(){return a(r(n(t(e.apply(this,arguments)))))};case 6:return function(){return i(a(r(n(t(e.apply(this,arguments))))))};case 7:return function(){return s(i(a(r(n(t(e.apply(this,arguments)))))))};case 8:return function(){return o(s(i(a(r(n(t(e.apply(this,arguments))))))))};case 9:return function(){return c(o(s(i(a(r(n(t(e.apply(this,arguments)))))))))}}}function d(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}function l(e,t,n,r,a,i,s,o,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return a(r(n(t(e))));case 6:return i(a(r(n(t(e)))));case 7:return s(i(a(r(n(t(e))))));case 8:return o(s(i(a(r(n(t(e)))))));case 9:return c(o(s(i(a(r(n(t(e))))))));default:for(var u=arguments[0],d=1;d<arguments.length;d++)u=arguments[d](u);return u}}var f=function(e,t){return t}},9384:(e,t,n)=>{n.d(t,{F2:()=>l,F4:()=>m,G:()=>o,Gb:()=>h,Od:()=>g,Wi:()=>a,Xl:()=>_,YM:()=>p,YP:()=>s,e$:()=>b,nM:()=>c,pC:()=>i,r1:()=>v,ri:()=>f,t$:()=>d,tO:()=>u});var r=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},a=function(e){return"None"===e._tag},i=function(e){return"Some"===e._tag},s={_tag:"None"},o=function(e){return{_tag:"Some",value:e}},c=function(e){return"Left"===e._tag},u=function(e){return"Right"===e._tag},d=function(e){return{_tag:"Left",left:e}},l=function(e){return{_tag:"Right",right:e}},f=function(e){return[e]},g=function(e){return e.length>0},p=function(e){return e[0]},h=function(e){return e.slice(1)},_=[],m={},b=Object.prototype.hasOwnProperty,v=function(e){return r([e[0]],e.slice(1),!0)}},4011:(e,t,n)=>{n.d(t,{Df:()=>a,Eq:()=>r});var r={equals:function(e,t){return e===t}},a={equals:r.equals,compare:function(e,t){return e<t?-1:e>t?1:0}};r.equals,a.compare},2751:(e,t,n)=>{n.d(t,{Df:()=>a,Eq:()=>r,pn:()=>s,xb:()=>i});var r={equals:function(e,t){return e===t}},a={equals:r.equals,compare:function(e,t){return e<t?-1:e>t?1:0}},i=function(e){return 0===e.length},s=function(e,t){return function(n){return n.endsWith(e,t)}}},902:(e,t)=>{t.zG=t.r5=t.SC=t.jG=void 0;t.jG=function(e){return function(){return{concat:function(t,n){return function(r){return e.concat(t(r),n(r))}}}}};t.SC=function(e){return{add:function(t,n){return function(r){return e.add(t(r),n(r))}},zero:function(){return e.zero},mul:function(t,n){return function(r){return e.mul(t(r),n(r))}},one:function(){return e.one}}};function n(e){return e}function r(e){return function(){return e}}function a(e,t,n,r,a,i,s,o,c){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return n(t(e.apply(this,arguments)))};case 4:return function(){return r(n(t(e.apply(this,arguments))))};case 5:return function(){return a(r(n(t(e.apply(this,arguments)))))};case 6:return function(){return i(a(r(n(t(e.apply(this,arguments))))))};case 7:return function(){return s(i(a(r(n(t(e.apply(this,arguments)))))))};case 8:return function(){return o(s(i(a(r(n(t(e.apply(this,arguments))))))))};case 9:return function(){return c(o(s(i(a(r(n(t(e.apply(this,arguments)))))))))}}}function i(e){throw new Error("Called `absurd` function which should be uncallable")}r(!0),r(!1),r(null),t.r5=r(void 0),t.r5,t.zG=function(e,t,n,r,a,i,s,o,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return a(r(n(t(e))));case 6:return i(a(r(n(t(e)))));case 7:return s(i(a(r(n(t(e))))));case 8:return o(s(i(a(r(n(t(e)))))));case 9:return c(o(s(i(a(r(n(t(e))))))));default:for(var u=arguments[0],d=1;d<arguments.length;d++)u=arguments[d](u);return u}}},655:(e,t,n)=>{n.d(t,{_T:()=>r,mG:()=>a});function r(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}function a(e,t,n,r){return new(n||(n=Promise))((function(a,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function o(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}c((r=r.apply(e,t||[])).next())}))}Object.create;Object.create},4386:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(477),a=n.n(r);function i(){return a()('/*! permutive-javascript-sdk v19.97.4 (web) (built 2023-08-29T18:59:21.838Z) */(()=>{"use strict";var e={902:(e,n)=>{n.zG=n.r5=n.SC=n.jG=void 0;n.jG=function(e){return function(){return{concat:function(n,r){return function(t){return e.concat(n(t),r(t))}}}}};n.SC=function(e){return{add:function(n,r){return function(t){return e.add(n(t),r(t))}},zero:function(){return e.zero},mul:function(n,r){return function(t){return e.mul(n(t),r(t))}},one:function(){return e.one}}};function r(e){return e}function t(e){return function(){return e}}function a(e,n,r,t,a,o,i,s,c){switch(arguments.length){case 1:return e;case 2:return function(){return n(e.apply(this,arguments))};case 3:return function(){return r(n(e.apply(this,arguments)))};case 4:return function(){return t(r(n(e.apply(this,arguments))))};case 5:return function(){return a(t(r(n(e.apply(this,arguments)))))};case 6:return function(){return o(a(t(r(n(e.apply(this,arguments))))))};case 7:return function(){return i(o(a(t(r(n(e.apply(this,arguments)))))))};case 8:return function(){return s(i(o(a(t(r(n(e.apply(this,arguments))))))))};case 9:return function(){return c(s(i(o(a(t(r(n(e.apply(this,arguments)))))))))}}}function o(e){throw new Error("Called `absurd` function which should be uncallable")}t(!0),t(!1),t(null),n.r5=t(void 0),n.r5,n.zG=function(e,n,r,t,a,o,i,s,c){switch(arguments.length){case 1:return e;case 2:return n(e);case 3:return r(n(e));case 4:return t(r(n(e)));case 5:return a(t(r(n(e))));case 6:return o(a(t(r(n(e)))));case 7:return i(o(a(t(r(n(e))))));case 8:return s(i(o(a(t(r(n(e)))))));case 9:return c(s(i(o(a(t(r(n(e))))))));default:for(var u=arguments[0],l=1;l<arguments.length;l++)u=arguments[l](u);return u}}}},n={};function r(t){var a=n[t];if(void 0!==a)return a.exports;var o=n[t]={exports:{}};return e[t](o,o.exports,r),o.exports}(()=>{function e(e){return e instanceof Error?e:new Error("string"==typeof e?e:JSON.stringify(e))}const n=()=>({kind:"null",value:null}),t=e=>({kind:"string",value:e}),a=e=>({kind:"number",value:e}),o=e=>({kind:"array",value:e}),i=e=>({kind:"object",value:e}),s=e=>e,c=()=>({kind:"bottom"}),u=e=>({kind:"inner",a:e}),l=e=>({kind:"top",error:e}),f=e=>({kind:"unbounded",group:e}),d=(e,n)=>({kind:"windowed",key:n,group:e}),p=(e,n,r)=>({kind:"countLimit",n:r,limit:n,group:e}),g=(e,n,r)=>({kind:"uniqueLimit",n:r,limit:n,group:e}),_=e=>({kind:"numberGroup",group:e}),m=e=>({kind:"stringGroup",group:e}),b=e=>({kind:"tuple",tuple:e}),w=e=>({state:e}),h=(e,n)=>({commands:e,payload:n});function v(e){return e}function y(e){return function(){return e}}var k=y(void 0);function q(e,n,r,t,a,o,i,s,c){switch(arguments.length){case 1:return e;case 2:return function(){return n(e.apply(this,arguments))};case 3:return function(){return r(n(e.apply(this,arguments)))};case 4:return function(){return t(r(n(e.apply(this,arguments))))};case 5:return function(){return a(t(r(n(e.apply(this,arguments)))))};case 6:return function(){return o(a(t(r(n(e.apply(this,arguments))))))};case 7:return function(){return i(o(a(t(r(n(e.apply(this,arguments)))))))};case 8:return function(){return s(i(o(a(t(r(n(e.apply(this,arguments))))))))};case 9:return function(){return c(s(i(o(a(t(r(n(e.apply(this,arguments)))))))))}}}function E(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e}function M(e,n,r,t,a,o,i,s,c){switch(arguments.length){case 1:return e;case 2:return n(e);case 3:return r(n(e));case 4:return t(r(n(e)));case 5:return a(t(r(n(e))));case 6:return o(a(t(r(n(e)))));case 7:return i(o(a(t(r(n(e))))));case 8:return s(i(o(a(t(r(n(e)))))));case 9:return c(s(i(o(a(t(r(n(e))))))));default:for(var u=arguments[0],l=1;l<arguments.length;l++)u=arguments[l](u);return u}}var I=function(e){return{equals:function(n,r){return n===r||e(n,r)}}},z=function(e){return I((function(n,r){for(var t in e)if(!e[t].equals(n[t],r[t]))return!1;return!0}))},x=function(e){return function(n,r){return n===r||0===e(n,r)}},S=function(e){return{equals:x(e),compare:function(n,r){return n===r?0:e(n,r)}}},T=function(e){return function(n){return S((function(r,t){return n.compare(e(r),e(t))}))}},P=function(e){return function(n,r){return-1===e.compare(n,r)}},A=function(e){return function(n,r){return 1===e.compare(n,r)}},L=function(e){return function(n,r){return n===r||e.compare(n,r)<1?n:r}},j=function(e){return function(n,r){return n===r||e.compare(n,r)>-1?n:r}};var C={equals:function(e,n){return e===n}},O={equals:C.equals,compare:function(e,n){return e<n?-1:e>n?1:0}};const G=(e,n)=>{switch(e.kind){case"bottom":return{kind:"bottom"};case"inner":return u(n(e.a));case"top":return l(e.error)}},D=e=>S(((n,r)=>{if("bottom"===n.kind&&"bottom"===r.kind)return 0;if("bottom"===n.kind)return-1;if("bottom"===r.kind)return 1;if("top"===n.kind&&"top"===r.kind)return O.compare(n.error,r.error);if("top"===n.kind)return 1;if("top"===r.kind)return-1;if("inner"===n.kind&&"inner"===r.kind)return e.compare(n.a,r.a);throw new Error("Non exhaustive match in extendedAlgebraOrd")}));var V=function(e,n,r){if(r||2===arguments.length)for(var t,a=0,o=n.length;a<o;a++)!t&&a in n||(t||(t=Array.prototype.slice.call(n,0,a)),t[a]=n[a]);return e.concat(t||Array.prototype.slice.call(n))},R=function(e){return"Some"===e._tag},U={_tag:"None"},N=function(e){return{_tag:"Some",value:e}},H=function(e){return"Left"===e._tag},B=Object.prototype.hasOwnProperty,F=function(e){return V([e[0]],e.slice(1),!0)},$=function(e){return function(n){return!e(n)}};var Y=U,W=N;function J(e){return function(n){return e(n)?W(n):Y}}var Q=function(e){return"Left"===e._tag?Y:W(e.right)},K=function(e,n){return M(e,re(n))},X=function(e,n){return M(e,te(n))},Z="Option",ee=function(e){return{equals:function(n,r){return n===r||(ue(n)?ue(r):!ue(r)&&e.equals(n.value,r.value))}}},ne=function(e){return{equals:ee(e).equals,compare:function(n,r){return n===r?0:ce(n)?ce(r)?e.compare(n.value,r.value):1:-1}}},re=function(e){return function(n){return ue(n)?Y:W(e(n.value))}},te=function(e){return function(n){return ue(n)||ue(e)?Y:W(n.value(e.value))}},ae={URI:Z,map:K,ap:X},oe=function(e){return function(n){return ue(n)?Y:e(n.value)}},ie=function(e){return function(n){return ue(n)?e():n}},se=Q,ce=R,ue=function(e){return"None"===e._tag},le=function(e,n){return function(r){return ue(r)?e():n(r.value)}},fe=le,de=fe,pe=function(e){return function(n){return ue(n)?e():n.value}};var ge;ge=void 0;var _e=function(e){return e[0]},me=_e;var be=function(e,n,r){if(r||2===arguments.length)for(var t,a=0,o=n.length;a<o;a++)!t&&a in n||(t||(t=Array.prototype.slice.call(n,0,a)),t[a]=n[a]);return e.concat(t||Array.prototype.slice.call(n))},we=function(e){return e.length>0},he=function(e,n){return e<0||e>=n.length},ve=function(e){return function(n){return be([e],n,!0)}},ye=ve,ke=function(e){return function(n){return be(be([],n,!0),[e],!1)}},qe=ke,Ee=F,Me=function(e){return we(e)?N(e):U},Ie=function(e){return function(n){for(var r=Math.max(0,Math.floor(n)),t=[e(0)],a=1;a<r;a++)t.push(e(a));return t}};var ze=Ee,xe=function(e,n,r){for(var t=[r(e[0],n[0])],a=Math.min(e.length,n.length),o=1;o<a;o++)t[o]=r(e[o],n[o]);return t};var Se=function(e){return function(n){var r=Math.max(1,e);return r>=n.length?[ze(n),[]]:[M(n.slice(1,r),ye(Pe(n))),n.slice(r)]}},Te=function(e){return I((function(n,r){return n.length===r.length&&n.every((function(n,t){return e.equals(n,r[t])}))}))},Pe=me;var Ae={equals:function(e,n){return e===n}},Le={equals:Ae.equals,compare:function(e,n){return e<n?-1:e>n?1:0}};function je(e){return function(n,r){if(void 0===r){var t=je(e);return function(e){return t(n,e)}}for(var a,o=0;o<r.length;o++)if(a=r[o],e.equals(a,n))return!0;return!1}}var Ce=function(e,n){return function(r){for(var t=r.length,a=e,o=0;o<t;o++)a=n(o,a,r[o]);return a}};var Oe=function(e){return 0===e.length},Ge=we,De=ye,Ve=qe,Re=function(e,n){return e<=0?[]:Ie(n)(e)};var Ue=he,Ne=function(e){return function(n){return Ue(e,n)?$e(n):n.slice(0,e)}};var He=function(e,n){for(var r=e.length,t=0;t<r&&n(e[t]);t++);return t};function Be(e){return function(n){var r=Ke(He(n,e))(n);return{init:r[0],rest:r[1]}}}var Fe=function(e){return function(n){return e<=0||Oe(n)?$e(n):e>=n.length?[]:n.slice(e,n.length)}};var $e=function(e){return e.slice()},Ye=function(e){return Oe(e)?[]:e.slice().reverse()},We=function(e){return function(n){return n.length<=1?$e(n):n.slice().sort(e.compare)}},Je=function(e,n,r){for(var t=[],a=Math.min(e.length,n.length),o=0;o<a;o++)t[o]=r(e[o],n[o]);return t};var Qe=je,Ke=function(e){return function(n){return e>=1&&Ge(n)?Se(e)(n):Oe(n)?[$e(n),[]]:[[],$e(n)]}};function Xe(e){var n=Qe(e);return function(r,t){if(void 0===t){var a=Xe(e);return function(e){return a(e,r)}}return r.filter((function(e){return!n(e,t)}))}}var Ze=function(e){return function(n){return M(n,function(e){return function(n){for(var r=[],t=0;t<n.length;t++)r.push.apply(r,e(t,n[t]));return r}}((function(n,r){return e(r)})))}},en=function(e){return function(n){for(var r=[],t=0;t<n.length;t++){var a=e(t,n[t]);R(a)&&r.push(a.value)}return r}},nn=function(e){return en((function(n,r){return e(r)}))},rn=nn(v),tn=Ce,an=function(e){var n=on(e);return function(e){return n((function(n,r){return e(r)}))}},on=function(e){return function(n){return tn(e.of([]),(function(r,t,a){return e.ap(e.map(t,(function(e){return function(n){return M(e,Ve(n))}})),n(r,a))}))}},sn=function(e){return S((function(n,r){for(var t=n.length,a=r.length,o=Math.min(t,a),i=0;i<o;i++){var s=e.compare(n[i],r[i]);if(0!==s)return s}return Le.compare(t,a)}))},cn=function(e){return{_tag:"Left",left:e}},un=function(e){return{_tag:"Right",right:e}},ln=function(e,n){return M(e,pn(n))},fn=function(e,n){return M(e,_n(n))},dn="Either",pn=function(e){return function(n){return bn(n)?n:un(e(n.right))}},gn=un,_n=function(e){return function(n){return bn(n)?n:bn(e)?e:un(n.right(e.right))}},mn={URI:dn,map:ln,ap:fn,of:gn},bn=H,wn=function(e){return function(n){return bn(n)?e(n.left):n.right}},hn=wn,vn=function(e,n){try{return un(e())}catch(e){return cn(n(e))}};var yn=function(e){return-1===e?1:1===e?-1:0};function kn(e,n){return rn(e.map(n))}function qn(e,n,r,t){const a=(e,n)=>{if(0===e.length)return rn(n.map((e=>W({1:e[1],2:r(Y,W(e[2]))}))));if(0===n.length)return rn(e.map((e=>W({1:e[1],2:r(W(e[2]),Y)}))));if(e.length>0&&n.length>0&&P(t)(e[0][1],n[0][1])){const[t,...o]=e,i=t[1],s=t[2];return De({1:i,2:r(W(s),Y)})(a(o,n))}if(e.length>0&&n.length>0&&A(t)(e[0][1],n[0][1])){const[t,...o]=n,i=t[1],s=t[2];return De({1:i,2:r(Y,W(s))})(a(e,o))}if(e.length>0&&n.length>0){const[t,...o]=e,[i,...s]=n,c=t[1],u=t[2],l=i[2];return De({1:c,2:r(W(u),W(l))})(a(o,s))}throw new Error("Non exhaustive match in mapOption2")},o=T((e=>e[1]))(t),i=(e=>{const n=kn(e,(e=>ce(e[2])?W({1:e[1],2:e[2].value}):Y));return 0===n.length?Y:W(n)})(a(We(o)([...e].map((e=>({1:e[0],2:e[1]})))),We(o)([...n].map((e=>({1:e[0],2:e[1]}))))));return re((e=>new Map(e.map((e=>[e[1],e[2]])))))(i)}function En(e,n,r,t){const a=T((e=>e[0]))(t),o=We(a)([...n]).reduceRight(((e,n)=>{if(bn(e)){const t=r(n[1],e.left);return ce(t)?cn(t.value):un(n[0])}return e}),cn(e));return se(o)}function Mn(e,n){return new Map([...e].map(n))}function In(e,n){return new Map([...e].filter(n))}function zn(e){return JSON.stringify(xn(e))}function xn(e){switch(e.kind){case"null":return Pn.encode(e);case"string":return An.encode(e);case"number":return Ln.encode(e);case"array":return jn.encode(e);case"object":return Cn.encode(e)}}function Sn(e){return null===e?Pn.decode(e):"number"==typeof e?Ln.decode(e):"string"==typeof e?An.decode(e):Array.isArray(e)?jn.decode(e):Cn.decode(e)}const Tn=(e,n)=>cn(`Failed to decode. Input was ${JSON.stringify(e)}. Codec type was ${n}`),Pn={encode:e=>null,decode:e=>null===e?un({kind:"null",value:null}):Tn(e,"SimpleNull")},An={encode:e=>e.value,decode:e=>"string"==typeof e?un(t(e)):Tn(e,"SimpleString")},Ln={encode:e=>e.value,decode:e=>"number"==typeof e?un(a(e)):Tn(e,"SimpleNumber")},jn={encode:e=>e.value.map(xn),decode:e=>{if(Array.isArray(e)){const n=an(mn)(Sn)(e);return pn(o)(n)}return Tn(e,"SimpleArray")}},Cn={encode:e=>{const n=[...e.value.entries()];return Object.assign({},...Array.from(n,(([e,n])=>({[e]:xn(n)}))))},decode:e=>{if(e&&e.constructor===Object){const n=an(mn)((([e,n])=>M(Sn(n),pn((n=>E(e,n))))))(Object.entries(e));return pn((e=>i(new Map([...e]))))(n)}return Tn(e,"SimpleObject")}};function On(e){return M(e,Dn,re(zn),pe((()=>"<encode error>")))}function Gn(e){return re(Bn)(function(e){switch(e.state.kind){case"top":return W(t(e.state.error));case"bottom":return Y;case"inner":return Dn(e.state.a)}}(e))}function Dn(e){return function(e){switch(e.kind){case"numberGroup":case"stringGroup":return Vn(e.group);case"tuple":return e.tuple.length>0}}(e.payload)?W(o(function(e,n){const r=re((e=>De(e)(n)))(e);return pe((()=>n))(r)}(re((e=>t(function(e){const n=e=>fe((()=>""),(e=>"b"+JSON.stringify(e)))(e.bound),r=e=>{switch(e.operation){case"add":return"p";case"mul":return"m";case"max":return"v";case"min":return"n"}},t=e=>{const t=n(e[1])+r(e[1]);return 1===e[2]?t:t+JSON.stringify(e[2])};return e.map(t).join("")}(e))))(e.commands),function(e){const n=e=>{switch(e.kind){case"bottom":return{kind:"null",value:null};case"top":return t(e.error);case"inner":return a(e.a)}},r=e=>kn([Rn,Un,e=>M(e,Hn,i,W)],(n=>n(e))),o=e=>kn([Rn,Nn,e=>M(e,Hn,(e=>Mn(e,(([e,n])=>[JSON.stringify(e),n]))),i,W)],(n=>n(e)));switch(e.kind){case"tuple":return e.tuple.map(n);case"stringGroup":return r(e.group);case"numberGroup":return o(e.group)}}(e.payload)))):Y}function Vn(e){switch(e.kind){case"unbounded":return e.group.size>0;case"windowed":return e.group.size>0||ce(e.key);case"countLimit":case"uniqueLimit":return e.group.size>0||ce(e.limit)}}function Rn(e){switch(e.kind){case"unbounded":return Y;case"windowed":return W(t("w"));case"countLimit":return W(t(1===e.n?"x":`x${e.n}`));case"uniqueLimit":return W(t(1===e.n?"u":`u${e.n}`))}}function Un(e){switch(e.kind){case"unbounded":return Y;case"windowed":return W(t(ce(e.key)?e.key.value:""));case"countLimit":case"uniqueLimit":return W(t(ce(e.limit)?e.limit.value:""))}}function Nn(e){switch(e.kind){case"unbounded":return Y;case"windowed":return ce(e.key)?W(a(e.key.value)):W({kind:"null",value:null});case"countLimit":case"uniqueLimit":return ce(e.limit)?W(a(e.limit.value)):W({kind:"null",value:null})}}function Hn(e){switch(e.kind){case"unbounded":case"windowed":case"countLimit":case"uniqueLimit":return e.group}}function Bn(e){switch(e.kind){case"array":return 0===e.value.length?{kind:"null",value:null}:1===e.value.length?Bn(e.value[0]):o(e.value.map(Bn));case"object":return M(In(e.value,(([e,n])=>"null"!==n.kind)),(e=>Mn(e,(e=>[e[0],Bn(e[1])]))),i);default:return e}}var Fn=r(902);function $n(e){const n=e=>{if(0===e.length)return{kind:"bottom"};const n=(e=>{if(4!==e.length)return Y;const[n,r,t,a]=e;if("string"===n.kind&&"string"===r.kind&&"object"===a.kind){const e=J((e=>Yn(e[1].value)&&Wn(e[2].value)))({1:n,2:r});return re((e=>({prim:e[1].value,grp:e[2].value,cutoff:t,m:a.value})))(e)}return Y})(e);if(ce(n)){const{prim:e,grp:r,cutoff:t,m:a}=n.value,o=Jn(t,a,Qn(r));return"string"==typeof o?l(o):u(h(Kn(e),o))}const r=(e=>{if(3!==e.length)return Y;const[n,r,t]=e;if("string"===n.kind&&"object"===t.kind){const e=J((e=>Wn(e.value)))(n);return re((e=>({grp:e.value,cutoff:r,m:t.value})))(e)}return Y})(e);if(ce(r)){const{grp:e,cutoff:n,m:t}=r.value,a=Jn(n,t,Qn(e));return"string"==typeof a?l(a):u(h(Y,a))}const t=(e=>{if(2!==e.length)return Y;const[n,r]=e;if("string"===n.kind&&"object"===r.kind){const e=J((e=>Yn(e.value)))(n);return re((e=>({prim:e.value,m:r.value})))(e)}return Y})(e);if(ce(t)){const{prim:e,m:n}=t.value;return u(h(Kn(e),m(f(n))))}const a=(e=>{if(1!==e.length)return Y;const[n]=e;return"object"===n.kind?W({m:n.value}):Y})(e);if(ce(a)){const{m:e}=a.value;return u(h(Y,m(f(e))))}const o=(e=>{if(e.length<1)return Y;const[n,...r]=e;if("string"===n.kind){const e=J((e=>Yn(e.value)))(n);return re((e=>({prim:e.value,rest:r})))(e)}return Y})(e);if(ce(o)){const{prim:e,rest:n}=o.value;return u(h(Kn(e),Zn(n)))}return u(h(Y,Zn(e)))},r=e=>"array"===e.kind?Ze(r)(e.value):[e];return"null"===e.kind?w({kind:"bottom"}):w(n(r(e)))}function Yn(e){const n=e.split("");if(!0==(0===n.length))return!1;{const[e,...r]=n;return-1!=="bpmvn".indexOf(e)&&r.every((e=>-1!=="bpmvn0123456789.".indexOf(e)))}}function Wn(e){const n=e.split("");switch(!0){case 0===n.length:return!1;case"w"===n[0]&&void 0===n[1]:return!0;default:{const[e,...r]=n;return-1!=="ux".indexOf(e)&&-1===r.map((e=>!isNaN(parseInt(e)))).indexOf(!1)}}}function Jn(e,n,r){switch(e.kind){case"string":return m(r({1:W(e.value),2:n}));case"number":case"null":return _(r({1:"null"===e.kind?Y:W(e.value),2:In(Mn(n,(([e,n])=>[Number(e),n])),(e=>!isNaN(e[0])))}));default:return"{bad cutoff}"}}function Qn(e){const n=e=>n=>g(n[2],n[1],e),r=e=>n=>p(n[2],n[1],e),t=e.split("");switch(!0){case"w"===t[0]&&void 0===t[1]:return e=>d(e[2],e[1]);case"u"===t[0]&&void 0===t[1]:return n(1);case"u"===t[0]&&void 0!==t[1]:return n(parseInt(t.slice(1).join("")));case"x"===t[0]&&void 0===t[1]:return r(1);case"x"===t[0]&&void 0!==t[1]:return r(parseInt(t.slice(1).join("")));default:throw new Error("This should never happen if you use isGroupCommand")}}function Kn(e){const n=e=>ue(e.bound)||"add"===e.operation||"mul"===e.operation?W(e):Y,r=(e,r,t)=>{const a=((e,r)=>(0,Fn.zG)(e,(e=>{switch(e){case"p":return W("add");case"m":return W("mul");case"v":return W("max");case"n":return W("min");default:return Y}}),re((e=>({operation:e,bound:r}))),oe(n)))(e,t);return re((e=>{const{init:n,rest:t}=Be((e=>{return"number"==typeof(n=parseInt(e))&&isFinite(n)&&Math.floor(n)===n;var n}))(r);return{1:{1:e,2:0===n.length?1:parseInt(n.join(""))},2:t.join("")}}))(a)};return re(s)(Me(Xn(e,(e=>{const n=e.split("");if(0===n.length)return Y;const[t,...a]=n;if("b"===t){const{init:e,rest:n}=(0,Fn.zG)(a,Be((e=>-1!=="1234567890.".indexOf(e))));if(0===e.length||0===n.length)return Y;const t=parseFloat(e.join("")),[o,...i]=n;return r(o,i,W(t))}return r(t,a,Y)}))))}function Xn(e,n){const r=n(e);return pe((()=>[]))(re((e=>[e[1]].concat(Xn(e[2],n))))(r))}function Zn(e){return b(e.map(er))}function er(e){switch(e.kind){case"number":return u(e.value);case"string":return l(e.value);case"null":return{kind:"bottom"};case"object":return l("{object}");case"array":return l("{array}")}}function nr(e,n,r){return function(t){for(var a=Array(r.length+1),o=0;o<r.length;o++)a[o]=r[o];return a[r.length]=t,0===n?e.apply(null,a):nr(e,n-1,a)}}var rr={1:function(e){return[e]},2:function(e){return function(n){return[e,n]}},3:function(e){return function(n){return function(r){return[e,n,r]}}},4:function(e){return function(n){return function(r){return function(t){return[e,n,r,t]}}}},5:function(e){return function(n){return function(r){return function(t){return function(a){return[e,n,r,t,a]}}}}}};function tr(e){return B.call(rr,e)||(rr[e]=nr(E,e-1,[])),rr[e]}function ar(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var t=n.length,a=tr(t),o=e.map(n[0],a),i=1;i<t;i++)o=e.ap(o,n[i]);return o}}const or={strategy:(e,n,r)=>t=>{if(ue(r))return n;if("delta"===e&&ue(n))return Y;if(ue(n))return r;if(ce(n)&&ce(r))return t(n.value,r.value);throw new Error("Non exhaustive match in combineCommand.strategy")},operation:(e,n,r,t,a,o)=>{const i=sn(D(o)),s=M(n.bound,fe((()=>v),(e=>n=>L(o)(a.fromNumber(e),n))));if("append"===e&&"add"===n.operation)return Je(r,t,pr("append",q(a.plus,s)));if("append"===e&&"mul"===n.operation)return Je(r,t,pr("append",q(a.times,s)));if("append"===e&&"max"===n.operation)return j(i)(r,t);if("join"===e&&"add"===n.operation)return Je(r,t,pr("join",j(o)));if("join"===e&&"mul"===n.operation)return Je(r,t,pr("join",j(o)));if("join"===e&&"max"===n.operation)return j(i)(r,t);if("min"===n.operation)return or.operation(e,{operation:"max",bound:n.bound},r,t,a,function(e){return S(((n,r)=>yn(e.compare(n,r))))}(o));if("delta"===e&&"max"===n.operation)return A(i)(r,t)?r:t.map(c);if("delta"===e)return Je(r,t,((e,n)=>A(D(o))(e,n)?G(e,s):{kind:"bottom"}));throw new Error("Non exhaustive match in combineCommand.operation")},extend:(e,n,r,t)=>{if("delta"===e&&"top"===r.kind&&"top"===t.kind)return A(O)(r.error,t.error)?l(r.error):{kind:"bottom"};if("delta"===e&&"bottom"===t.kind)return r;if("delta"===e&&"bottom"===r.kind)return{kind:"bottom"};if("top"===r.kind&&"top"===t.kind)return l(j(O)(r.error,t.error));if("top"===r.kind)return r;if("top"===t.kind)return t;if("inner"===r.kind&&"inner"===t.kind)return n(r.a,t.a);if("bottom"===r.kind)return t;if("bottom"===t.kind)return r;throw new Error("Non exhaustive match in extend")}},ir={fromNumber:v,plus:(e,n)=>e+n,times:(e,n)=>e*n};function sr(e,n,r,t){if("unbounded"===e.kind&&"unbounded"===n.kind){const a=e.group,o=n.group;return pe(c)(re((e=>u(f(e))))(qn(a,o,r,t)))}if("windowed"===e.kind&&"windowed"===n.kind){const a=e.key,o=e.group,i=n.key,s=n.group,l=j(ne(t))(a,i);return pe(c)(re((e=>u(d(e,l))))(qn(o,s,r,t)))}if("countLimit"===e.kind&&"countLimit"===n.kind){const a=e.n,o=n.n;if(a===o){const o=e.limit,i=e.group,s=n.limit,l=n.group,f=j(ne(t))(o,s);return pe(c)(re((e=>u(p(e,f,a))))(qn(i,l,r,t)))}return l("Non matching counts")}if("uniqueLimit"===e.kind&&"uniqueLimit"===n.kind){const a=e.n,o=n.n;if(a===o){const o=e.limit,i=e.group,s=n.limit,l=n.group,f=j(ne(t))(o,s);return pe(c)(re((e=>u(g(e,f,a))))(qn(i,l,r,t)))}return l("Non matching counts")}return l("Non matching group types")}function cr(e,n,r,t,a,o){const i=(e,n)=>({1:Ne(e)(n).concat(Re(Math.max(0,e-n.length),c)),2:Fe(e)(n)}),s=(n,r,t)=>{if(0===n.length)return or.operation(e,{operation:"max",bound:Y},r,t,a,o);if(n.length>0){const[c,...u]=n,l=i(c[2],r),f=l[1],d=l[2],p=i(c[2],t),g=p[1],_=p[2];return or.operation(e,c[1],f,g,a,o).concat(s(u,d,_))}throw new Error("Non exhaustive match in recurse")};return Ye((u=e=>"bottom"===e.kind,function(e){return e.slice(He(e,u))})(Ye(s(n,r,t))));var u}function ur(e,r,t){return pe(n)(lr(e,Y)(r,t))}function lr(e,n){const r=n=>(r,t)=>or.strategy(e,r,t)(lr(e,n)),t=(n,t,a)=>{if("stringGroup"===t.kind&&"stringGroup"===a.kind){const e=sr(t.group,a.group,r(n),O);return G(e,(e=>m(dr(e,O))))}if("numberGroup"===t.kind&&"numberGroup"===a.kind){const e=sr(t.group,a.group,r(n),Le);return G(e,(e=>_(dr(e,Le))))}if("tuple"===t.kind&&"tuple"===a.kind){const r=ce(n)?n.value:[];return u(b(cr(e,r,t.tuple,a.tuple,ir,Le)))}throw new Error(`Non matching payload. Got ${t.kind} and ${a.kind}`)},a=(e,r)=>{if(ee(Te(z({1:z({operation:C,bound:ee(Ae)}),2:Ae}))).equals(e.commands,r.commands)){const a=ue(e.commands)?n:e.commands,o=t(a,e.payload,r.payload);return G(o,(n=>h(e.commands,n)))}if(a=e.commands,o=r.commands,ee(Te(z({1:z({operation:C}),2:Ae}))).equals(a,o)){const a=M(((e,n)=>M(ar(ae)(e,n),re((([e,n])=>xe(e,n,((e,n)=>({1:{operation:e[1].operation,bound:M(ar(ae)(e[1].bound,n[1].bound),re((([e,n])=>Math.min(e,n))),ie((()=>e[1].bound)),ie((()=>n[1].bound)))},2:e[2]})))))))(e.commands,r.commands),ie((()=>n))),o=t(a,e.payload,r.payload);return G(o,(e=>h(a,e)))}throw new Error(`Non matching primitive strings. Got ${On(e)} and ${On(r)}`);var a,o};return(n,r)=>Gn(w(or.extend(e,a,$n(n).state,$n(r).state)))}function fr(e,n,r){const t=re((n=>In(e,(([e,t])=>function(e){return function(n,r){return-1!==e.compare(n,r)}}(r)(e,n)))))(n);return pe((()=>e))(t)}function dr(e,n){switch(e.kind){case"unbounded":return e;case"windowed":return ue(e.key)?e:d(fr(e.group,e.key,n),e.key);case"countLimit":{const r=e.limit,t=e.n,a=e.group,o=(e,n)=>n<=1?Y:W(n-1),i=En(t,a,o,n),s=j(ne(n))(r,i);return p(fr(a,s,n),s,t)}case"uniqueLimit":{const r=e.limit,t=e.n,a=e.group,o=(e,n)=>{if("object"===e.kind){const r=[...e.value.keys(),...n.keys()],a=new Set(r);return a.size>=t?Y:W(a)}return Y},i=En(new Set,a,o,n),s=j(ne(n))(r,i);return g(fr(a,s,n),s,t)}}}function pr(e,n){return(r,t)=>or.extend(e,((e,r)=>u(n(e,r))),r,t)}function gr(e,n){return ur("append",e,n)}function _r(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.reduce(((e,n)=>Object.assign(Object.assign({},e),n)),{})}$((function(e){return 0===e.length}));function mr(e,n){const r=Object.keys(e),t=r.length,a={};for(let o=0;o<t;o++){const t=r[o],i=n(t,e[t]);ce(i)&&(a[t]=i.value)}return a}const br=e=>n=>{if("number"==typeof n)return n;if("string"==typeof n){const r=e(n);return Number.isNaN(r)?void 0:r}};br(parseInt),br(parseFloat);function wr(e){var n;return["SegmentEntry","SegmentExit"].includes(e.name)&&void 0!==(null===(n=e.properties)||void 0===n?void 0:n.segment_number)}const hr="process";let vr=!1,yr=[],kr=!1;const qr={};let Er={getCurrentTime:()=>new Date,getCurrentSession:()=>"",getCurrentView:()=>"",getSegments:()=>({}),get1PSegments:()=>({}),get3PSegments:()=>({}),getSegmentsArray:()=>({}),getLookalikeModels:()=>({}),setSegmentActivation:()=>{}};const Mr=()=>{const e=Ar.concat(Er.get1PSegments(),Er.get3PSegments()),n=Pr(e);Er.getSegments=()=>e,Er.getSegmentsArray=()=>n};function Ir(e,n,r,t,a,o,i){vr=!1,yr=[],kr=!1;const s=M(t.thirdPartydata,fe((()=>t.segments),(e=>Ar.concat(t.segments,e)))),c=Pr(s);Er={getCurrentTime:()=>new Date,getCurrentSession:()=>t.sessionId,getCurrentView:()=>t.viewId,get1PSegments:()=>t.segments,get3PSegments:()=>M(t.thirdPartydata,pe((()=>({})))),getSegments:()=>s,getSegmentsArray:()=>c,getLookalikeModels:()=>M(t.lookalikeModels,pe((()=>({})))),setSegmentActivation:(e,n)=>{}},kr=ce(t.lookalikeModels),vr=ce(t.thirdPartydata);const u=mr(n,((n,r)=>{var t;return(null===(t=e[n])||void 0===t?void 0:t.checksum)===r?Y:W(((e,n)=>{const r=o[e].interpret(null,Er);return Object.assign({checksum:n},!1===r.result?{}:{result:r})})(n,r))}));if(0===a.length)return{diff:Object.assign(Object.assign({},e),u),errors:[]};if(0===Object.keys(u).length)return{diff:e,errors:[]};{const t=xr(u,n,r,a,"bootstrap",o,i);return{diff:Object.assign(Object.assign({},e),t.diff),errors:t.errors}}}function zr(e,n,r,t,a,o){(e=>{const n=Object.assign({},e);delete n["1p"],Er.get3PSegments=()=>n})(t),Mr(),Er.setSegmentActivation=Tr(e,n),vr=!0;const i=xr(e,n,r,yr.length>0?yr:[qr],"updateTPD",a,o);return yr=[],i}function xr(e,n,r,t,a,o,i){let s={diff:{},errors:[]};const c=t.length,u=()=>t.filter((e=>{return n=i["!UpdateLookalikeModels"]||[],wr(r=e)&&n.includes(r.properties.segment_number.toString());var n,r})).length===t.length?"lookalikeTransition":"transition",l=(e,n,r)=>"transition"===e?r===n-1?u():"event":e;for(let u=0;u<c;u++){const f=t[u],d=l(a,c,u),p=Sr(Object.assign(Object.assign({},e),s.diff),n,r,f,d,o,i);s={diff:Object.assign(Object.assign({},s.diff),p.diff),errors:s.errors.concat(p.errors)}}return s}function Sr(r,t,a,o,i,s,c){var u;"bootstrap"!==i&&(Er.setSegmentActivation=Tr(r,t));const l=n,f=(n,r)=>{const t=s[n],i=t.lift(o,Er),c=q(Sn,hn(l)),u=c(r.state||null),f=c(i),d=M(vn((()=>gr(u,f)),e),wn((n=>{throw e(`Failed to append lifted event ${zn(f)} to internal state ${zn(u)}. Got ${n}`)}))),p=M(a[n],J(Boolean),re(c)),[g,_]=M(p,de((()=>E(d,!1)),(e=>M(vn((()=>E(gr(d,e),!1)),k),hn((()=>E(d,!0))))))),m=xn(d),b=t.interpret(xn(g),Er),w=r.activations||{};return Object.assign(Object.assign(Object.assign(Object.assign({checksum:r.checksum},null===m?{}:{state:m}),!1===b.result?{}:{result:b}),0===Object.keys(w).length?{}:{activations:w}),!1===_?{}:{dropExternalState:_})},d={diff:{},errors:[]},p=function(e,n,r,t,a){switch(e){case"event":const e=(null==a?void 0:a[t.name])||[];if(vr)return e;{yr.push(t);const n=[...a["!UpdateSecondPartyData"]||[],...a["!UpdateThirdPartyData"]||[]];return Xe(C)(e,n)}case"lookalikeTransition":return(null==a?void 0:a[t.name])||[];case"transition":const o=(null==a?void 0:a[t.name])||[];if(kr){const e=a["!UpdateLookalikeModels"]||[];return o.concat(e)}return o;case"bootstrap":const i=((null==a?void 0:a[t.name])||[]).filter((e=>void 0!==n[e]));return Xe(C)(i,[...vr?[]:(a["!UpdateSecondPartyData"]||[]).concat(a["!UpdateThirdPartyData"]||[]),...kr?[]:a["!UpdateLookalikeModels"]||[]]);case"updateExternalState":return Object.keys(r);case"updateLAL":return a["!UpdateLookalikeModels"]||[];case"updateTPD":return[...a["!UpdateSecondPartyData"]||[],...a["!UpdateThirdPartyData"]||[]];default:return[]}}(i,r,a,o,c),g=p.length;!function(e){wr(e)&&((e=>{const n=Er.get1PSegments(),r={"1p":Object.assign(Object.assign({},n["1p"]),e["1p"])};Er.get1PSegments=()=>r})({"1p":{[e.properties.segment_number]:"SegmentEntry"===e.name}}),Mr())}(o);for(let e=0;e<g;e++){const n=p[e],a=r[n]||{checksum:t[n]};let o=a;try{o=f(n,a)}catch(e){d.errors.push(`Failed to interpret query ${n}. Got ${e}`)}o.dropExternalState&&(null!==(u=d.externalStateToDrop)&&void 0!==u||(d.externalStateToDrop={}),d.externalStateToDrop[n]=!0),d.diff[n]=o}return d}function Tr(e,n){return(r,t,a)=>{if(!(a in e)){const r=n[a];if(void 0===r)throw new Error("Checksum not in internalStateMap");e[a]={checksum:r}}"activations"in e[a]||(e[a].activations={});const o=e[a].activations;r in o||(o[r]=[]);const i=o[r];i.includes(t)||(o[r]=[...i,t])}}function Pr(e){return Object.keys(e).reduce(((n,r)=>{const t=Object.keys(e[r]),a=[];return t.forEach((n=>{!0===e[r][n]&&a.push(n)})),n[r]=a,n}),{})}const Ar={empty:{},concat:(e,n)=>{const r=Object.assign({},e);for(const[e,t]of Object.entries(n))r[e]?r[e]=_r(r[e],t):r[e]=t;return r}};const Lr=(e,n)=>{const r=function(e){for(var r=arguments.length,t=new Array(r>1?r-1:0),a=1;a<r;a++)t[a-1]=arguments[a];return[e.stateMap,...e.payload,...t,n.rawQueries,n.queriesByEvent]};return"bootstrap"===e.type?Ir(...r(e)):"updateLAL"===e.type?function(e,n,r,t,a,o){return Er.getLookalikeModels=()=>t,kr=!0,Sr(e,n,r,qr,"updateLAL",a,o)}(...r(e)):"updateTPD"===e.type?zr(...r(e)):"updateExternalState"===e.type?function(e,n,r,t,a){return Sr(e,n,r,qr,"updateExternalState",t,a)}(...r(e)):e.type===hr?xr(...r(e,"event")):"processTransitions"===e.type?function(e,n,r,t,a,o){return xr(e,n,r,t,"transition",a,o)}(...r(e)):{diff:{},errors:[]}};const jr=function(){var e=this&&this.__assign||function(){return e=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var a in n=arguments[r])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},e.apply(this,arguments)},n=this&&this.__values||function(e){var n="function"==typeof Symbol&&Symbol.iterator,r=n&&e[n],t=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},r=this&&this.__read||function(e,n){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var t,a,o=r.call(e),i=[];try{for(;(void 0===n||n-- >0)&&!(t=o.next()).done;)i.push(t.value)}catch(e){a={error:e}}finally{try{t&&!t.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return i},t=this&&this.__spreadArray||function(e,n,r){if(r||2===arguments.length)for(var t,a=0,o=n.length;a<o;a++)!t&&a in n||(t||(t=Array.prototype.slice.call(n,0,a)),t[a]=n[a]);return e.concat(t||Array.prototype.slice.call(n))},a=function(){function a(e){return"number"==typeof e?o[e]:e}function f(e){return"number"==typeof e?i[e]:e}function d(e){return"number"==typeof e?s[e]:e}function p(e){switch(e.length){case 0:return null;case 1:return e[0];default:return e}}function g(e,n,r){void 0===r&&(r=b);var t=d(n).reduce((function(e,n){return e&&null!=e[n]?e[n]:null}),e);return null===t?null:r(t)}function _(e,n){var r=d(n).slice();return r.unshift(e),r}function m(e,n,r){return void 0===r&&(r=b),g(e,_("properties",n),r)}var b=function(e){return e},w=function(e){return!0};function h(e,n){return function(r){for(var t=0;t<e.length;t++){if((e[t](r)||!1)===n)return n}return!n}}var v=function(e){return function(n){return!e(n)}},y=function(e,n){return function(r){return r>=e&&r<=n}},k=function(e){return new Date(e).getTime()},q=function(e){return g(e,["time"],k)},E=function(e,n){return g(n,e,k)},M=function(e,n,r,t,a,o){return function(i){var s=g(i,e,(function(e){return e.filter(t).map((function(e){return g(e,n)})).reduce(a,o)}));return r(null===s?o:s)}};function I(e,r,t,a){var o,i;try{for(var s=n(e),c=s.next();!c.done;c=s.next()){var u=c.value;if(t(u)&&r(u)===a)return a}}catch(e){o={error:e}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}return!a}var z=function(e){return function(n){return("string"==typeof e||"number"==typeof e)&&"string"==typeof n&&n.toLowerCase().indexOf(f(e).toLowerCase())>-1}},x=function(e){return function(n){return null!=n&&Array.isArray(n)&&n.indexOf(e)>=0}};function S(e,n,r,t,a){var o=g(e.getSegments(),[n,r])||!1;return a&&(t||o)&&e.setSegmentActivation(n,r,a),o}function T(e,n,r){return g(e.getSegments(),[n,r])||!1}function P(e,n,t){return void 0===t&&(t=18e5),function(a){return{a:{m:function(e,n){return[n[0],a.a.m(null!=e[0]&&e[0][0]===n[0][0]?e[1]:a.a.z,n[1])]},z:[[],a.a.z]},p:function(r,t){return[[e(r)],g(t,n)===e(r)?a.p(r,t):a.a.z]},r:function(n,r){return a.r(n,0!==r[0].length&&r[0][0]===e(n)?r[1]:a.a.z)},d:a.d.sq||{l:function(o,i){var s=g(o,n),c=e(i);if(s!==c)return null;var u=a.d.l(o,i);if(!(Array.isArray(u)&&u.length>1))return null;var l=r(u),f=l[0],d=l.slice(1),p=+(q(o)||i.getCurrentTime()),_=Math.floor(p/t),m={};return m[_]={},m[_][c]=1===d.length?d[0]:d,[f,"u",null,m]},i:function(n,r){if(!Array.isArray(n)||"object"!=typeof n[3])return[[],a.a.z];var t=e(r),o=n[3];return[[t],Object.keys(o).map((function(e){return o[e][t]})).filter((function(e){return e})).map((function(e){return a.d.i([n[0]].concat(e))})).reduce(a.a.m,a.a.z)]}}}}}var A=P((function(e){return e.getCurrentSession()}),["session_id"],18e5),L=P((function(e){return e.getCurrentView()}),["view_id"],3e5);function j(e,n,o,i){return void 0===i&&(i=1),{a:{m:function(e,n){return e.concat(n).slice(-o)},z:[]},p:function(r,t){return g(t,["name"])===a(n)?[e.p(r,t)]:[]},r:function(n,r){return e.r(n,r.reduce((function(n,r){return e.a.m(n,r)}),e.a.z))},d:e.d.ftn||{l:function(n,r){var t,a=e.d.l(n,r),s=g(n,["time"],k)*i;return a&&[a[0],"x"+o,null,(t={},t[s]=2==a.length?a[1]:a.slice(1),t)]},i:function(n,a){return n?Object.keys(n[3]||{}).sort().reverse().map((function(e){return Array.isArray(e)?t([n[0]],r(n[3][e]),!1):[n[0],n[3][e]]})).map((function(n){return e.d.i(n,a)})):[]}}}}var C=function(e,n){return null===e?null==n?null:{b:n}:null==n?{a:e}:{a:e,b:n}},O=function(e,n){return e&&n?e(n):null},G=function(e,n,r){if(r&&r.result&&Array.isArray(r.result)){var t=O(e.d&&e.d.m,{result:r.result[0]}),a=O(n.d&&n.d.m,{result:r.result[1]});return C(t,a)}return null};function D(e,n){var r=c[e];if(!n||!r)return!1;if(!r.length)return!0;for(var t=0,a=!1,o=function(e){for(var n=[],r=0;r<e.length;++r){var t=e.charCodeAt(r);if(t>=55296&&t<=56319){var a=e.charCodeAt(r+1);if(a>=56320&&a<=57343){n.push(e.slice(r,r+2)),++r;continue}}n.push(e.charAt(r))}return n}(n.toLowerCase()),i=0;i<o.length;i++){for(var s=o[i];t>0&&!r[t][s];)t=r[t].su?r[t].su:0;if(r[t][s]&&(a=!!r[t=r[t][s]].te))break}return a}return{q:function(e){return{lift:function(n,r){return e.d.l(n,r)},interpret:function(n,r){return function(n,r){return{result:e.r(n,r)}}(r,e.d.i(n,r))},migrate:function(n){return n&&e.d.m?e.d.m(n):null},m:e.a.m,z:e.a.z,p:e.p,r:e.r,i:e.d.i}},a:function(e){return h(e,!1)},acq:function(e,n){return{p:function(r,t){return[e.p(r,t),n.p(r,t)]},r:function(r,t){return e.r(r,t[0])&&n.r(r,t[1])},a:{z:[e.a.z,n.a.z],m:function(r,t){return[e.a.m(r[0],t[0]),n.a.m(r[1],t[1])]}},d:{l:function(r,t){return C(e.d.l(r,t),n.d.l(r,t))},i:function(r,t){return r?[e.d.i(r.a||null,t),n.d.i(r.b||null,t)]:[e.a.z,n.a.z]},m:function(r){return G(e,n,r)}}}},acs:D,acs_:function(e,n){return function(r){return D(n,g(r,e))}},af_i:function(e,n,r){return void 0===r&&(r=w),function(t){return g(t,e,(function(e){return I(e,n,r,!1)}))&&!0}},af_l:function(e,n,r){return void 0===r&&(r=w),function(t){var a=g(t,e,(function(e){return e.filter(r).length}));return n(null===a?0:a)}},af_m:function(e,n,r,t){return void 0===t&&(t=w),function(a){var o=g(a,e,(function(e){return e.filter(t)}));return null===o||0===o.length?r(0):r(o.map((function(e){return g(e,n)})).reduce((function(e,n){return e+n}),0)/o.length)}},af_n:function(e,n,r,t){return void 0===t&&(t=w),M(e,n,r,t,(function(e,n){return Math.min(e,n)}),Number.POSITIVE_INFINITY)},af_p:function(e,n,r,t){return void 0===t&&(t=w),M(e,n,r,t,(function(e,n){return e*n}),1)},af_s:function(e,n,r,t){return void 0===t&&(t=w),M(e,n,r,t,(function(e,n){return e+n}),0)},af_u:function(e,n,r){return void 0===r&&(r=w),function(t){return g(t,e,(function(e){return I(e,n,r,!0)}))||!1}},af_x:function(e,n,r,t){return void 0===t&&(t=w),M(e,n,r,t,(function(e,n){return Math.max(e,n)}),Number.NEGATIVE_INFINITY)},as:function(e,n,r){var t=_("properties",n);return function(n){for(var a=g(n,t),o=r.length,i=!0,s=0;s<o;s++){var c=r[s];if(!(i=e(c)(a)))break}return i}},c:x,c_:function(e,n){return function(r){return x(n)(g(r,e))}},cl_:function(e,n){return function(r){return x(f(n))(g(r,e))}},cx:function(e){return function(n){return x(f(e))(n)}},ctu:function(e,n,r,t){return{a:t?{m:function(e,n){return e.filter((function(e){return-1===n.indexOf(e)})).concat(n).slice(-t)},z:[]}:{m:function(e,n){return e.filter((function(e){return-1===n.indexOf(e)})).concat(n)},z:[]},p:function(t,o){return g(o,["name"])===a(e)&&n(o)?g(o,r):[]},r:function(e,n){return n},d:{l:function(){return null},i:function(){return[]}}}},ctv:function(n,r,t,o){function i(e,n){var r,t=function(e){return{k:e.k,c:1+e.c}},a={arr:[],add:{k:n,c:1}};return n?(r=e.reduce((function(e,n){return e.add.k===n.k?{arr:e.arr,add:t(n)}:{arr:e.arr.concat(n),add:e.add}}),a)).arr.concat(r.add):e}return{a:o?{m:function(e,n){return i(e,n).slice(-o)},z:[]}:{m:function(e,n){return i(e,n)},z:[]},p:function(e,o){return g(o,["name"])===a(n)&&r(o)?g(o,t):null},r:function(n,r){return r.reduce((function(n,r){var t;return e(e({},n),((t={})[r.k]=r.c,t))}),{})},d:{l:function(e){return null},i:function(e){return[]}}}},ctw:function(e,n,r,t){return{a:t?{m:function(e,n){return e.concat(n).slice(-t)},z:[]}:{m:function(e,n){return e.concat(n)},z:[]},p:function(t,o){return g(o,["name"])===a(e)&&n(o)?g(o,r):[]},r:function(e,n){return n},d:{l:function(){return null},i:function(){return[]}}}},cw:function(e,n,r){return void 0===r&&(r=b),{a:{m:function(e,n){return e+n},z:0},p:function(r,t){return g(t,["name"])===a(e)&&n(t)?1:0},r:function(e,n){return r(n)},d:{l:function(r){return g(r,["name"])===a(e)&&n(r)?["p",1]:null},i:function(e){return e?Array.isArray(e)?e.slice(-1)[0]:e:0},m:function(e){return e&&e.result?["p",e.result]:null}}}},cb:function(e,n,r,t){return{a:{m:function(e,n){return Math.min(e+n,t)},z:0},p:function(r,t){return g(t,["name"])===a(e)&&n(t)?1:0},r:function(e,n){return r(n)},d:{l:function(r){return g(r,["name"])===a(e)&&n(r)?["b".concat(t,"p"),1]:null},i:function(e){return e?Array.isArray(e)?e.slice(-1)[0]:e:0},m:function(e){return e&&e.result?["b".concat(t,"p"),Math.min(t,e.result)]:null}}}},e:function(e){return function(n){return n===e}},e_:function(e,n){return function(r){return g(r,e)===n}},fm:function(e,n){return{p:n.p,r:function(r,t){return e(n.r(r,t))},a:n.a,d:n.d}},ftn:function(e,n,r){return{a:{m:function(e,n){return e.concat(n.slice(0,r-e.length))},z:[]},p:function(r,t){return g(t,["name"])===a(n)?[e.p(r,t)]:[]},r:function(n,r){return e.r(n,r.reduce((function(n,r){return e.a.m(n,r)}),e.a.z))},d:j(e,n,r,-1).d}},fw:function(e,n,r,t){return void 0===t&&(t=b),{a:{m:function(e,n){return null===e?n:e},z:null},p:function(t,o){return g(o,["name"])===a(e)&&n(o)?g(o,r):null},r:function(e,n){return n},d:{l:function(r){return g(r,["name"])===a(e)&&n(r)?["p",1]:null},i:function(e){return e?Array.isArray(e)?e.slice(-1)[0]:e:0},m:function(e){return e&&e.result?["p",e.result]:null}}}},g:function(e){return function(n){return n>e}},g_:function(e,n){return function(r){return g(r,e)>n}},gb:function(e,n,r){return{a:{m:function(r,t){var a=Object.keys(r).concat(Object.keys(t)).filter((function(e,n,r){return r.indexOf(e)===n})).sort((function(e,n){return Math.max(g(r,[n,1]),g(t,[n,1]))-Math.max(g(r,[e,1]),g(t,[e,1]))})).slice(0,n).reduce((function(n,a){var o=e.a.m(g(r,[a,0])||e.a.z,g(t,[a,0])||e.a.z);return n[a]=[o,Math.max(g(r,[a,1]),g(t,[a,1]))],n}),{});return a},z:{}},p:function(n,t){var a,o,i=g(t,_("properties",r)),s=e.p(n,t);return null==i||(null==(o=s)||"object"==typeof o&&0===Object.keys(o).length||o===e.a.z)?{}:((a={})[i]=[s,g(t,["time"],k)],a)},r:function(n,r){var t={};return Object.keys(r).forEach((function(a){return t[a]=e.r(n,r[a][0])})),t},d:{l:function(){return null},i:function(){return{}}}}},ge:function(e){return function(n){return n>=e}},ge_:function(e,n){return function(r){return g(r,e)>=n}},i_:b,ifp:function(e){return{a:{m:function(e,n){return n},z:null},p:function(e){return null},r:function(n,r){return function(n){return T(n,"1p",e)}(n)},d:{l:function(e,n){return null},i:function(e){return null}}}},isp:function(e,n,r,t){return{a:{m:function(e,n){return n},z:!1},p:function(r,t){return T(r,e,n)},r:function(a,o){return S(a,e,n,r,t)},d:{l:function(e,n){return null},i:function(e){return Array.isArray(e)&&(!!+e[2]||!1)}}}},itp:function(e,n,r,t){return{a:{m:function(e,n){return n},z:!1},p:function(r,t){return T(r,e,n)},r:function(a,o){return S(a,e,n,r,t)},d:{l:function(e,n){return null},i:function(e){return Array.isArray(e)&&(!!+e[2]||!1)}}}},k:g,l:function(e){return function(n){return n<e}},l_:function(e,n){return function(r){var t=g(r,e);return null!==t&&t<n}},le:function(e){return function(n){return n<=e}},le_:function(e,n){return function(r){var t=g(r,e);return null!==t&&t<=n}},lm:function(e,n){var r=function(n){return function(e,n,r){if(void 0===n[r])return NaN;var t=e||{};if(0==(t["1p"]||[]).length)return NaN;var a,o=n[r]||{},i=(o["1p"]||{}).const||0;return Object.keys(t).forEach((function(e){t[e].forEach((function(n){var r=(o[e]||{})[n]||0;i+=r}))})),a=i,1/(1+Math.pow(Math.E,-a))}(n.getSegmentsArray(),n.getLookalikeModels(),e)};return{a:{m:function(e,n){return n},z:null},p:function(e){return null},r:function(e,t){return n(r(e))},d:{l:function(e,n){return null},i:function(e){return null}}}},ltn:j,mnw:function(e,n,r,t){void 0===t&&(t=b);var o=Number.POSITIVE_INFINITY;return{a:{m:function(e,n){return e<n?e:n},z:o},p:function(t,i){return g(i,["name"])===a(e)&&n(i)?g(i,r):o},r:function(e,n){return t(n)},d:{l:function(t){return g(t,["name"])===a(e)&&n(t)?["n",g(t,r)]:null},i:function(e){return e?Array.isArray(e)?e.slice(-1)[0]:e:o}}}},mxw:function(e,n,r,t){void 0===t&&(t=b);var o=Number.NEGATIVE_INFINITY;return{a:{m:function(e,n){return e>n?e:n},z:o},p:function(t,i){return g(i,["name"])===a(e)&&n(i)?g(i,r):o},r:function(e,n){return t(n)},d:{l:function(t){return g(t,["name"])===a(e)&&n(t)?["v",g(t,r)]:null},i:function(e){return e?Array.isArray(e)?e.slice(-1)[0]:e:o}}}},n0:v(b),n:function(e){return function(n){return n!==e}},nt:v,n_:function(e,n){return function(r){return g(r,e)!==n}},o:function(e){return h(e,!0)},ocq:function(e,n){return{p:function(r,t){return[e.p(r,t),n.p(r,t)]},r:function(r,t){return e.r(r,t[0])||n.r(r,t[1])},a:{z:[e.a.z,n.a.z],m:function(r,t){return[e.a.m(r[0],t[0]),n.a.m(r[1],t[1])]}},d:{l:function(r,t){return C(e.d.l(r,t),n.d.l(r,t))},i:function(r,t){return r?[e.d.i(r.a||null,t),n.d.i(r.b||null,t)]:[e.a.z,n.a.z]},m:function(r){return G(e,n,r)}}}},oe:function(e){for(var n=Object.keys(e),r=n.length,t=new Array(r);r--;)t[r]=[n[r],e[n[r]]];return t},os:function(e,n,r){var t=_("properties",n);return function(n){for(var a=g(n,t),o=r.length,i=!1,s=0;s<o;s++){var c=r[s];if(i=e(c)(a))break}return i}},pacs:function(e,n){return function(r){return D(n,m(r,e))}},pb:function(e,n,r){return function(t){return y(n,r)(m(t,e))}},pc:function(e,n){return function(r){var t=m(r,e);return null!=t&&Array.isArray(t)&&t.indexOf(n)>=0}},pc_:function(e,n){return function(r){var t=m(r,e),a=f(n);return null!=t&&Array.isArray(t)&&t.indexOf(a)>=0}},pe:function(e,n){return function(r){return m(r,e)===n}},pg:function(e,n){return function(r){return m(r,e)>n}},pge:function(e,n){return function(r){return m(r,e)>=n}},pl:function(e,n){return function(r){var t=m(r,e);return null!==t&&t<n}},ple:function(e,n){return function(r){var t=m(r,e);return null!==t&&t<=n}},pn:function(e,n){return function(r){return m(r,e)!==n}},ps:function(e,n){return function(r){return z(n)(m(r,e))}},pw:function(e,n,r,t){return void 0===t&&(t=b),{a:{m:function(e,n){return e*n},z:1},p:function(t,o){return g(o,["name"])===a(e)&&n(o)?g(o,r):1},r:function(e,n){return t(n)},d:{l:function(t){return g(t,["name"])===a(e)&&n(t)?(o=g(t,r))>=1?["m2p",o]:o>0?["m2p",null,1/o]:0==o?["m2p",0]:o>-1?["m2p",null,1/o,1]:["m2p",o,null,1]:null;var o},i:function(e){return e?Array.isArray(e)?0===(n=e.slice(1))[0]?0:Math.pow(-1,n[2]||0)*(n[0]||1)/(n[1]||1):e:1;var n}}}},r:function(e){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];return l[e].apply(l,t([],r(n),!1))},ref:function(e){return function(n){return u[e](n)}},s:z,s_:function(e,n){return function(r){return z(n)(g(r,e))}},scq:function(e,n,r){return void 0===r&&(r=b),{p:function(r,t){return[e.p(r,t),n.p(r,t)]},r:function(t,a){return r(e.r(t,a[0])+n.r(t,a[1]))},a:{z:[e.a.z,n.a.z],m:function(r,t){return[e.a.m(r[0],t[0]),n.a.m(r[1],t[1])]}},d:{l:function(r,t){return C(e.d.l(r,t),n.d.l(r,t))},i:function(r,t){return r?[e.d.i(r.a||null,t),n.d.i(r.b||null,t)]:[e.a.z,n.a.z]},m:function(r){return G(e,n,r)}}}},sq:A,dscq:function(n,r,t,o){var i="x".concat(o),s=function(e){return e?2===e.length?["p",i,"",e[1]]:e:null},c=function(e){var t,o=function(e){return g(e,["session_id"])}(e);return o&&g(e,["name"])===a(n)&&r(e)?["p",i,"",(t={},t[o]=1,t)]:null};return{a:{m:function(n,r){var t=s(n),a=s(r);return t?a?["p",i,"",e(e({},t[3]),a[3])]:t:a},z:null},p:function(e,n){return c(n)},r:function(e,n){var r=n&&n[3]&&"object"==typeof n[3]?Object.keys(n[3]).length:0;return t(r)},d:{l:function(e,n){return c(e)},i:function(e,n){return s(e)}}}},sw:function(e,n,r,t){return void 0===t&&(t=b),{a:{m:function(e,n){return e+n},z:0},p:function(t,o){return g(o,["name"])===a(e)&&n(o)?g(o,r):0},r:function(e,n){return t(n)},d:{l:function(t){return function(r){return g(r,["name"])===a(e)&&n(r)}(t)?(o=g(t,r))<0?["p2",null,-o]:["p2",o]:null;var o},i:function(e){return e?Array.isArray(e)?((n="p2"===e[0]?e.slice(1):e)[0]||0)-(n[1]||0):e:0;var n}}}},t:w,tb:function(e,n){return function(r){return y(e,n)(q(r))}},te:function(e){return function(n){return q(n)===e}},te_:function(e,n){return function(r){return E(e,r)===n}},tg:function(e){return function(n){return q(n)>e}},tg_:function(e,n){return function(r){return E(e,r)>n}},tge:function(e){return function(n){return q(n)>=e}},tge_:function(e,n){return function(r){return E(e,r)>=n}},ti:k,tl:function(e){return function(n){return q(n)<e}},tl_:function(e,n){return function(r){return E(e,r)<n}},tle:function(e){return function(n){return q(n)<e}},tle_:function(e,n){return function(r){return E(e,r)<n}},tn:function(e){return function(n){return q(n)!==e}},tn_:function(e,n){return function(r){return E(e,r)!==n}},tw:function(e,n,a){var o=a||100,i=Math.ceil(n/o),s=function(e){return Math.floor(e/i)},c=function(e,r,t){var a;return[s(e.getTime()-n),(a={},a[s(r)]=t,a)]},u=function(n,r){var t=Math.max(n[0],r[0]),a=Object.keys(n[1]).filter((function(e){return e>=t})).concat(Object.keys(r[1]).filter((function(e){return e>=t}))).filter((function(e,n,r){return r.indexOf(e)===n})).reduce((function(t,a){var o=e.a.m(n[1][a]||e.a.z,r[1][a]||e.a.z);return o!==e.a.z&&(t[a]=o),t}),{});return[t,a]},l=[Number.NEGATIVE_INFINITY,{}],f=function(e){var n=function(n){return n.map((function(n){var t=r(n,3),a=t[0],o=(t[1],t[2]);return c(e.t,o,a)})).reduce(u,l)};return u(n(e.in),n(e.out))},d=function(n){if(void 0!==n.result)return d(n.result);if(void 0!==n.w)return d(f(n));var t=r(n,2),a=(t[0],t[1]),o=null,i={};for(var s in a){var c=e.d.m({result:a[s]});c&&Array.isArray(c)&&(o=c[0],i[s]=p(c.slice(1)))}return o&&[o,"w",n[0],i]};return{a:{m:function(e,n){var r=e.w?f(e):e;return u(r,n)},z:l},p:function(n,r){return c(n.getCurrentTime(),g(r,["time"],k),e.p(n,r))},r:function(n,r){var t=(r.w?f(r):r)[1];return e.r(n,Object.keys(t).reduce((function(n,r){return e.a.m(n,t[r])}),e.a.z))},d:e.d.tw||{l:function(n,a){var o=e.d.l(n,a),i=e.d.i(o,a);return o&&t([o[0],"w"],r(c(a.getCurrentTime(),g(n,["time"],k),i)),!1)},i:function(e,r){var t=Array.isArray(e)?e:[],a=r.getCurrentTime(),o=s(a.getTime()-n);return[t[2]||null,Object.keys(t[3]||{}).map((function(e){var n;return(n={})[e]=t[3][e],n})).reduce((function(e,n){return Object.keys(n).filter((function(e){return parseInt(e)>=o})).forEach((function(r){return e[r]=n[r]})),e}),{})]},m:e.d.m&&d}}},vgw:function(e,n,r,t){void 0===t&&(t=b);var o={v:0,k:0};return{a:{m:function(e,n){var r=e.k+n.k;return{v:r?e.v+n.k*(n.v-e.v)/r:0,k:r}},z:o},p:function(t,i){return g(i,["name"])===a(e)&&n(i)?{v:g(i,r),k:1}:o},r:function(e,n){return t(n.v)},d:{l:function(t){return g(t,["name"])===a(e)&&n(t)?0==(o=g(t,r))?["p3",1]:o<0?["p3",1,null,-o]:["p3",1,o]:null;var o},i:function(e){return e?Array.isArray(e)?{v:(((n=e.slice(1))[1]||0)-(n[2]||0))/(n[0]||1),k:n[0]||0}:void 0:o;var n}}}},vq:L,w:function(e){return function(n){return n===f(e)}},x:function(e){return function(n){return n!==f(e)}},y:function(e,n){return function(r){return m(r,e)===i[n]}},y_:function(e,n){return function(r){return g(r,e)===i[n]}},z:function(e,n){return function(r){return m(r,e)!==i[n]}},z_:function(e,n){return function(r){return g(r,e)!==i[n]}}}}(),o=["Pageview","PrebidBid","LinkClick","SlotViewable","SlotClicked"],i=["latimes","sectionfront","losangelestimes","sandiegouniontribune","hoylat","homepage","soccer","fashion","food","television","travel","/technology and computing/consumer electronics/tv and video equipment","410","416","518","business","dodgers","sports","152","670","angels","camping","nascar","opinion","politics","science","155","159","199","209","229","24","396","399","411","412","413","414","533","545","566","657","660","665","666","677","arts","covid-19","finance","health","hiking","recipe","theater","vegetarian","/sports/baseball","1244","156","167","168","18","183","184","192","194","196","197","198","212","213","25","331","333","397","400","406","445","553","554","555","556","557","558","559","632","635","636","647","656","658","659","661","662","673","675","678","9","California","amazon","cannabis","chargers","clippers","covid-19-pandemic","covid-19-vaccines","feeding america","festival","habitat for humanity","health insurance","housing-homelessness","instagram","lakers","macys","movies","nba","nfl","nordstrom","olympics","poilist","rams","stock market","target","technology","tesla","tiktok","unicef","wellness","world-nation","/art and entertainment/movies and tv/comedies","/art and entertainment/movies and tv/romantic comedies","/art and entertainment/music/music genres/classical music","/art and entertainment/music/music genres/opera","/art and entertainment/music/music genres/pop music","/food and drink/healthy eating","/food and drink/vegetarian","/science","131","15","158","163","165","174","175","176","180","182","185","191","193","195","22","23","232","238","256","32","325","330","398","401","402","403","497","512","515","519","560","563","564","565","577","578","579","590","595","646","668","671","676","679","682","7","8","american cancer society","austin dillon","auto racing","autos","boys & girls club","california","california-politics","car racing","chase elliot","christmas","christopher bell","climate change","company-town","cooking","cruises","daniel suarez","daytona 500","earthquakes","education","entertainment","environment","event","film-festivals","fires","food bank","frieze-art-fair","goodwill","hike","hockey","immigration-and-the-border","indy","investing","investment","joey logano","kevin harvick","kurt busch","kyle larson","latino-life","lifestyle","linkedin","music","nhl","orange-county","padres","pga","red cross","ross chastain","ryan blaney","salvation army","showtime","st. jude","sundance-film-festival","thanksgiving","things-to-do","tyler reddick","vegans","wayfair","/art and entertainment/books and literature","/art and entertainment/books and literature/poetry","/art and entertainment/comics and animation","/art and entertainment/dance","/art and entertainment/movies and tv","/art and entertainment/movies and tv/animated","/art and entertainment/movies and tv/children\'s","/art and entertainment/movies and tv/documentaries","/art and entertainment/movies and tv/reality","/art and entertainment/movies and tv/television","/art and entertainment/music/music genres/soundtracks","/art and entertainment/shows and events/classical concert","/art and entertainment/theatre","/automotive and vehicles/cars/luxury","/automotive and vehicles/motorcycles","/business and industrial","/business and industrial/fashion industry","/education/adult education","/education/language learning","/family and parenting","/finance/accounting and auditing/tax preparation and planning","/finance/financial news","/food and drink/dining out","/food and drink/food/fruits and vegetables","/food and drink/food/salads","/food and drink/vegan","/health and fitness","/hobbies and interests/arts and crafts/photography","/hobbies and interests/birdwatching","/home and garden/gardening and landscaping","/home and garden/home improvement and repair","/pets/birds","/pets/large animals","/society/crime","/society/dating","/sports/diving","/sports/horse racing","/sports/horses","/sports/olympics/paralympic games","/sports/skiing","/sports/volleyball/beach volleyball","/style and fashion/beauty/cosmetics","1","10","11","1120","12","1243","126","127","13","14","166","17","170","177","179","187","188","189","19","190","2 day shipping","2-day shipping","20","200","203","204","206","207","208","21","210","223","230","233","234","235","248","27","275","283","285","296","300","31","317","33","34","35","36","363","37","380","391","4","404","407","422","430","433","434","435","436","437","438","439","441","442","446","447","451","452","484","488","499","5","517","547","561","562","567","568","569","570","571","572","573","574","575","576","580","581","582","583","584","585","586","587","588","589","591","592","593","594","6","60","61","637","639","654","655","66","663","664","667","669","672","674","90001","90002","90003","90004","90005","90006","90007","90008","90009","90010","90011","90012","90013","90014","90015","90016","90017","90018","90019","90020","90021","90022","90023","90024","90025","90026","90027","90028","90029","90030","90031","90032","90033","90034","90035","90036","90037","90038","90039","90040","90041","90042","90043","90044","90045","90046","90047","90048","90049","90050","90051","90052","90053","90054","90055","90056","90057","90058","90059","90060","90061","90062","90063","90064","90065","90066","90067","90068","90069","90070","90071","90072","90073","90074","90075","90076","90077","90078","90079","90080","90081","90082","90083","90084","90086","90087","90088","90089","90090","90091","90093","90094","90095","90096","90099","90189","90201","90202","90209","90210","90211","90212","90213","90220","90221","90222","90223","90224","90230","90231","90232","90233","90239","90240","90241","90242","90245","90247","90248","90249","90250","90251","90254","90255","90260","90261","90262","90263","90264","90265","90266","90267","90270","90272","90274","90275","90277","90278","90280","90290","90291","90292","90293","90294","90295","90296","90301","90302","90303","90304","90305","90306","90307","90308","90309","90310","90311","90312","90401","90402","90403","90404","90405","90406","90407","90408","90409","90410","90411","90501","90502","90503","90504","90505","90506","90507","90508","90509","90510","90601","90602","90603","90604","90605","90606","90607","90608","90609","90610","90637","90638","90639","90640","90650","90651","90652","90660","90661","90662","90670","90671","90701","90702","90703","90704","90706","90707","90710","90711","90712","90713","90714","90715","90716","90717","90723","90731","90732","90733","90734","90744","90745","90746","90747","90748","90749","90755","90801","90802","90803","90804","90805","90806","90807","90808","90809","90810","90813","90814","90815","90822","90831","90832","90833","90834","90835","90840","90842","90844","90846","90847","90848","90853","90895","90899","91001","91003","91006","91007","91008","91009","91010","91011","91012","91016","91017","91020","91021","91023","91024","91025","91030","91031","91040","91041","91042","91043","91046","91066","91077","91101","91102","91103","91104","91105","91106","91107","91108","91109","91110","91114","91115","91116","91117","91118","91121","91123","91124","91125","91126","91129","91182","91184","91185","91188","91189","91199","91201","91202","91203","91204","91205","91206","91207","91208","91209","91210","91214","91221","91222","91224","91225","91226","91301","91302","91303","91304","91305","91306","91307","91308","91309","91310","91311","91313","91316","91321","91322","91324","91325","91326","91327","91328","91329","91330","91331","91333","91334","91335","91337","91340","91341","91342","91343","91344","91345","91346","91350","91351","91352","91353","91354","91355","91356","91357","91364","91365","91367","91371","91372","91376","91380","91381","91382","91383","91384","91385","91386","91387","91390","91392","91393","91394","91395","91396","91401","91402","91403","91404","91405","91406","91407","91408","91409","91410","91411","91412","91413","91416","91423","91426","91436","91470","91482","91495","91496","91499","91501","91502","91503","91504","91505","91506","91507","91508","91510","91521","91522","91523","91526","91601","91602","91603","91604","91605","91606","91607","91608","91609","91610","91611","91612","91614","91615","91616","91617","91618","91702","91706","91711","91714","91715","91716","91722","91723","91724","91731","91732","91733","91734","91735","91740","91741","91744","91745","91746","91747","91748","91749","91750","91754","91755","91756","91765","91766","91767","91768","91769","91770","91771","91772","91773","91775","91776","91778","91780","91788","91789","91790","91791","91792","91793","91801","91802","91803","91804","91896","91899","93510","93532","93534","93535","93536","93539","93543","93544","93550","93551","93552","93553","93563","93584","93586","93590","93591","93599","97","Acton","Agoura Hills","Alhambra","Alondra Park","Altadena","Arcadia","Artesia","Avalon","Avocado Heights","Azusa","Baldwin Park","Bell","Bell Canyon","Bell Gardens","Bellflower","Beverly Hills","Bradbury","Burbank","Calabasas","Carson","Cerritos","Claremont","Commerce","Compton","Covina","Cudahy","Culver City","Diamond Bar","Downey","Duarte","El Monte","El Segundo","Gardena","Glendale","Glendora","Hawaiian Gardens","Hawthorne","Hermosa Beach","Hidden Hills","Huntington Park","Industry","Inglewood","Irwindale","La Cañada Flintridge","La Habra Heights","La Mirada","La Puente","La Verne","Lakewood","Lancaster","Lawndale","Lomita","Long Beach","Los Angeles","Lynwood","Malibu","Manhattan Beach","Maywood","Monrovia","Montebello","Monterey Park","Norwalk","Palmdale","Palos Verdes Estates","Paramount","Pasadena","Pico Rivera","Pomona","Rancho Palos Verdes","Redondo Beach","Rolling Hills","Rolling Hills Estates","Rosemead","San Dimas","San Fernando","San Gabriel","San Marino","Santa Clarita","Santa Fe Springs","Santa Monica","Sierra Madre","Signal Hill","South El Monte","South Gate","South Pasadena","Temple City","Torrance","Vernon","Walnut","West Covina","West Hollywood","Westlake Village","Whittier","activision","adventure","aetna","airlines","amazon prime","anthem blue cross","arbys","arrhythmia","asthma","auto","automotive","awards","b2b-publishing","backpacking","barrons","baseball","basketball","bedbathandbeyond","beer","bestbuy","bestcovery","betty-broderick-murders-podcast","blizzard","blue shield","books","bronchitis","business trip","cancer.org","cannes-film-festival","canoeing","car dealership","car market","car sales","car talk","cardiomyopathy","chasing-cosby","chef","chick-fil-a","cigna","cine","climbing","cnbc","coronary artery disease","covered california","crpyto","cystic fibrosis","day trip","detective-trapp","diabetes","diabetic","ebay","eco-friendly","editorials","elon musk","emphysema","entertainment-arts","environmental issues","espn","etsy","expedia","fair","fandango","festival-de-libros","fidelity","fiveguys","fnlondon","football","forest","fubo","gamer","gaming","gift","gift guide","glamping","golf","google","halloween","health care","health net","heart disease","heart failure","hilton-honors","holiday","home-design","horse race","horse racing","hotel","https://www.latimes.com","hulu","humana","jeff bezos","kayaking","kiplinger","kroger","l-a-affairs","letters-to-the-editor","local","lung cancer","lung disease","makeup","marathon","marijuana","market","marketwatch","medical devices","medicare","met gala","mexico-the-americas","mlb","money.usnews","museums-art","national park","nature","ncaa","nerdwallet","netflix","news","nyfw","obituaries","oldnavy","online shopping","oscars","outdoor","pandaexpress","paramountplus.com","pharmaceuticals","pinterest","plants","playstation","pneumonia","politica","real-estate","recipes","red carpet","reddit","respiratory disease","restaurant","road trip","robinhood","running","same day delivery","section","sephora","sling","snapchat","starbucks","stroke","stubhub","style","stylist","subscriber-only","super bowl","surfing","tech","tennis","tequila","the forum","ticketmaster","tinder","toronto-film-festival","trials-of-frank-carson-podcast","trip","true crime","tuberculosis","tv","tv-listings","twitch","twitter","uber","ulta","united health care","unitedhealthcare","vanguard","vegan","veterinarian","vividseats","walmart","weed","wine","wsj.com/news/markets","xbox","yoga","zillow"],s=[["content","publisher"],["classifications_watson","taxonomy_labels"],["content","pageType"],["content","section"],["content","verity","v2"],["text"],["user","newsletterIds"],["content","topicTags"],["content","slug"],["client","url"],["advertiser_name"],["client","referrer"],["dest_url"],["advertiser_id"],["geo_info","province"],["user","isSubscriber"],["content","verity","v1"],["content","paywallTier"],["campaign_id"],["content","title"],["content","type"],["geo_info","city"],["geo_info","postal_code"]],c=[],u=[a.o([a.pc_(4,903),a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,1074),a.s_(5,106),a.s_(5,1101),a.s_(5,1122)]))]),a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,300),a.s_(5,301),a.s_(5,1001),a.s_(5,1069),a.s_(5,1117),a.s_(5,1137)])),a.o([a.os(a.cx,4,[13,37,36,35,34,12,74,159,158,157,73,33,156,72,32]),a.os(a.s,3,[48]),a.ref(12)]),a.os(a.s,19,[190,1068,1073,1079,233]),a.o([a.os(a.s,3,[201]),a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,192),a.s_(5,1048),a.s_(5,1053)]))]),a.o([a.ps(3,120),a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,997),a.s_(5,97),a.s_(5,1019),a.s_(5,1041),a.s_(5,1050),a.s_(5,1066),a.s_(5,1067),a.s_(5,1072),a.s_(5,108),a.s_(5,1087),a.s_(5,1150),a.s_(5,121),a.s_(5,122),a.s_(5,1155),a.s_(5,1163),a.s_(5,1165),a.s_(5,1179)]))]),a.o([a.pc_(4,324),a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,1045),a.s_(5,1046)]))]),a.os(a.s,3,[20,16,224]),a.o([a.os(a.s,3,[9,1162]),a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,1065),a.s_(5,1085),a.s_(5,1112),a.s_(5,230),a.s_(5,1140),a.s_(5,9),a.s_(5,1161)]))]),a.o([a.pc_(4,33),a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,999),a.s_(5,1002),a.s_(5,1020),a.s_(5,1035),a.s_(5,1040),a.s_(5,106),a.s_(5,1075),a.s_(5,1086),a.s_(5,1102),a.s_(5,1167),a.s_(5,1168)]))]),a.os(a.w,21,[916,912,908,907,904,996,995,994,993,992,991,990,989,988,987,986,985,984,983,982,981,980,979,978,977,976,975,974,973,972,971,970,969,968,967,966,965,964,963,962,961,960,959,958,957,956,955,954,953,952,951,950,949,948,947,946,945,944,943,942,941,940,939,938,937,936,935,934,933,932,931,930,929,928,927,926,925,924,923,922,921,920,919,918,917,915,914,913,911,910,909,906,905]),a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,1033),a.s_(5,194),a.s_(5,8),a.s_(5,51),a.s_(5,1133)])),a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,212),a.s_(5,213),a.s_(5,118)])),a.o([a.pc_(4,14),a.ps(8,22),a.ref(30)]),a.os(a.w,0,[2,0]),a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,1159)])),a.os(a.s,3,[1127,24,125]),a.os(a.s,3,[1009,15]),a.af_u(["properties","classifications_watson","keywords"],a.ref(28)),a.os(a.s,0,[0,2]),a.as(a.x,20,[1138,5]),a.os(a.cx,4,[45,19,43]),a.o([a.pc_(4,321),a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,1004),a.s_(5,1031),a.s_(5,1039),a.s_(5,1076),a.s_(5,1077),a.s_(5,1143)]))]),a.o([a.pc_(1,133),a.os(a.cx,7,[47,102,101]),a.os(a.cx,6,[134,55]),a.os(a.s,3,[49,25]),a.af_u(["properties","classifications_watson","keywords"],a.s_(5,25))]),a.o([a.pc_(4,322),a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,1005),a.s_(5,1022),a.s_(5,1042),a.s_(5,1051),a.s_(5,1094),a.s_(5,1095),a.s_(5,1126),a.s_(5,1132),a.s_(5,1160)]))]),a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,998),a.s_(5,1010),a.s_(5,21),a.s_(5,1026),a.s_(5,1037),a.s_(5,1064),a.s_(5,50),a.s_(5,1088),a.s_(5,1108),a.s_(5,1109),a.s_(5,1149),a.s_(5,10),a.s_(5,1158)])),a.o([a.pc_(7,7),a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,7),a.s_(5,1103),a.s_(5,1114),a.s_(5,1130),a.s_(5,1145),a.s_(5,1146)]))]),a.os(a.s,12,[1011,1038,1060,48,1062,1089,1100,1106,1111,1135,1169,1176]),a.o([a.s_(5,49),a.s_(5,51),a.s_(5,236),a.s_(5,53)]),a.os(a.cx,4,[85,84,83,280,178,320,319,152,318,336,329,154,155,71,173,86,345,13,12,332,29,26,93,91,90,42,89,88,41,87,44,92,94,353,27,311,161,162,356,14,352,351,39,38]),a.af_u(["properties","classifications_watson","keywords"],a.ref(44)),a.os(a.cx,4,[30,68,67]),a.os(a.cx,4,[303,28,66,65,64,147,63,146,62,145,299,297,296,295]),a.os(a.s,10,[181,185,1024,103,205,207,105,226,229,231,123]),a.o([a.os(a.cx,7,[206,232,1059,1156,203,195,1025]),a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,202),a.s_(5,1057),a.s_(5,104),a.s_(5,1099),a.s_(5,1144),a.s_(5,1153),a.s_(5,1154),a.s_(5,1172)]))]),a.os(a.s,22,[397,398,399,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520,521,522,523,524,525,526,527,528,529,530,531,532,533,534,535,536,537,538,539,540,541,542,543,544,545,546,547,548,549,550,551,552,553,554,555,556,557,558,559,560,561,562,563,564,565,566,567,568,569,570,571,572,573,574,575,576,577,578,579,580,581,582,583,584,585,586,587,588,589,590,591,592,593,594,595,596,597,598,599,600,601,602,603,604,605,606,607,608,609,610,611,612,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,629,630,631,632,633,634,635,636,637,638,639,640,641,642,643,644,645,646,647,648,649,650,651,652,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,670,671,672,673,674,675,676,677,678,679,680,681,682,683,684,685,686,687,688,689,690,691,692,693,694,695,696,697,698,699,700,701,702,703,704,705,706,707,708,709,710,711,712,713,714,715,716,717,718,719,720,721,722,723,724,725,726,727,728,729,730,731,732,733,734,735,736,737,738,739,740,741,742,743,744,745,746,747,748,749,750,751,752,753,754,755,756,757,758,759,760,761,762,763,764,765,766,767,768,769,770,771,772,773,774,775,776,777,778,779,780,781,782,783,784,785,786,787,788,789,790,791,792,793,794,795,796,797,798,799,800,801,802,803,804,805,806,807,808,809,810,811,812,813,814,815,816,817,818,819,820,821,822,823,824,825,826,827,828,829,830,831,832,833,834,835,836,837,838,839,840,841,842,843,844,845,846,847,848,849,850,851,852,853,854,855,856,857,858,859,860,861,862,863,864,865,866,867,868,869,870,871,872,873,874,875,876,877,878,879,880,881,882,883,884,885,886,887,888,889,890,891,892,893,894,895,896,897,898,899,900,901,902]),a.os(a.cx,4,[172,382,381,380,379,171,378,377,376,375,374,373,372,371,370,369,170,169,168,368,367,366,365,364,363,362,361,360,359,40,167,166,165,358,357,164,82,81,80,79,78,77,76,18]),a.os(a.cx,4,[144,61,60,142,141,140,139,292,58,57,290,138,137,136,56,26,18]),a.os(a.cx,4,[177,94,45,176,93,396,92,395,175,19,394,174,393,44,43,392,391,91,90,42,89,88,41,87,389,388,334]),a.as(a.x,3,[1115,24,23]),a.af_u(["properties","classifications_watson","keywords"],a.y_(5,6)),a.o([a.os(a.cx,4,[330,328,327,326,325,153,323,317,69,31,149,148,309,302,298,59,291,135,289,288,284,282,281,95,180,179,383,354,333]),a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,1006),a.s_(5,1027),a.s_(5,1028),a.s_(5,1029),a.s_(5,1030),a.s_(5,121)]))]),a.o([a.ps(3,6),a.ref(40)]),a.os(a.cx,4,[390,384,385]),a.o([a.s_(5,182),a.s_(5,183),a.s_(5,188),a.s_(5,189),a.s_(5,191),a.s_(5,196),a.s_(5,197),a.s_(5,211),a.s_(5,214),a.s_(5,215),a.s_(5,216),a.s_(5,217),a.s_(5,22),a.s_(5,227),a.s_(5,228),a.s_(5,235)]),a.o([a.pc_(4,160),a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,1081),a.s_(5,1082)]))])],l=[(e,n)=>a.q(a.acq(e,n)),(e,n,r)=>a.q(a.acq(a.cb(e,n,a.ge(1),1),a.cb(0,r,a.ge(1),1))),(e,n,r,t,o)=>a.q(a.acq(a.cb(0,e,a.ge(r),n),a.ocq(t,o))),(e,n,r,t,o)=>a.q(a.acq(a.cb(0,a.a(o),a.ge(1),1),a.tw(a.cb(e,n,a.ge(t),r),2592e6))),(e,n,r,t)=>a.q(a.acq(a.cb(0,a.a([a.y(0,0),a.z(2,1)]),a.ge(1),1),a.tw(a.cb(0,a.o([a.os(a.cx,4,r),a.af_u(["properties","classifications_watson","keywords"],a.o(t))]),a.ge(n),e),2592e6))),(e,n)=>a.q(a.acq(a.cb(0,a.a([a.z(2,1),a.ref(14)]),a.ge(1),1),a.cb(0,a.o([e,a.af_u(["properties","classifications_watson","keywords"],n)]),a.ge(1),1))),(e,n,r,t)=>a.q(a.acq(a.cb(0,a.ref(t),a.ge(1),1),a.tw(a.cb(0,e,a.ge(r),n),2592e6))),e=>a.q(a.acq(a.cb(0,a.ref(14),a.ge(1),1),a.tw(a.cb(0,a.pc_(4,e),a.ge(1),1),2592e6))),e=>a.q(a.acq(a.cb(0,a.o([e,a.pc_(6,27)]),a.ge(1),1),a.cb(0,a.ref(14),a.ge(1),1))),(e,n,r,t,o,i)=>a.q(a.acq(a.cb(0,a.y(o,i),a.ge(1),1),a.itp(e,n,r,t))),(e,n)=>a.q(a.acq(a.cb(0,a.y(0,e),a.ge(1),1),a.tw(a.cb(0,a.ref(n),a.ge(1),1),2592e6))),(e,n,r)=>a.q(a.acq(a.cb(0,a.y(0,e),a.ge(1),1),a.tw(a.cb(0,a.o([n,a.af_u(["properties","classifications_watson","keywords"],a.o(r))]),a.ge(1),1),2592e6))),(e,n,r,t,o,i)=>a.q(a.acq(a.cb(0,a.y(0,e),a.ge(1),1),a.tw(a.cb(0,a.o([a.os(n,r,t),a.pc_(6,o),a.af_u(["properties","classifications_watson","keywords"],a.o(i))]),a.ge(1),1),2592e6))),(e,n)=>a.q(a.acq(a.cb(0,a.y(0,n),a.ge(1),1),a.tw(a.cb(0,e,a.ge(1),1),2592e6))),(e,n)=>a.q(a.acq(a.cb(0,a.y(0,0),a.ge(1),1),a.ocq(e,n))),(e,n)=>a.q(a.acq(a.cb(0,a.y(0,0),a.ge(1),1),a.itp("liveramp_Bombora",e,!1,n))),e=>a.q(a.acq(a.cb(0,a.y(0,0),a.ge(1),1),a.tw(a.cb(0,a.os(a.cx,4,e),a.ge(1),1),2592e6))),e=>a.q(a.acq(a.cb(0,a.y(0,0),a.ge(1),1),a.tw(a.cb(0,a.af_u(["properties","classifications_watson","keywords"],a.o(e)),a.ge(1),1),2592e6))),(e,n,r,t,o)=>a.q(a.acq(a.cb(0,a.y(0,0),a.ge(1),1),a.tw(a.cb(0,a.o([e,a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,n),a.s_(5,r),a.s_(5,t),a.s_(5,o)]))]),a.ge(1),1),2592e6))),(e,n)=>a.q(a.acq(a.cb(3,a.pe(e,n),a.ge(1),1),a.cb(0,a.y(0,0),a.ge(1),1))),(e,n,r)=>a.q(a.acq(a.ocq(e,a.cb(0,n,a.ge(1),1)),a.tw(a.cb(0,r,a.ge(1),1),2592e6))),(e,n,r,t,o,i)=>a.q(a.acq(a.ocq(a.isp("CAL_TIMES_PERMUTIVE_DMP",e,!1,n),a.isp("CAL_TIMES_PERMUTIVE_DMP",r,!1,t)),a.fm(a.n0,a.isp("CAL_TIMES_PERMUTIVE_DMP",o,!0,i)))),(e,n)=>a.q(a.acq(a.ocq(a.tw(a.cb(0,a.ref(29),a.ge(1),1),2592e6),a.tw(a.cb(2,a.os(a.s,12,n),a.ge(1),1),2592e6)),a.cb(0,e,a.ge(1),1))),(e,n,r,t)=>a.q(a.acq(a.isp("CAL_TIMES_PERMUTIVE_DMP",e,!1,n),a.isp("CAL_TIMES_PERMUTIVE_DMP",r,!1,t))),(e,n,r,t,o)=>a.q(a.acq(a.tw(a.cb(e,n,a.ge(t),r),2592e6),a.cb(0,a.ref(o),a.ge(1),1))),(e,n)=>a.q(a.acq(a.tw(a.cb(0,a.a([e,n]),a.ge(1),1),2592e6),a.ocq(a.ocq(a.tw(a.cb(0,a.ref(7),a.ge(1),1),2592e6),a.tw(a.cb(0,a.pc_(1,54),a.ge(1),1),2592e6)),a.tw(a.cb(0,a.pc_(4,39),a.ge(1),1),2592e6)))),(e,n,r,t,o)=>a.q(a.acq(a.tw(a.cb(0,a.a([n,r]),a.ge(1),1),2592e6),a.ocq(a.ocq(t,o),e))),(e,n,r,t,o,i,s,c,u)=>a.q(a.acq(a.tw(a.cb(0,a.a([n,r]),a.ge(1),1),2592e6),a.ocq(a.ocq(a.tw(a.cb(0,t,a.ge(u),o),2592e6),a.tw(a.cb(0,i,s,c),2592e6)),e))),e=>a.q(a.acq(a.tw(a.cb(0,a.a([a.y(0,e),a.z(2,1)]),a.ge(1),1),2592e6),a.ocq(a.tw(a.cb(0,a.ref(42),a.ge(1),1),2592e6),a.tw(a.cb(0,a.pc_(4,38),a.ge(1),1),2592e6)))),(e,n)=>a.q(a.acq(a.tw(a.cb(0,a.a([a.y(0,e),a.z(2,1)]),a.ge(1),1),2592e6),a.ocq(a.tw(a.cb(0,a.o([a.pc_(6,n),a.ref(25)]),a.ge(1),1),2592e6),a.tw(a.cb(0,a.ref(21),a.ge(1),1),2592e6)))),(e,n)=>a.q(a.acq(a.tw(a.cb(0,a.a([a.y(0,e),a.z(2,1)]),a.ge(1),1),2592e6),a.ocq(a.tw(a.cb(0,a.o([a.y(3,10),a.af_u(["properties","classifications_watson","keywords"],a.o(n))]),a.ge(1),1),2592e6),a.tw(a.cb(0,a.ref(38),a.ge(1),1),2592e6)))),(e,n)=>a.q(a.acq(a.tw(a.cb(0,a.a([a.y(0,e),a.z(2,1)]),a.ge(1),1),2592e6),a.tw(a.cb(0,a.af_u(["properties","classifications_watson","keywords"],a.o(n)),a.ge(1),1),2592e6))),(e,n,r,t)=>a.q(a.acq(a.tw(a.cb(0,a.a([a.y(0,e),a.z(2,1)]),a.ge(1),1),2592e6),a.tw(a.cb(0,a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,n),a.s_(5,r),a.s_(5,t)])),a.ge(1),1),2592e6))),(e,n)=>a.q(a.acq(a.tw(a.cb(0,a.a([a.y(0,e),a.z(2,1)]),a.ge(1),1),2592e6),a.tw(a.cb(0,a.ref(n),a.ge(1),1),2592e6))),(e,n,r,t)=>a.q(a.acq(a.tw(a.cb(0,a.a([a.y(0,e),a.z(2,1)]),a.ge(1),1),2592e6),a.tw(a.cb(0,a.o([a.os(a.cx,r,t),a.af_u(["properties","classifications_watson","keywords"],n)]),a.ge(1),1),2592e6))),(e,n,r,t)=>a.q(a.acq(a.tw(a.cb(0,a.a([a.y(0,n),a.z(2,1)]),a.ge(1),1),2592e6),a.ocq(a.tw(a.cb(0,a.ref(r),a.ge(1),1),2592e6),a.tw(a.cb(e,a.ref(t),a.ge(1),1),2592e6)))),e=>a.q(a.acq(a.tw(a.cb(0,a.a([a.y(0,0),a.z(2,1)]),a.ge(1),1),2592e6),a.tw(a.cb(0,a.os(a.cx,4,e),a.ge(1),1),2592e6))),(e,n)=>a.q(a.acq(a.tw(a.cb(0,a.a([a.y(0,0),a.z(2,1)]),a.ge(1),1),2592e6),a.tw(a.cb(0,a.o([a.pc_(4,e),a.af_u(["properties","classifications_watson","keywords"],a.s_(5,n))]),a.ge(1),1),2592e6))),(e,n)=>a.q(a.acq(a.tw(a.cb(0,a.a([a.y(0,0),a.z(2,1)]),a.ge(1),1),2592e6),a.tw(a.cb(0,a.pc_(e,n),a.ge(1),1),2592e6))),(e,n)=>a.q(a.acq(a.tw(a.cb(0,a.a([a.z(2,1),a.ref(e)]),a.ge(1),1),2592e6),a.tw(a.cb(0,a.af_u(["properties","classifications_watson","keywords"],a.o(n)),a.ge(1),1),2592e6))),(e,n,r,t,o,i,s)=>a.q(a.acq(a.tw(a.cb(0,a.a([a.z(2,1),a.ref(14)]),a.ge(1),1),2592e6),a.ocq(a.ocq(a.tw(a.cb(0,a.ref(o),a.ge(r),e),2592e6),a.tw(a.cb(0,a.pc_(4,t),a.ge(i),n),2592e6)),a.cb(0,s,a.ge(1),1)))),(e,n,r)=>a.q(a.acq(a.tw(a.cb(0,a.a([a.z(2,1),a.ref(14)]),a.ge(1),1),2592e6),a.ocq(a.tw(a.cb(0,a.ref(n),a.ge(1),1),2592e6),a.tw(a.cb(e,a.ref(r),a.ge(1),1),2592e6)))),(e,n)=>a.q(a.acq(a.tw(a.cb(0,a.a([a.z(2,1),a.ref(19)]),a.ge(1),1),2592e6),a.cb(0,a.o([a.os(a.cx,4,e),a.af_u(["properties","classifications_watson","keywords"],a.o(n))]),a.ge(1),1))),(e,n,r,t)=>a.q(a.acq(a.tw(a.cb(0,a.a([a.z(2,1),a.ref(19)]),a.ge(1),1),2592e6),a.cb(0,a.o([a.pc_(n,r),e,a.af_u(["properties","classifications_watson","keywords"],a.o(t))]),a.ge(1),1))),(e,n)=>a.q(a.acq(a.tw(a.cb(0,a.a([a.z(2,1),a.ref(19)]),a.ge(1),1),2592e6),a.tw(a.cb(0,a.o([e,n]),a.ge(1),1),2592e6))),(e,n)=>a.q(a.acq(a.tw(a.cb(0,a.ref(13),a.ge(n),e),2592e6),a.cb(0,a.ref(14),a.ge(1),1))),(e,n)=>a.q(a.acq(a.tw(a.cb(0,a.o([e,a.af_u(["properties","classifications_watson","keywords"],a.o(n))]),a.ge(1),1),2592e6),a.cb(0,a.y(0,0),a.ge(1),1))),(e,n,r,t,o,i,s)=>a.q(a.acq(a.tw(a.cb(0,a.o([a.os(o,i,s),n]),a.ge(1),1),2592e6),a.cb(0,a.a([a.y(r,t),e]),a.ge(1),1))),(e,n,r,t)=>a.q(a.acq(a.tw(a.cb(0,a.y(0,e),a.ge(1),1),2592e6),a.ocq(a.tw(a.cb(0,n,a.ge(1),1),2592e6),a.tw(a.cb(r,t,a.ge(1),1),2592e6)))),e=>a.q(a.acq(a.tw(a.cb(0,a.y(0,e),a.ge(1),1),2592e6),a.tw(a.cb(0,a.ref(32),a.ge(1),1),2592e6))),(e,n)=>a.q(a.acq(a.tw(a.cb(0,a.y(0,0),a.ge(1),1),2592e6),a.tw(a.cb(0,a.o([a.pc_(4,e),a.af_u(["properties","classifications_watson","keywords"],a.s_(5,n))]),a.ge(1),1),2592e6))),e=>a.q(a.acq(a.tw(a.cb(1,a.os(a.s,10,e),a.ge(1),1),2592e6),a.cb(0,a.ref(14),a.ge(1),1))),(e,n)=>a.q(a.acq(a.tw(a.cb(4,a.t,a.ge(n),e),2592e6),a.cb(0,a.ref(19),a.ge(1),1))),(e,n,r)=>a.q(a.cb(e,a.pe(n,r),a.ge(1),1)),e=>a.q(a.cb(e,a.pe(18,2987252157),a.ge(1),1)),(e,n)=>a.q(a.cb(0,a.a([e,n]),a.ge(1),1)),(e,n)=>a.q(a.cb(0,a.a([a.y(0,e),a.pc_(6,n)]),a.e(1),2)),(e,n)=>a.q(a.cb(0,a.a([a.y(0,e),a.ps(8,n)]),a.ge(1),1)),(e,n)=>a.q(a.cb(0,a.a([a.y(0,0),a.pc_(e,n)]),a.ge(1),1)),e=>a.q(a.cb(0,a.a([a.y(0,0),a.pe(8,e)]),a.ge(1),1)),e=>a.q(a.cb(0,a.a([a.ps(11,e),a.ref(14)]),a.ge(1),1)),e=>a.q(a.cb(0,a.pc_(6,e),a.ge(1),1)),e=>a.q(a.cb(0,a.ps(9,e),a.ge(1),1)),(e,n,r,t,o,i,s,c)=>a.q(a.ocq(a.cb(o,i,s,c),a.cb(e,n,r,t))),(e,n)=>a.q(a.ocq(a.cb(0,a.a(n),a.ge(1),1),a.cb(0,a.a(e),a.ge(1),1))),(e,n,r)=>a.q(a.ocq(a.lm(n,a.ge(r)),a.ifp(e))),(e,n,r,t)=>a.q(a.ocq(a.ocq(e,a.tw(a.cb(0,a.pc_(1,r),a.ge(t),3),2592e6)),a.tw(a.cb(0,a.pc_(1,n),a.ge(3),3),2592e6))),(e,n)=>a.q(a.ocq(a.ocq(e,a.tw(a.cb(0,a.pc_(1,279),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,n),a.ge(3),3),2592e6))),(e,n,r,t,o,i)=>a.q(a.ocq(a.ocq(a.isp("CAL_TIMES_PERMUTIVE_DMP",r,!1,t),a.isp("CAL_TIMES_PERMUTIVE_DMP",o,!1,i)),a.isp("CAL_TIMES_PERMUTIVE_DMP",e,!1,n))),(e,n,r,t,o,i,s)=>a.q(a.ocq(a.tw(a.cb(t,o,a.ge(s),i),2592e6),a.tw(a.cb(0,e,a.ge(r),n),2592e6))),(e,n)=>a.q(a.ocq(a.tw(a.cb(0,a.a([a.z(2,1),a.z(3,5),a.pc_(16,n),a.ref(19)]),a.ge(1),1),2592e6),a.tw(a.cb(0,a.af_u(["properties","classifications_watson","keywords"],a.o(e)),a.ge(1),1),2592e6))),e=>a.q(a.ocq(a.tw(a.cb(0,a.pc_(1,e),a.ge(3),3),2592e6),a.tw(a.cb(0,a.pc_(1,11),a.ge(3),3),2592e6))),(e,n)=>a.q(a.ocq(a.tw(a.cb(0,a.pc_(1,n),a.ge(3),3),2592e6),a.tw(a.cb(0,a.pc_(1,e),a.ge(3),3),2592e6))),()=>a.q(a.ocq(a.tw(a.cb(0,a.pc_(1,126),a.ge(3),3),2592e6),a.tw(a.cb(0,a.pc_(1,127),a.ge(3),3),2592e6))),(e,n,r,t)=>a.q(a.isp(e,n,r,t)),e=>a.q(a.isp("CAL_TIMES_PERMUTIVE_DMP","0032",!1,e)),(e,n,r)=>a.q(a.sq(a.cb(0,a.a(n),a.ge(r),e))),(e,n,r,t)=>a.q(a.tw(a.cb(e,n,a.ge(t),r),2592e6)),e=>a.q(a.tw(a.cb(0,e,a.ge(3),3),1728e5)),e=>a.q(a.tw(a.cb(0,a.a([a.ref(14),a.af_u(["properties","classifications_watson","keywords"],e)]),a.ge(1),1),2592e6)),(e,n,r)=>a.q(a.tw(a.cb(0,a.a([a.y(e,n),a.ref(r)]),a.ge(1),1),2592e6)),e=>a.q(a.tw(a.cb(0,a.a([a.y(0,e),a.z(2,1),a.ref(3)]),a.ge(1),1),2592e6)),(e,n,r,t)=>a.q(a.tw(a.cb(0,a.a([a.y(0,r),a.y(3,t)]),a.e(n),e),2592e6)),(e,n,r,t)=>a.q(a.tw(a.cb(0,a.a([a.y(0,r),a.y(3,t)]),a.ge(n),e),2592e6)),(e,n)=>a.q(a.tw(a.cb(0,a.a([a.y(0,0),a.os(a.cx,e,n)]),a.ge(1),1),2592e6)),(e,n,r)=>a.q(a.tw(a.cb(0,a.a([a.y(0,0),a.os(a.w,3,r)]),a.ge(n),e),2592e6)),e=>a.q(a.tw(a.cb(0,a.a([a.y(0,0),a.os(a.s,3,e)]),a.ge(1),1),2592e6)),(e,n,r,t)=>a.q(a.tw(a.cb(0,a.a([a.y(0,0),a.pc_(r,t)]),a.ge(n),e),2592e6)),(e,n)=>a.q(a.tw(a.cb(0,a.a([a.y(0,0),a.pc_(7,234)]),a.ge(n),e),2592e6)),e=>a.q(a.tw(a.cb(0,a.a([a.y(0,0),a.pe(3,e)]),a.ge(1),1),2592e6)),e=>a.q(a.tw(a.cb(0,a.a([a.y(0,3),a.pe(3,e)]),a.e(1),2),2592e6)),(e,n,r,t,o,i)=>a.q(a.tw(a.cb(0,a.a([a.z(r,t),a.z(o,i),e,n]),a.ge(1),1),2592e6)),(e,n)=>a.q(a.tw(a.cb(0,a.a([a.z(2,1),a.z(3,5),a.pc_(e,n),a.ref(19)]),a.ge(1),1),2592e6)),e=>a.q(a.tw(a.cb(0,a.pc_(1,e),a.ge(3),3),2592e6)),()=>a.q(a.tw(a.cb(0,a.pc_(1,248),a.ge(3),3),2592e6)),()=>a.q(a.tw(a.cb(0,a.pc_(1,267),a.ge(3),3),2592e6)),(e,n)=>a.q(a.tw(a.cb(0,a.y(0,4),a.ge(n),e),2592e6))];return{rawQueries:{1e7:a.r(72,133,"/education/graduate school"),10000001:a.r(93,"/automotive and vehicles"),10000002:a.r(72,240,238),10000003:a.r(72,"/finance",253),10000004:a.r(72,255,"/careers"),10000005:a.r(93,"/education"),10000006:a.r(66,a.tw(a.cb(0,a.pc_(1,257),a.ge(3),3),2592e6),"/society/social institution/marriage",272,3),10000007:a.r(66,a.ocq(a.ocq(a.ocq(a.ocq(a.ocq(a.ocq(a.ocq(a.ocq(a.ocq(a.ocq(a.tw(a.cb(0,a.pc_(1,239),a.ge(3),3),2592e6),a.tw(a.cb(0,a.pc_(1,241),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,128),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,129),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,249),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,250),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,"/art and entertainment/visual art and design/art museums and galleries"),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,"/art and entertainment/visual art and design/arts education"),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,"/art and entertainment/visual art and design/performance art"),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,"/art and entertainment/visual art and design/restoration"),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,"/art and entertainment/visual art and design/sculpture"),a.ge(3),3),2592e6)),265,"/education/art history",3),10000008:a.r(66,a.tw(a.cb(0,a.pc_(1,"/business and industrial/food industry"),a.ge(3),3),2592e6),"/food and drink/food and grocery retailers","/food and drink",3),10000010:a.r(72,264,131),10000011:a.r(93,"/hobbies and interests"),10000012:a.r(93,"/home and garden"),10000013:a.r(72,242,"/art and entertainment/movies"),10000014:a.r(93,"/art and entertainment/music"),10000015:a.r(66,a.ocq(a.ocq(a.ocq(a.ocq(a.tw(a.cb(0,a.pc_(1,"/business and industrial/business news"),a.ge(3),3),2592e6),a.tw(a.cb(0,a.pc_(1,259),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,"/law, govt and politics"),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,"/news"),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,271),a.ge(3),3),2592e6)),"/technology and computing/tech news","/sports/sports news",3),10000016:a.r(66,a.tw(a.cb(0,a.pc_(1,"/finance/bank"),a.ge(3),3),2592e6),"/finance/personal finance",259,3),10000017:a.r(93,"/pets"),10000018:a.r(66,a.ocq(a.tw(a.cb(0,a.pc_(1,"/art and entertainment/celebrity fan and gossip"),a.ge(3),3),2592e6),a.tw(a.cb(0,a.pc_(1,246),a.ge(3),3),2592e6)),130,247,3),10000019:a.r(93,"/real estate"),10000020:a.r(93,"/shopping"),10000021:a.r(72,"/sports",264),10000022:a.r(72,"/style and fashion",254),10000023:a.r(66,a.tw(a.cb(0,a.pc_(1,"/business and industrial/automation"),a.ge(3),3),2592e6),"/technology and computing","/science/computer science",3),10000024:a.r(66,a.ocq(a.tw(a.cb(0,a.pc_(1,"/art and entertainment/movies and tv/movies/reviews"),a.ge(3),3),2592e6),a.tw(a.cb(0,a.pc_(1,247),a.ge(3),3),2592e6)),11,"/art and entertainment/tv",3),10000025:a.r(93,"/travel"),10000026:a.r(72,"/technology and computing/consumer electronics/game systems and consoles","/hobbies and interests/games/video and computer games"),10000035:a.r(72,"/science/physics","/science/engineering"),10000036:a.r(93,"/automotive and vehicles/buying and selling cars"),10000037:a.r(93,"/automotive and vehicles/motor shows"),10000038:a.r(72,"/automotive and vehicles/electric vehicles","/automotive and vehicles/cars/hybrid"),10000039:a.r(93,252),10000040:a.r(93,"/automotive and vehicles/cars/performance vehicles"),10000041:a.r(72,"/art and entertainment/comics and animation/comics",240),10000042:a.r(93,"/business and industrial/business operations"),10000043:a.r(93,272),10000044:a.r(93,257),10000045:a.r(93,241),10000046:a.r(93,"/art and entertainment/visual art and design"),10000047:a.r(93,"/food and drink/beverages/alcoholic beverages"),10000048:a.r(93,"/food and drink/barbecues and grilling"),10000049:a.r(72,"/food and drink/food and grocery retailers/bakeries","/food and drink/desserts and baking"),10000050:a.r(72,"/food and drink/food/fast food",260),10000051:a.r(93,"/food and drink/food allergies"),10000052:a.r(66,a.ocq(a.tw(a.cb(0,a.pc_(1,261),a.ge(3),3),2592e6),a.tw(a.cb(0,a.pc_(1,262),a.ge(3),3),2592e6)),131,"/food and drink/health and lowfat cooking",3),10000053:a.r(93,132),10000054:a.r(72,"/health and fitness/sports medicine","/health and fitness/exercise"),10000055:a.r(93,"/health and fitness/men\'s health"),10000056:a.r(93,"/health and fitness/nutrition"),10000057:a.r(93,"/health and fitness/women\'s health"),10000058:a.r(95),10000059:a.r(93,"/art and entertainment/movies and tv/action"),10000060:a.r(93,243),10000061:a.r(93,244),10000062:a.r(93,"/art and entertainment/movies and tv/horror"),10000063:a.r(93,271),10000064:a.r(72,"/law, govt and politics/legal issues","/law, govt and politics/law enforcement"),10000065:a.r(93,"/news/national news"),10000066:a.r(72,"/law, govt and politics/politics","/law, govt and politics/government"),10000067:a.r(93,"/science/weather"),10000068:a.r(93,269),10000069:a.r(93,"/pets/cats"),10000070:a.r(93,"/pets/dogs"),10000071:a.r(93,270),10000072:a.r(93,"/pets/reptiles"),10000073:a.r(93,"/sports/football"),10000074:a.r(93,54),10000075:a.r(93,"/sports/basketball"),10000076:a.r(93,"/sports/bodybuilding"),10000077:a.r(93,"/sports/bowling"),10000078:a.r(93,"/sports/boxing"),10000079:a.r(93,"/sports/bicycling"),10000080:a.r(93,"/sports/fishing"),10000081:a.r(93,"/sports/golf"),10000082:a.r(93,"/sports/hunting and shooting"),10000083:a.r(93,"/sports/rugby"),10000084:a.r(93,277),10000085:a.r(93,"/sports/tennis"),10000086:a.r(93,"/sports/walking"),10000087:a.r(67,a.ocq(a.tw(a.cb(0,a.pc_(1,"/business and industrial/tanning"),a.ge(3),3),2592e6),a.tw(a.cb(0,a.pc_(1,"/style and fashion/beauty"),a.ge(3),3),2592e6)),"/style and fashion/beauty/cosmetology and beauty professionals"),10000088:a.r(72,"/style and fashion/body art","/style and fashion/beauty/tattoos"),10000089:a.r(93,"/style and fashion/men \'s fashion"),10000090:a.r(93,"/technology and computing/consumer electronics"),10000324:a.r(93,253),10000325:a.r(66,a.ocq(a.ocq(a.tw(a.cb(0,a.pc_(1,"/business and industrial/company/annual report"),a.ge(3),3),2592e6),a.tw(a.cb(0,a.pc_(1,"/business and industrial/company/bankruptcy"),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,"/business and industrial/company/earnings"),a.ge(3),3),2592e6)),"/business and industrial/company/merger and acquisition","/business and industrial/company/joint venture",3),10000327:a.r(93,"/finance/personal finance/debt management"),10000328:a.r(93,"/finance/personal finance/insurance"),10000329:a.r(66,a.tw(a.cb(0,a.pc_(1,"/finance/accounting and auditing/billing and invoicing"),a.ge(3),3),2592e6),258,"/finance/accounting and auditing/bookkeeping",3),10000330:a.r(93,"/finance/investing"),10000687:a.r(93,"/science/social science"),10000688:a.r(93,256),10000689:a.r(72,"/automotive and vehicles/scooters and mopeds",252),10000690:a.r(66,a.ocq(a.ocq(a.ocq(a.ocq(a.ocq(a.tw(a.cb(0,a.pc_(1,"/automotive and vehicles/vehicle brands/fiat"),a.ge(3),3),2592e6),a.tw(a.cb(0,a.pc_(1,"/automotive and vehicles/vehicle brands/ford"),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,"/automotive and vehicles/vehicle brands/honda"),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,"/automotive and vehicles/vehicle brands/hyundai"),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,"/automotive and vehicles/vehicle brands/nissan"),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,"/automotive and vehicles/vehicle brands/peugeot"),a.ge(3),3),2592e6)),"/automotive and vehicles/vehicle brands/suzuki","/automotive and vehicles/vehicle brands/subaru",3),10000691:a.r(66,a.ocq(a.ocq(a.ocq(a.ocq(a.ocq(a.ocq(a.ocq(a.ocq(a.ocq(a.ocq(a.tw(a.cb(0,a.pc_(1,251),a.ge(3),3),2592e6),a.tw(a.cb(0,a.pc_(1,"/automotive and vehicles/vehicle brands/audi"),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,"/automotive and vehicles/vehicle brands/bentley"),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,"/automotive and vehicles/vehicle brands/ferrari"),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,"/automotive and vehicles/vehicle brands/lamborghini"),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,"/automotive and vehicles/vehicle brands/land rover"),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,"/automotive and vehicles/vehicle brands/maserati"),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,"/automotive and vehicles/vehicle brands/mercedes-benz"),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,"/automotive and vehicles/vehicle brands/porsche"),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,"/automotive and vehicles/vehicle brands/rolls-royce"),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,"/automotive and vehicles/vehicle brands/toyota"),a.ge(3),3),2592e6)),"/automotive and vehicles/vehicle brands/volvo","/automotive and vehicles/vehicle brands/volkswagen",3),10000692:a.r(93,"/automotive and vehicles/cars/coupe"),10000693:a.r(72,"/automotive and vehicles/auto repair","/automotive and vehicles/auto parts"),10000694:a.r(93,"/automotive and vehicles/cars"),10000695:a.r(93,"/automotive and vehicles/cars/sedan"),10000696:a.r(93,"/art and entertainment/books and literature/children\'s books"),10000697:a.r(93,239),10000698:a.r(72,"/careers/resume writing and advice","/careers/career advice"),10000699:a.r(93,"/careers/telecommuting"),10000700:a.r(93,"/careers/career planning"),10000701:a.r(72,"/careers/job search","/careers/job fairs"),10000702:a.r(93,255),10000703:a.r(93,"/education/distance learning"),10000704:a.r(93,"/education/special education"),10000705:a.r(72,256,238),10000706:a.r(66,a.tw(a.cb(0,a.pc_(1,"/education/homework and study tips"),a.ge(3),3),2592e6),"/education/teaching and classroom resources/school supplies","/education/teaching and classroom resources/lesson plans",3),10000707:a.r(93,265),10000708:a.r(93,250),10000709:a.r(93,129),10000710:a.r(66,a.ocq(a.tw(a.cb(0,a.pc_(1,131),a.ge(3),3),2592e6),a.tw(a.cb(0,a.pc_(1,263),a.ge(3),3),2592e6)),"/pets/animal welfare",132,3),10000711:a.r(93,"/food and drink/beverages/non alcoholic beverages"),10000712:a.r(66,a.tw(a.cb(0,a.pc_(1,"/food and drink/kosher food"),a.ge(3),3),2592e6),132,263,3),10000713:a.r(93,"/food and drink/cuisines"),10000714:a.r(66,a.ocq(a.ocq(a.ocq(a.ocq(a.ocq(a.tw(a.cb(0,a.pc_(1,"/food and drink/food/condiments and dressings"),a.ge(3),3),2592e6),a.tw(a.cb(0,a.pc_(1,"/food and drink/food/frozen food"),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,261),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,"/food and drink/food/grains and pasta"),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,"/food and drink/food/herbs and spices"),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,262),a.ge(3),3),2592e6)),"/food and drink/gastronomy/slow food","/food and drink/food/snack foods",3),10000715:a.r(93,"/health and fitness/aging"),10000716:a.r(93,"/health and fitness/weight loss"),10000717:a.r(93,"/hobbies and interests/arts and crafts"),10000718:a.r(72,"/hobbies and interests/collecting/stamps and coins","/hobbies and interests/collecting"),10000719:a.r(93,"/hobbies and interests/games/board games and puzzles"),10000720:a.r(93,"/hobbies and interests/magic and illusion"),10000721:a.r(93,"/art and entertainment/music/musical instruments"),10000722:a.r(72,269,266),10000723:a.r(72,"/technology and computing/consumer electronics/radios","/art and entertainment/radio"),10000724:a.r(72,"/art and entertainment/books and literature/science fiction","/art and entertainment/books and literature/fan fiction"),10000725:a.r(93,"/home and garden/appliances"),10000726:a.r(93,268),10000727:a.r(66,a.ocq(a.ocq(a.ocq(a.tw(a.cb(0,a.pc_(1,"/art and entertainment/visual art and design/design/interior design"),a.ge(3),3),2592e6),a.tw(a.cb(0,a.pc_(1,"/art and entertainment/visual art and design/drawing"),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,"/art and entertainment/visual art and design/painting"),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,"/hobbies and interests/arts and crafts/woodworking"),a.ge(3),3),2592e6)),"/home and garden/remodeling and construction",268,3),10000728:a.r(95),10000729:a.r(66,a.ocq(a.ocq(a.tw(a.cb(0,a.pc_(1,"/home and garden/bed and bath/bathroom"),a.ge(3),3),2592e6),a.tw(a.cb(0,a.pc_(1,"/home and garden/bed and bath/bedroom"),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,"/home and garden/home furnishings"),a.ge(3),3),2592e6)),"/home and garden/interior decorating","/home and garden/home furnishings/lamps and lighting",3),10000730:a.r(93,"/art and entertainment/movies and tv/independent"),10000731:a.r(93,245),10000732:a.r(93,"/art and entertainment/movies and tv/dramas"),10000733:a.r(93,127),10000734:a.r(73),10000735:a.r(94),10000736:a.r(94),10000737:a.r(93,"/art and entertainment/music/music genres/jazz"),10000738:a.r(93,128),10000739:a.r(93,"/art and entertainment/music/music genres/blues"),10000740:a.r(93,"/art and entertainment/music/music genres/country music"),10000741:a.r(93,"/art and entertainment/music/music genres/hip hop"),10000742:a.r(93,130),10000743:a.r(72,130,"/art and entertainment/music/music genres/electronic music"),10000744:a.r(66,a.tw(a.cb(0,a.pc_(1,128),a.ge(3),3),2592e6),249,129,3),10000745:a.r(93,"/news/local news"),10000746:a.r(93,"/news/international news"),10000747:a.r(93,"/finance/personal finance/financial planning/retirement and pension"),10000748:a.r(72,"/finance/personal finance/financial planning",258),10000749:a.r(72,275,274),10000750:a.r(93,"/pets/aquariums"),10000751:a.r(73),10000752:a.r(93,"/real estate/architects"),10000753:a.r(93,"/real estate/apartments"),10000754:a.r(66,a.ocq(a.tw(a.cb(0,a.pc_(1,"/business and industrial/agriculture and forestry"),a.ge(3),3),2592e6),a.tw(a.cb(0,a.pc_(1,"/business and industrial/agriculture and forestry/organic farming"),a.ge(3),3),2592e6)),270,266,3),10000755:a.r(93,"/real estate/buying and selling homes"),10000756:a.r(93,278),10000757:a.r(93,"/sports/water polo"),10000758:a.r(93,"/sports/table tennis and ping-pong"),10000759:a.r(93,"/sports/softball"),10000760:a.r(72,278,"/sports/volleyball"),10000761:a.r(93,276),10000762:a.r(93,"/sports/rowing"),10000763:a.r(93,"/sports/badminton"),10000764:a.r(93,"/sports/sailing"),10000765:a.r(66,a.tw(a.cb(0,a.pc_(1,274),a.ge(3),3),2592e6),"/sports/polo",275,3),10000766:a.r(93,"/sports/skating/figure skating"),10000767:a.r(93,"/sports/cheerleading"),10000768:a.r(93,"/sports/auto racing"),10000769:a.r(93,"/sports/weightlifting"),10000770:a.r(93,"/sports/gymnastics"),10000771:a.r(93,"/sports/swimming"),10000772:a.r(93,"/sports/running and jogging"),10000773:a.r(72,"/sports/hockey/field hockey","/sports/hockey"),10000774:a.r(93,273),10000775:a.r(66,a.ocq(a.ocq(a.ocq(a.ocq(a.ocq(a.ocq(a.ocq(a.ocq(a.ocq(a.tw(a.cb(0,a.pc_(1,"/sports/bicycling/mountain biking"),a.ge(3),3),2592e6),a.tw(a.cb(0,a.pc_(1,"/sports/canoeing and kayaking"),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,"/sports/climbing"),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,273),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,"/sports/go kart"),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,"/sports/parachuting"),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,"/sports/scuba diving"),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,"/sports/skating"),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,277),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,"/sports/skiing/waterskiing"),a.ge(3),3),2592e6)),"/sports/surfing and bodyboarding","/sports/snowboarding",3),10000776:a.r(93,"/sports/wrestling"),10000777:a.r(72,276,"/sports/olympics"),10000778:a.r(93,"/sports/martial arts"),10000779:a.r(93,"/sports/cricket"),10000780:a.r(93,"/sports/soccer"),10000781:a.r(66,a.ocq(a.ocq(a.ocq(a.ocq(a.tw(a.cb(0,a.pc_(1,"/art and entertainment/shows and events"),a.ge(3),3),2592e6),a.tw(a.cb(0,a.pc_(1,251),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,254),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,260),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,"/home and garden/luxury homes"),a.ge(3),3),2592e6)),"/style and fashion/luxury goods","/style and fashion/fashion designers",3),10000782:a.r(93,"/style and fashion/beauty/hair care"),10000783:a.r(67,a.tw(a.cb(0,a.pc_(1,"/style and fashion/accessories"),a.ge(3),3),2592e6),"/style and fashion/jewelry"),10000784:a.r(93,"/style and fashion/clothing"),10000785:a.r(93,"/business and industrial/automation/robotics"),10000786:a.r(93,"/science/computer science/artificial intelligence"),10000787:a.r(71,245),10000788:a.r(71,246),10000789:a.r(71,126),10000790:a.r(71,242),10000791:a.r(71,243),10000792:a.r(71,244),10000793:a.r(93,"/travel/tourist destinations/seaside resort"),10000794:a.r(93,"/travel/tourist destinations/africa"),10000795:a.r(93,"/travel/tourist facilities/camping"),10000796:a.r(93,"/travel/tourist destinations/south america"),10000797:a.r(93,"/travel/transports/road travel/road accident"),10000798:a.r(93,"/travel/tourist destinations/japan"),10000799:a.r(93,"/travel/tourist destinations/australia and new zealand"),10000800:a.r(66,a.ocq(a.ocq(a.tw(a.cb(0,a.pc_(1,"/travel/tourist destinations/eastern europe"),a.ge(3),3),2592e6),a.tw(a.cb(0,a.pc_(1,"/travel/tourist destinations/europe"),a.ge(3),3),2592e6)),a.tw(a.cb(0,a.pc_(1,"/travel/tourist destinations/france"),a.ge(3),3),2592e6)),"/travel/tourist destinations/italy","/travel/tourist destinations/greece",3),10000801:a.r(93,"/travel/specialty travel/adventure travel"),10000802:a.r(93,"/travel/business travel"),10000803:a.r(93,"/travel/traveling with kids"),100190:a.r(91,a.ref(19),a.af_u(["properties","classifications_watson","keywords"],a.s_(5,186)),2,1,3,5),103007:a.r(26,a.cb(4,a.os(a.e,13,[4994600878,5053549675,5134773741,5131330531,5132764219,5013154010,5135280187]),a.ge(1),1),a.z(2,1),a.ref(14),a.cb(0,a.os(a.cx,4,["530",14,161,160,149]),a.ge(1),1),a.cb(1,a.os(a.s,10,["audi","bmw","cadillac.com","lexus","mercedes-benz group"]),a.ge(1),1)),103821:a.q(a.tw(a.cb(0,a.a([a.y(0,0),a.z(2,1),a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,"lgbt")]))]),a.ge(1),1),2592e6)),104166:a.r(74,"CAL_TIMES_PERMUTIVE_DMP","0008",!1,"104166"),104167:a.r(74,"CAL_TIMES_PERMUTIVE_DMP","1008",!1,"104167"),104168:a.r(74,"CAL_TIMES_PERMUTIVE_DMP","0009",!1,"104168"),104169:a.r(74,"CAL_TIMES_PERMUTIVE_DMP","1009",!1,"104169"),104241:a.r(22,a.ref(19),[1003,1014,1034,1054,1056,1058,1061,1078,110,1105,22,112,1110,113,222,114,1116,1120,225,1142,119]),104242:a.r(22,a.ps(0,3),[1003,1014,1034,1054,1056,1058,1061,1078,110,"mascar",1105,112,1110,113,222,114,1116,1120,225,1142,119]),104243:a.q(a.acq(a.tw(a.cb(0,a.ref(19),a.ge(1),1),2592e6),a.tw(a.cb(0,a.y(0,4),a.ge(1),1),2592e6))),104623:a.r(23,"0017","104623","0011","104623"),104624:a.r(23,"1017","104624","1011","104624"),104907:a.r(24,1,a.pe(13,"201043"),1,1,14),104920:a.r(39,19,[a.s_(5,"wnba"),a.s_(5,"womens basketball")]),104921:a.r(56,0,75),104922:a.r(25,a.z(2,1),a.ref(14)),104923:a.r(40,1,1,1,38,42,1,a.pc_(6,"516")),104924:a.r(44,a.os(a.s,3,[99,117]),a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,113),a.s_(5,1148)]))),104925:a.q(a.acq(a.tw(a.cb(0,a.a([a.z(2,1),a.ref(19)]),a.ge(1),1),2592e6),a.tw(a.cb(0,a.o([a.pc_(6,75),a.os(a.s,3,[100,109]),a.af_u(["properties","classifications_watson","keywords"],a.s_(5,112))]),a.ge(1),1),2592e6))),104934:a.q(a.acq(a.tw(a.cb(0,a.a([a.z(2,1),a.ref(19)]),a.ge(1),1),2592e6),a.cb(0,a.o([a.os(a.s,3,[1007,184]),a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,"electric car"),a.s_(5,"electric vehicles"),a.s_(5,"electric volkswagen id"),a.s_(5,"gas prices"),a.s_(5,"gas stations"),a.s_(5,"showcase of electric vehicle innovation")]))]),a.ge(1),1))),105097:a.q(a.acq(a.tw(a.cb(0,a.ref(14),a.ge(1),1),2592e6),a.cb(1,a.os(a.w,10,["heinekenmexico.com","heineken.com","Tanqueray","Baileys","totalwine.com","Total Wine & More","Johnnie Walker","Lone River","Guinness","Crown Royal","Don Julio","Smirnoff"]),a.ge(1),1))),105201:a.r(80,3,5,19),105459:a.r(41,0,18,31),105463:a.r(40,3,3,3,310,11,3,a.a([a.y(2,116),a.y(3,8)])),105468:a.r(42,[37,36,35,34],[a.e_(5,"bond yields"),a.e_(5,"stock yields"),a.e_(5,"Wall Street"),a.e_(5,"tesla\'s stock"),a.e_(5,"tesla stock"),a.y_(5,118),a.e_(5,"stock price"),a.e_(5,"stock")]),105469:a.r(42,["683","681",386,387,85,84,83],[a.y_(5,1125),a.e_(5,"tablet"),a.e_(5,"apple watch"),a.e_(5,"galaxy buds"),a.e_(5,"airpods"),a.e_(5,"fitbit"),a.e_(5,"smart speakers"),a.e_(5,"echo dot"),a.e_(5,"fire tv"),a.e_(5,"ipad"),a.y_(5,1177),a.e_(5,"nintendo switch"),a.e_(5,"gaming console"),a.e_(5,"consumer electronics"),a.e_(5,"smart tv"),a.e_(5,"iphone")]),105470:a.q(a.acq(a.tw(a.cb(0,a.a([a.z(2,1),a.ref(14)]),a.ge(1),1),2592e6),a.cb(0,a.o([a.pc_(4,176),a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,"b2b"),a.s_(5,"business travel"),a.s_(5,1023)]))]),a.ge(1),1))),105471:a.r(43,a.os(a.cx,4,["695",151,150,312,30,"228","227","225"]),7,124,[a.s_(5,"cycling"),a.s_(5,"gym"),a.s_(5,"hikes"),a.s_(5,50),a.s_(5,"jogging"),a.s_(5,1097),a.s_(5,"meditation"),a.s_(5,1136),a.s_(5,"swimming"),a.s_(5,1178)]),105491:a.q(a.tw(a.cb(0,a.a([a.y(2,116),a.y(0,0),a.y(3,8)]),a.ge(1),1),2592e6)),105784:a.q(a.tw(a.cb(0,a.a([a.z(2,1),a.ref(14),a.os(a.cx,4,[19,45,177,42])]),a.ge(1),1),2592e6)),105787:a.r(43,a.ps(3,111),4,"324",[a.s_(5,"film festival"),a.s_(5,"movie premiere"),a.s_(5,1118)]),105791:a.r(78,a.ref(14)),105844:a.r(41,2,2,27),105850:a.r(44,a.pc_(4,143),a.os(a.cx,6,[69,287])),105855:a.r(60,1131),105856:a.r(60,220),105857:a.r(60,108),105858:a.r(60,122),105859:a.r(60,"youtube"),105860:a.r(60,1123),105861:a.r(60,1141),105862:a.r(55,a.os(a.s,11,["facebook",108,220,1123,1131,1141,122,1164]),a.ref(14)),106373:a.q(a.acq(a.tw(a.cb(0,a.ref(14),a.ge(1),1),2592e6),a.cb(0,a.o([a.os(a.cx,4,[65,28,66,64,63,62]),a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,"day care"),a.s_(5,"daycare"),a.s_(5,"parenting"),a.s_(5,"pre-school"),a.s_(5,"preschool")]))]),a.ge(1),1))),106594:a.r(78,a.y(0,3)),106595:a.r(76,3,[a.z(2,1),a.z(3,5),a.ref(14)],3),106605:a.r(65,"93680","8940a496-bc5a-4f9f-a0cc-8840b8eb0ba0",.7574656),106606:a.r(65,"105469","5d60111f-f385-47ca-836b-25c81be5f283",.7498509),107200:a.r(74,"CAL_TIMES_PERMUTIVE_DMP","0018",!1,"107200"),107201:a.r(74,"CAL_TIMES_PERMUTIVE_DMP","0019",!1,"107201"),107202:a.r(74,"CAL_TIMES_PERMUTIVE_DMP","0020",!1,"107202"),107203:a.r(74,"CAL_TIMES_PERMUTIVE_DMP","0021",!1,"107203"),107204:a.r(74,"CAL_TIMES_PERMUTIVE_DMP","0022",!1,"107204"),107205:a.r(74,"CAL_TIMES_PERMUTIVE_DMP","0023",!1,"107205"),107206:a.r(74,"CAL_TIMES_PERMUTIVE_DMP","0024",!1,"107206"),107207:a.r(74,"CAL_TIMES_PERMUTIVE_DMP","0025",!1,"107207"),107208:a.r(74,"CAL_TIMES_PERMUTIVE_DMP","0026",!1,"107208"),107209:a.r(74,"CAL_TIMES_PERMUTIVE_DMP","0027",!1,"107209"),107234:a.r(65,"92206","1c0becbc-407c-4ecf-bf9b-b578bb29993f",.71550083),107235:a.r(65,"92883","ab1e7761-8763-4576-8151-1cc8a95a4396",.8017702),107236:a.r(65,"92209","86e34779-c376-4c57-ba9f-01cb1de9e396",.7093963),107237:a.r(65,"95605","3985a167-5f9f-4b1e-99b7-5e3d4c6bea94",.7085039),107238:a.r(65,"92210","acdbea0d-7a73-4c0d-9554-00b048b70140",.7024582),107418:a.r(46,a.os(a.cx,4,["426","425","423","424","428","431",337]),[a.s_(5,"animals"),a.s_(5,"cat adoption"),a.s_(5,"dog adoption"),a.s_(5,"kitten"),a.s_(5,"pet adoption"),a.s_(5,"pet tips"),a.s_(5,"puppy"),a.s_(5,"pups"),a.s_(5,1171),a.s_(5,"zoo")]),107419:a.r(46,a.pc_(4,337),[a.s_(5,1171)]),107485:a.r(65,"94814","b8c2edf3-91b7-43d8-b360-d7decb4ef14c",.7178602),107486:a.r(65,"94815","2fdcc35e-8d99-44b0-a1fd-af4fa30b31e6",.7111779),107487:a.r(65,"94816","d5847a21-6450-46af-99e1-9197b9d9f6e5",.70053214),107597:a.r(1,1,a.os(a.w,10,["Schneider","Schneider Electric","Siemens Healthineers","Siemens AG","IBM","General Electric Company"]),a.y(0,0)),107697:a.r(10,0,9),107698:a.r(10,0,0),107699:a.q(a.acq(a.cb(0,a.y(0,0),a.ge(1),1),a.tw(a.cb(0,a.o([a.pc_(7,52),a.os(a.cx,4,[29,293]),a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,"musicals"),a.s_(5,"plays"),a.s_(5,52)]))]),a.ge(1),1),2592e6))),107700:a.r(11,0,a.pc_(4,304),[a.s_(5,"ballet"),a.s_(5,"dance"),a.s_(5,"dancing")]),107701:a.r(11,0,a.pc_(4,60),[a.s_(5,"amy schumer"),a.s_(5,"bill burr"),a.s_(5,"chris rock"),a.s_(5,"comedy club"),a.s_(5,"comedy show"),a.s_(5,"comedy special"),a.s_(5,"dave chapelle"),a.s_(5,"gabriel iglesias"),a.s_(5,"jerry seinfield"),a.s_(5,"jim gaffigan"),a.s_(5,"kevin hart"),a.s_(5,"margaret cho"),a.s_(5,"netflix is a joke"),a.s_(5,"sarah silverman"),a.s_(5,"stand up comedy"),a.s_(5,"tig notaro")]),107702:a.r(18,a.os(a.cx,4,[143,61]),"coachella",104,"stagecoach","sundance"),107703:a.r(18,a.pc_(4,"334"),"family film","family friendly","family movie","family-friendly"),107704:a.r(10,0,6),107705:a.r(10,0,24),107706:a.r(10,0,22),107709:a.r(11,0,a.os(a.cx,4,[307,29,308,306,305,"153"]),[a.s_(5,"california history"),a.s_(5,"culture"),a.s_(5,"film history"),a.s_(5,"fine art"),a.s_(5,"historical fact"),a.s_(5,"museum"),a.s_(5,"television history"),a.s_(5,"u.s. history")]),107710:a.r(14,a.tw(a.cb(0,a.o([a.y(3,17),a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,"anaheim ducks"),a.s_(5,20),a.s_(5,1012),a.s_(5,1013),a.s_(5,99),a.s_(5,100),a.s_(5,16),a.s_(5,1063),a.s_(5,1071),a.s_(5,209),a.s_(5,109),a.s_(5,112),a.s_(5,113),a.s_(5,222),a.s_(5,115),a.s_(5,225),a.s_(5,117),a.s_(5,6),a.s_(5,17),a.s_(5,1148),a.s_(5,1151)]))]),a.ge(3),3),2592e6),a.cb(0,a.os(a.cx,6,[285,40,31,75]),a.ge(1),1)),107711:a.r(12,0,a.cx,7,[102,101,"covid-voices",47],55,[a.e_(5,"novel coronavirus"),a.e_(5,"covid"),a.y_(5,47),a.e_(5,"coroavirus")]),107712:a.r(13,a.a([a.y(3,1052),a.os(a.cx,["content","verity","threats"],["GGT2|VERY_HIGH","GGT2|HIGH","GGT4|VERY_HIGH","GGT4|HIGH","GGT3|VERY_HIGH","GGT3|HIGH","GGT1|VERY_HIGH","GGT1|HIGH","GGT6|VERY_HIGH","GGT6|HIGH","GGT5|VERY_HIGH","GGT5|HIGH"])]),0),107941:a.r(17,[a.s_(5,"anti-asian hate"),a.s_(5,"asian american"),a.s_(5,"asian pacific"),a.s_(5,"asian-american"),a.s_(5,"chinese"),a.s_(5,"dumplings"),a.s_(5,"filipino"),a.s_(5,"gyoza"),a.s_(5,"indian"),a.s_(5,"indonesian"),a.s_(5,"japanese"),a.s_(5,"kbbq"),a.s_(5,"korean"),a.s_(5,"lunar new year"),a.s_(5,"malaysian"),a.s_(5,"ramen"),a.s_(5,"stop asian hate"),a.s_(5,"sushi"),a.s_(5,"taiwanese"),a.s_(5,"thai"),a.s_(5,"vietnamese")]),108460:a.r(1,0,a.y(0,0),a.o([a.pc_(7,234),a.os(a.cx,4,["653",13,37,36,35,34,12,74,159,158,157,73,33,156,72,32,387,386,85,84,83,344,343,342,341,340,339,338]),a.ps(11,220)])),108462:a.r(16,[344,343,342,341,340,339,338]),110017:a.r(83,1,1,3,1007),110018:a.r(10,3,41),110806:a.r(76,1,[a.y(0,0),a.ps(11,"reddit.com")],1),112065:a.r(10,3,22),112066:a.r(10,3,24),112067:a.r(10,3,6),112069:a.r(10,3,0),112070:a.r(10,3,9),113388:a.r(11,0,a.pc_(4,"314"),[a.s_(5,"cancer"),a.s_(5,"canerous"),a.s_(5,"chemotherapy"),a.s_(5,"lymphoma"),a.s_(5,"mesothelioma"),a.s_(5,"myeloma")]),113390:a.r(16,[349,348,73,"87",335]),113609:a.r(10,3,45),115817:a.r(11,3,a.os(a.cx,4,["218",294]),[a.s_(5,"dining out"),a.s_(5,"restaurants")]),116437:a.r(10,0,15),116923:a.r(63,2,a.ps(12,"la-times-food-bowl"),a.ge(1),1,2,a.ps(12,"https://lafoodbowl.com/"),a.ge(1),1),117413:a.r(17,[a.s_(5,"african american music"),a.s_(5,"african music"),a.s_(5,"black actors"),a.s_(5,"black actress"),a.s_(5,"black america"),a.s_(5,"black business"),a.s_(5,"black culture"),a.s_(5,"black los angeles"),a.s_(5,"black music"),a.s_(5,"black owned business"),a.s_(5,"black queer"),a.s_(5,"black restaurant"),a.s_(5,"black theater")]),118207:a.r(69,a.o([a.pc_(4,"108"),a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,"american red cross"),a.s_(5,103),a.s_(5,105),a.s_(5,"non-profit organization"),a.s_(5,123)]))]),1,1,1,a.os(a.s,10,[181,185,103,205,207,105,226,229,231,123]),1,1),118517:a.r(77,1,a.ref(33),1,1),118812:a.r(51,["hbo"]),119319:a.r(52,1,1),119320:a.r(52,3,3),119321:a.r(52,5,5),120730:a.r(63,0,a.pc_(["content","secondarySections"],"Latino Life Section"),a.ge(1),1,0,a.y(3,218),a.ge(1),1),121177:a.r(6,a.ref(41),1,1,14),121577:a.r(6,a.os(a.cx,4,[153,"30",59]),1,1,14),122077:a.q(a.acq(a.cb(0,a.y(0,0),a.ge(1),1),a.tw(a.cb(0,a.o([a.pc_(4,331),a.ref(15)]),a.ge(1),1),2592e6))),122078:a.r(7,"58"),122133:a.r(7,"332"),122528:a.q(a.acq(a.tw(a.cb(1,a.ref(33),a.ge(1),1),2592e6),a.cb(0,a.y(0,3),a.ge(1),1))),124051:a.r(74,"CAL_TIMES_PERMUTIVE_DMP","0028",!1,"124051"),124052:a.r(74,"CAL_TIMES_PERMUTIVE_DMP","1028",!1,"124052"),124059:a.r(74,"CAL_TIMES_PERMUTIVE_DMP","0029",!1,"124059"),124717:a.r(38,4,70),124718:a.r(36,[71,86,70]),127273:a.q(a.sq(a.cb(0,a.ref(14),a.ge(3),3))),127274:a.r(0,a.sq(a.cb(4,a.t,a.ge(1),1)),a.cb(0,a.ref(19),a.ge(1),1)),127661:a.r(84,4,[350,349,"450","449","448",348,347,75,"444","443",346]),127663:a.r(84,4,[350,346]),128113:a.r(74,"CAL_TIMES_PERMUTIVE_DMP","0030",!1,"128113"),128773:a.r(61,69),129527:a.r(79,a.s_(5,"dementia")),129528:a.r(79,a.o([a.s_(5,"alzheimer")])),131335:a.r(64,[a.y(14,96),a.ref(35)],[a.y(14,96),a.ref(10)]),131361:a.r(64,[a.y(14,96),a.pe(15,!1),a.ref(35)],[a.y(14,96),a.pe(15,!1),a.ref(10)]),131845:a.r(12,3,a.w,3,["caregiversd-section","caregiversd"],163,[a.s_(5,"caregiver"),a.s_(5,"caregiving")]),132444:a.r(2,a.ref(14),1,1,a.tw(a.cb(0,a.os(a.cx,4,[331,70]),a.ge(3),3),2592e6),a.cb(0,a.os(a.w,9,["https://www.latimes.com/projects/man-in-the-window-podcast/","https://www.latimes.com/podcast/trials-of-frank-carson-podcast","https://www.latimes.com/california/story/2019-11-12/detective-trapp-podcast","https://www.latimes.com/entertainment-arts/story/2020-01-07/new-podcast-chasing-cosby-chronicles-the-rise-and-fall-of-bill-cosby"]),a.ge(1),1)),134115:a.r(74,"CAL_TIMES_PERMUTIVE_DMP","0031",!1,"134115"),134117:a.r(74,"CAL_TIMES_PERMUTIVE_DMP","1031",!1,"134117"),135599:a.r(77,0,a.os(a.w,9,["https://www.latimes.com/travel/list/la-best-dog-friendly-hikes-trails-beaches-parks","https://www.latimes.com/travel/list/hollywood-sign-viewing-hikes","https://www.latimes.com/travel/list/outdoor-workout-gym-equipment-los-angeles-free","https://www.latimes.com/travel/list/glamping-los-angeles-ventura-joshua-tree-catalina-big-bear","https://www.latimes.com/travel/list/la-jolla-best-things-to-do-hotels-restaurants-beaches","https://www.latimes.com/travel/list/best-things-to-do-california-winter-travel","https://www.latimes.com/travel/list/idyllwild-things-to-do-restaurants-hikes-art","https://www.latimes.com/california/list/12-places-to-find-solace-for-your-soul-in-los-angeles-how-to-save-a-life","https://www.latimes.com/travel/list/easy-hikes-ocean-views-southern-california","https://www.latimes.com/travel/list/50-great-hikes-in-la","https://www.latimes.com/travel/list/best-la-hikes-offer-shade-from-hot-weather","https://www.latimes.com/travel/list/desert-hikes-los-angeles-southern-california","https://www.latimes.com/travel/list/five-best-winter-hikes","https://www.latimes.com/travel/list/night-hikes-los-angeles","https://www.latimes.com/travel/list/june-gloom-foggy-marine-layer-hikes","https://www.latimes.com/lifestyle/list/best-hikes-for-dates-los-angeles","https://www.latimes.com/travel/list/mount-whitney-training-hikes-los-angeles","https://www.latimes.com/travel/list/california-hikes-fall-foliage-autum-leaves","https://www.latimes.com/travel/list/12-best-hikes-in-orange-county"]),1,1),135708:a.r(24,0,a.o([a.pc_(4,14),a.ref(30)]),2,2,14),135715:a.r(45,1,1),135716:a.r(45,3,3),135717:a.r(47,a.ref(14),a.os(a.s,8,[21,1070,208,50,1119]),2,116,a.s,9,[21,1070,208,50,1119]),136339:a.r(51,["paramount global - paramount plus",1121]),137071:a.r(58,7,"the-times-podcast"),137072:a.r(59,"the-envelope-podcast"),137073:a.r(59,"binge-sesh-podcast"),137074:a.r(57,3,"border-city"),137075:a.r(57,0,"asian-enough"),137076:a.r(57,0,"battle-of-187"),137077:a.r(57,0,"cant-stop-watching"),137078:a.r(57,0,1032),137079:a.r(57,0,"coronavirus-in-california"),137080:a.r(57,0,1044),137083:a.r(57,0,1018),137084:a.r(57,0,1157),137085:a.q(a.cb(0,a.a([a.y(0,0),a.os(a.s,8,[1018,1032,1044,1157])]),a.ge(1),1)),137094:a.r(75,"137094"),137608:a.r(88,2,2),137859:a.q(a.acq(a.cb(0,a.pe(15,!1),a.ge(1),1),a.tw(a.cb(0,a.y(17,1147),a.ge(2),2),2592e6))),137860:a.q(a.acq(a.cb(0,a.pe(15,!1),a.ge(1),1),a.tw(a.cb(0,a.y(17,1147),a.ge(2),2),12096e5))),139079:a.r(75,"139079"),141647:a.q(a.acq(a.ocq(a.ocq(a.cb(3,a.pe(13,4754959140),a.ge(1),1),a.cb(3,a.pe(13,4839780861),a.ge(1),1)),a.cb(0,a.o([a.pc_(4,"181"),a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,"casino"),a.s_(5,"golden acorn"),a.s_(5,"harrah\'s"),a.s_(5,"pechanga"),a.s_(5,"roulette"),a.s_(5,"slot game"),a.s_(5,"slot machine")]))]),a.ge(1),1)),a.cb(0,a.y(0,3),a.ge(1),1))),141648:a.r(65,"135716","1cb06697-f8a3-4c79-89c9-d9546074b0ee",.80866086),141997:a.r(65,"95620","cfbdfcdc-96c1-46c0-869c-6863feeeeab8",.8904104),142390:a.r(20,a.ocq(a.ocq(a.cb(4,a.os(a.e,13,[4872348206,4777588451,4858414505,5253587741,5073310307,5190266582,5234416029,4803603087,4755528671,4858290870]),a.ge(1),1),a.cb(3,a.os(a.e,13,[4777588451,4858414505,5253587741,5073310307,5190266582,5234416029,4803603087,4755528671,4858290870,4872348206]),a.ge(3),3)),a.cb(1,a.os(a.s,10,["aarons.com","bfr.com","colesfineflooring.com","cort.com","furniture","home depot","homedepot","ikea","livefeather.com","living spaces","livingspaces","lowes","oliver space","oliver.space","overstock","rac","rent a center","rentacenter.com","roche bobois","rochebobois","stonelodge",237]),a.ge(3),3)),a.pc_(7,1080),a.ref(14)),143929:a.r(87,1,1,7,"mental-health"),145736:a.q(a.acq(a.tw(a.cb(0,a.a([a.y(0,3),a.z(2,1)]),a.ge(1),1),2592e6),a.ocq(a.ocq(a.tw(a.cb(0,a.ref(11),a.ge(3),3),2592e6),a.tw(a.cb(0,a.pc_(4,310),a.ge(3),3),2592e6)),a.cb(0,a.a([a.y(2,116),a.y(3,8)]),a.ge(1),1)))),145852:a.q(a.acq(a.cb(0,a.a([a.z(2,1),a.ref(14)]),a.ge(1),1),a.tw(a.cb(0,a.o([a.pc_(4,"383"),a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,"federal law"),a.s_(5,"lawmakers"),a.s_(5,"legal affairs"),a.s_(5,"made into law"),a.s_(5,"new law"),a.s_(5,"state law")]))]),a.ge(1),1),2592e6))),146373:a.r(5,a.os(a.cx,4,["272","271","270","269"]),a.o([a.s_(5,"arcade"),a.s_(5,"dungeons & dragons"),a.s_(5,"dungeons and dragons")])),146374:a.q(a.acq(a.cb(0,a.a([a.z(2,1),a.ref(14)]),a.ge(1),1),a.cb(0,a.a([a.pc_(4,"680"),a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,"nintendo"),a.s_(5,1125),a.s_(5,"video game tournament"),a.s_(5,"video games"),a.s_(5,1177)]))]),a.ge(1),1))),146375:a.r(5,a.pc_(4,178),a.s_(5,"esports")),147319:a.r(54,3),147320:a.r(54,4),147818:a.q(a.cb(0,a.a([a.ref(20),a.pc_(4,"455"),a.ref(14)]),a.ge(1),1)),148079:a.r(8,a.pc_(4,12)),148146:a.r(8,a.os(a.cx,4,[13,32])),148315:a.r(61,"1012"),148316:a.r(10,0,45),149079:a.r(19,13,4786263586),149081:a.r(19,18,3182412416),154471:a.r(83,3,3,0,193),154472:a.r(51,["sho.com",230]),155947:a.q(a.acq(a.ocq(a.tw(a.cb(1,a.os(a.w,10,["Amazon - Prime Video","tv.apple.com","cbs.com",1121,"sling.com","disneyplus.com","netflix.com","hulu.com","max.com","amc.com"]),a.ge(1),1),2592e6),a.tw(a.cb(0,a.os(a.cx,4,[70,86]),a.ge(1),1),2592e6)),a.cb(0,a.y(0,0),a.ge(1),1))),156319:a.q(a.acq(a.tw(a.cb(0,a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,"western"),a.s_(5,"yellowstone")])),a.ge(1),1),2592e6),a.cb(0,a.a([a.ref(20),a.ps(3,9)]),a.ge(1),1))),163475:a.r(74,"CAL_TIMES_PERMUTIVE_DMP","0014",!1,"163475"),163476:a.r(74,"CAL_TIMES_PERMUTIVE_DMP","1014",!1,"163476"),164547:a.r(74,"CAL_TIMES_PERMUTIVE_DMP","0033",!1,"164547"),84255:a.q(a.cb(0,a.t,a.ge(1),1)),85689:a.r(62,"campaign=ha&"),85691:a.r(62,"sfmc_id"),85694:a.r(53,0,15,!0),85695:a.r(55,a.pe(["user","isLoggedIn"],!0),a.pe(15,!1)),85696:a.q(a.acq(a.cb(0,a.o([a.ps(11,"facebook.com"),a.ps(["client","user_agent"],"FBAV")]),a.ge(1),1),a.cb(0,a.ref(14),a.ge(1),1))),86184:a.r(2,a.t,1,1,a.isp("CAL_TIMES_PERMUTIVE_DMP","0003",!1,"86184"),a.isp("CAL_TIMES_PERMUTIVE_DMP","1003",!1,"86184")),87566:a.q(a.ocq(a.isp("CAL_TIMES_PERMUTIVE_DMP","0004",!1,"87566"),a.isp("CAL_TIMES_PERMUTIVE_DMP","1004",!1,"87566"))),87697:a.r(86,[184,15,193,1128,"technology-and-the-internet"]),87698:a.r(83,1,1,3,15),87699:a.r(83,3,3,0,15),87700:a.r(83,3,3,3,15),87703:a.r(86,[46,1008,1021,193,"hero-complex",111,1107,221,9,52]),87704:a.r(83,1,1,3,200),87705:a.r(83,3,3,0,1052),87706:a.r(83,3,3,3,200),87709:a.r(86,[20,99,100,16,209,109,115,117,6,17]),87710:a.r(83,1,1,3,17),87711:a.r(83,3,3,0,17),87712:a.r(83,3,3,3,17),87715:a.r(83,1,1,0,16),87716:a.r(83,3,3,0,16),87718:a.r(83,1,1,0,111),87721:a.r(83,1,1,0,9),87724:a.r(85,1,1,[1129,8]),87725:a.r(83,3,3,0,8),87727:a.r(96,1,1),87728:a.r(96,3,3),87730:a.q(a.tw(a.cb(0,a.a([a.y(0,0),a.os(a.s,3,["climate",201])]),a.ge(1),1),24192e5)),87733:a.r(86,[186,198,199,204,107,218,223]),87734:a.r(85,3,3,[223,218,107,204,199,198,187,186]),87751:a.q(a.acq(a.cb(0,a.t,a.ge(15),15),a.scq(a.sw("PageviewComplete",a.y(9,1084),["properties","aggregations","PageviewEngagement","engaged_time"]),a.vq(a.sw("PageviewEngagement",a.y(9,1084),["properties","engaged_time"])),a.g(60)))),88614:a.r(80,0,0,39),88621:a.r(80,0,3,39),89520:a.r(81,0),89521:a.r(81,3),89641:a.r(61,"525"),90306:a.r(87,1,1,6,135),90307:a.r(56,0,56),90308:a.r(56,0,31),90309:a.r(56,0,"523"),90310:a.r(58,6,55),90311:a.r(56,0,283),90312:a.r(56,0,148),90313:a.r(56,0,286),90314:a.r(56,0,287),90315:a.r(56,0,40),90316:a.r(56,0,"128"),90317:a.r(56,0,"111"),90318:a.r(56,0,"1121"),90319:a.r(56,0,59),90320:a.r(56,0,163),90321:a.r(56,0,"522"),90322:a.r(58,6,"1241"),90323:a.r(56,0,285),90324:a.r(56,0,347),90325:a.r(56,0,355),90326:a.r(58,6,180),90327:a.r(56,0,"524"),90328:a.r(56,0,"43"),90329:a.r(56,0,95),90330:a.r(56,0,"1245"),90331:a.r(56,0,28),90332:a.r(58,6,134),90333:a.r(56,0,"520"),90334:a.r(58,6,179),90335:a.r(56,0,"633"),90336:a.r(56,0,14),90337:a.r(56,0,"1242"),90338:a.r(56,0,"526"),90339:a.r(56,0,162),90340:a.r(56,3,314),90341:a.r(56,3,"371"),90342:a.r(56,3,"236"),90343:a.r(56,3,"237"),90344:a.r(56,3,"215"),90345:a.r(56,3,150),90346:a.r(56,3,315),90347:a.r(56,3,"239"),90348:a.r(56,3,151),90349:a.r(56,3,312),90350:a.r(56,3,313),90351:a.r(56,3,30),90352:a.r(56,3,"408"),90353:a.r(56,3,335),90354:a.r(56,3,"243"),90355:a.r(56,3,163),90356:a.r(56,3,"216"),90357:a.r(56,3,"245"),90358:a.r(56,3,"244"),90359:a.r(56,3,"247"),90360:a.r(56,3,316),90803:a.q(a.tw(a.cb(0,a.a([a.ref(14),a.os(a.w,3,["games-puzzles-and-crossword","games-puzzles-crossword"])]),a.ge(1),1),2592e6)),90943:a.r(83,1,1,0,107),90944:a.r(82,4,3,0,107),90945:a.r(89,"image"),90946:a.r(85,1,1,[98,124,1124,1091,8,7,219]),90947:a.r(83,3,3,0,219),90948:a.r(86,[1049,1092,"op-ed",23]),90949:a.r(82,4,3,0,23),90950:a.r(85,1,1,["covering-kamala-harris",187,24]),90951:a.r(83,3,3,0,24),90952:a.r(83,1,1,0,25),90953:a.r(83,3,3,0,25),90954:a.r(83,1,1,0,10),90955:a.r(83,3,3,0,10),90956:a.r(85,1,1,[1104,210,125]),90957:a.r(83,3,3,0,125),90958:a.r(83,1,1,3,1113),90959:a.r(82,4,3,3,1113),90960:a.r(83,1,1,3,1093),90961:a.r(82,4,3,3,1093),90962:a.r(82,2,1,3,219),90964:a.r(82,2,1,3,23),90965:a.r(82,4,3,3,23),90966:a.r(90,"real-estate-news"),90967:a.r(90,"hot-property"),90969:a.r(83,1,1,0,120),90970:a.r(83,1,1,0,1128),90971:a.r(83,1,1,0,184),90972:a.r(83,1,1,0,223),90973:a.r(83,1,1,0,1008),90974:a.r(83,1,1,0,221),90975:a.r(83,1,1,0,1021),90976:a.r(83,1,1,0,1129),90977:a.r(83,1,1,0,1092),90978:a.r(83,1,1,0,109),90979:a.r(83,1,1,0,117),90980:a.r(83,1,1,0,99),90981:a.r(89,"usc-sports"),90982:a.r(89,"ucla-sports"),90983:a.r(83,1,1,0,100),90984:a.r(83,1,1,0,20),90985:a.r(89,"high-school-sports"),90986:a.r(83,1,1,0,209),90987:a.r(83,1,1,0,115),92177:a.r(27,a.cb(0,a.os(a.cx,6,[95,286]),a.ge(1),1),a.y(0,4),a.z(2,1),a.os(a.cx,7,[1036,"artes-escenicas"]),1,a.os(a.w,3,["musica",1036]),a.ge(1),1,1),92178:a.r(26,a.tw(a.cb(0,a.pc_(4,39),a.ge(1),1),2592e6),a.y(0,4),a.z(2,1),a.ocq(a.tw(a.cb(0,a.os(a.s,3,[20,"beisbol",16,224]),a.ge(1),1),2592e6),a.tw(a.cb(0,a.pc_(1,54),a.ge(1),1),2592e6)),a.cb(0,a.pc_(6,31),a.ge(1),1)),92179:a.r(33,4,16),92180:a.r(33,4,23),92182:a.r(28,4),92183:a.r(33,4,8),92196:a.r(29,4,283),92204:a.r(33,4,4),92205:a.r(33,4,5),92206:a.r(30,4,[a.s_(5,1e3),a.s_(5,1023),a.s_(5,21),a.s_(5,"cruise"),a.s_(5,1043),a.s_(5,1083),a.s_(5,1134),a.s_(5,10)]),92207:a.r(32,4,1096,1139,1166),92208:a.r(48,4,a.a([a.z(2,1),a.ref(1)]),2,a.os(a.s,12,[97,1016,1017,1047,1055,1090,110,114,119,1173,237])),92209:a.q(a.acq(a.tw(a.cb(0,a.a([a.y(0,4),a.z(2,1)]),a.ge(1),1),2592e6),a.tw(a.cb(0,a.o([a.os(a.cx,4,[13,37,36,35,34,12,74,"405",72,32]),a.ps(3,"banking-and-finance-trends-updates-and-visionaries"),a.ref(12)]),a.ge(1),1),2592e6))),92210:a.r(35,0,4,26,36),92211:a.r(34,4,a.s_(5,"immigration"),7,["migrant-caravan","migrant-voices","immigration-detention",210,"migracion","immigration-court"]),92212:a.r(35,0,4,17,43),92213:a.r(35,0,4,18,31),92214:a.r(35,0,4,34,37),92883:a.r(3,3,a.os(a.e,13,[4994600878,5134773741,5132764219,5135280187]),1,1,[a.z(2,1),a.ref(14)]),92894:a.r(14,a.itp("liveramp_Alliant","1000847566",!1,"92894"),a.itp("liveramp_Stirista","1000044974",!1,"92894")),92895:a.r(15,"1004559099","92895"),92898:a.r(15,"1005390079","92898"),93050:a.r(4,3,3,[171,82,81,80,79,78,77,76],[a.s_(5,"beauty"),a.s_(5,"skin care")]),93051:a.q(a.acq(a.cb(0,a.a([a.z(2,1),a.ref(19)]),a.ge(1),1),a.tw(a.cb(0,a.o([a.os(a.w,3,[7,46]),a.os(a.cx,4,[172,170,169,168,40,167,166,165,164,82,81,80,79,78,77,76,18]),a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,7)]))]),a.ge(3),3),2592e6))),93052:a.r(9,"liveramp_DunandBradstreet","1001640126",!1,"93052",0,0),93053:a.r(9,"liveramp_Experian","1007228281",!1,"93053",0,0),93054:a.r(3,2,a.ps(12,"gucci"),1,1,[a.y(0,0),a.z(2,1)]),93055:a.r(9,"eyeota","34857",!1,"93055",0,0),93058:a.r(13,a.pc_(7,199),0),93383:a.r(53,0,15,!1),93384:a.r(60,1164),93521:a.r(47,a.z(2,1),a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,"camp"),a.s_(5,208),a.s_(5,"ski"),a.s_(5,"snowboard")])),0,0,a.cx,4,["160",27]),93650:a.r(37,19,1134),93651:a.r(49,0),93653:a.r(49,4),93654:a.q(a.acq(a.tw(a.cb(0,a.y(0,0),a.ge(1),1),2592e6),a.tw(a.cb(0,a.os(a.cx,4,[28,66,65,64,147,63,146,62]),a.ge(1),1),2592e6))),93655:a.r(37,175,"spa"),93656:a.r(37,174,1083),93658:a.r(50,67,1170),93659:a.r(50,68,53),93672:a.q(a.acq(a.tw(a.cb(0,a.a([a.y(0,0),a.z(2,1)]),a.ge(1),1),2592e6),a.tw(a.cb(0,a.o([a.pc_(4,"467"),a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,192),a.s_(5,"environmentalism")]))]),a.ge(1),1),2592e6))),93673:a.r(38,4,41),93674:a.r(36,[43,44]),93676:a.r(34,0,a.o([a.s_(5,"brene brown"),a.s_(5,"mental health"),a.s_(5,"self-help"),a.s_(5,"therapist"),a.s_(5,"therapy"),a.s_(5,124),a.s_(5,1178)]),4,[314,313,315,151,150]),93677:a.q(a.acq(a.tw(a.cb(0,a.a([a.y(0,0),a.z(2,1)]),a.ge(1),1),2592e6),a.ocq(a.ocq(a.tw(a.cb(0,a.o([a.pc_(4,"211"),a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,1015),a.s_(5,"cocktail"),a.s_(5,1152),a.s_(5,"vodka"),a.s_(5,"whiskey"),a.s_(5,1175)]))]),a.ge(3),3),2592e6),a.cb(3,a.pe(13,5134356855),a.ge(1),1)),a.tw(a.cb(1,a.os(a.s,10,["captain morgan","crown royal","don julio","guinness","johnniewalker.com","lone river","smirnoff"]),a.ge(1),1),2592e6)))),93678:a.r(39,14,[a.s_(5,1015),a.s_(5,"blue moon"),a.s_(5,"bud light"),a.s_(5,"budweiser"),a.s_(5,"coors light"),a.s_(5,"dos equis"),a.s_(5,"heineken"),a.s_(5,"lagunitas"),a.s_(5,"michelob"),a.s_(5,"miller lite"),a.s_(5,"modelo"),a.s_(5,"samuel adams"),a.s_(5,"stella artois")]),93679:a.q(a.acq(a.tw(a.cb(0,a.a([a.y(0,0),a.z(2,1)]),a.ge(1),1),2592e6),a.ocq(a.tw(a.cb(0,a.af_u(["properties","classifications_watson","keywords"],a.s_(5,1175)),a.ge(1),1),2592e6),a.tw(a.cb(2,a.os(a.s,12,["aberinger","apothic","barefootwine","bogle","botabox","cait","carlorossi","charlesshaw","franzia","joshcellars","libertycreek","petervella","stellarosa","sutterhome","twinvalley","vendange"]),a.ge(1),1),2592e6)))),93680:a.q(a.acq(a.tw(a.cb(0,a.a([a.z(2,1),a.ref(14)]),a.ge(1),1),2592e6),a.ocq(a.tw(a.cb(0,a.af_u(["properties","classifications_watson","keywords"],a.s_(5,1152)),a.ge(1),1),2592e6),a.tw(a.cb(2,a.os(a.s,12,["calle23","casamigos","donjulio","espolon","fortaleza","hornitos","josecuervo","olmecaaltos","patron"]),a.ge(1),1),2592e6)))),93681:a.r(38,4,"388"),93682:a.r(38,4,"641"),93683:a.r(38,4,"644"),93684:a.r(38,4,"651"),93685:a.r(38,4,173),93686:a.r(38,4,"652"),93687:a.r(38,4,154),93688:a.r(38,4,"326"),93689:a.r(38,4,"327"),93691:a.r(38,4,155),93692:a.r(38,4,71),93693:a.r(38,4,"336"),93694:a.r(38,4,"335"),93696:a.r(38,16,"IAB20"),93697:a.r(32,0,"dc","marvel","mcu"),93698:a.r(31,0,[a.s_(5,"chef\'s table"),a.s_(5,"floyd on france"),a.s_(5,"good eats"),a.s_(5,"hell\'s kitchen"),a.s_(5,"master chef"),a.s_(5,"test kitchen"),a.s_(5,"the great british bakeoff"),a.s_(5,"top chef"),a.s_(5,"yan can cook")]),94503:a.r(20,a.cb(0,a.pc_(7,98),a.ge(1),1),a.o([a.os(a.s,9,[98,1098,1174]),a.af_u(["properties","classifications_watson","keywords"],a.o([a.y_(5,1174),a.y_(5,98),a.y_(5,1098)]))]),a.a([a.z(2,1),a.ref(14)])),94814:a.r(74,"liveramp_Intuit_la_times","83082768",!1,"94814"),94815:a.r(74,"liveramp_Intuit_la_times","2133460735",!1,"94815"),94816:a.q(a.ocq(a.isp("liveramp_Intuit_la_times","1068011954",!1,"94816"),a.isp("liveramp_Intuit_la_times","459689700",!1,"94816"))),94902:a.r(0,a.acq(a.cb(0,a.a([a.y(0,0),a.z(2,1)]),a.ge(1),1),a.ocq(a.tw(a.cb(0,a.os(a.cx,4,[144,61,60,143,142,294,"178",293,141,140,139,58,57,137,"162",136,56,26,18,"151"]),a.ge(1),1),2592e6),a.tw(a.cb(0,a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,"concert"),a.s_(5,202),a.s_(5,104),a.s_(5,"performance")])),a.ge(1),1),2592e6))),a.tw(a.cb(0,a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,"hispanic"),a.s_(5,"latina"),a.s_(5,"latino"),a.s_(5,"latinx"),a.s_(5,"mexicanas"),a.s_(5,"mexicans"),a.s_(5,"mexico")])),a.ge(1),1),2592e6)),95370:a.r(74,"CAL_TIMES_PERMUTIVE_DMP","0002",!1,"95370"),95371:a.r(74,"CAL_TIMES_PERMUTIVE_DMP","0001",!1,"95371"),95373:a.r(74,"CAL_TIMES_PERMUTIVE_DMP","0004",!1,"95373"),95375:a.r(74,"CAL_TIMES_PERMUTIVE_DMP","0003",!1,"95375"),95491:a.q(a.acq(a.ocq(a.ocq(a.cb(0,a.ps(9,"https://www.latimes.com/lifestyle"),a.ge(1),1),a.cb(0,a.ps(9,"https://www.latimes.com/politics"),a.ge(1),1)),a.cb(0,a.ps(9,"https://www.latimes.com/entertainment-arts"),a.ge(1),1)),a.itp("liveramp_Epsilon","1002890016",!1,"95491"))),95587:a.r(4,1,1,[145,58,57,138],[a.s_(5,"wedding anniversary"),a.s_(5,"wedding planner"),a.s_(5,"wedding planning"),a.s_(5,"wedding venue")]),95592:a.r(27,a.tw(a.cb(0,a.pc_(1,"/art and entertainment"),a.ge(1),1),2592e6),a.y(0,3),a.z(2,1),a.os(a.cx,4,["257",152,"255","254","253","252","251","250","249",316,29,308,307,306,"205",305,304]),1,a.y(3,46),a.ge(1),1,1),95596:a.r(35,0,3,18,31),95597:a.r(35,0,3,34,37),95599:a.r(48,3,a.ref(17),0,a.ref(43)),95602:a.r(35,0,3,26,36),95604:a.r(35,2,3,2,27),95605:a.q(a.acq(a.tw(a.cb(0,a.a([a.y(0,3),a.z(2,1)]),a.ge(1),1),2592e6),a.ocq(a.tw(a.cb(0,a.ref(1),a.ge(1),1),2592e6),a.tw(a.cb(2,a.os(a.w,12,[237,1090,1016,1055,1047,110,114,1173,119,97,1017]),a.ge(1),1),2592e6)))),95606:a.r(31,3,[a.s_(5,"cosmetics"),a.s_(5,"glossier"),a.s_(5,"lush"),a.s_(5,1096),a.s_(5,"maybelline"),a.s_(5,"nyx"),a.s_(5,1139),a.s_(5,1166)]),95607:a.r(30,3,[a.s_(5,1e3),a.s_(5,21),a.s_(5,195),a.s_(5,1043),a.s_(5,"road trips"),a.s_(5,10)]),95610:a.r(33,3,5),95611:a.r(33,3,4),95612:a.r(29,3,355),95613:a.r(33,3,8),95615:a.r(28,3),95617:a.r(33,3,23),95618:a.r(33,3,16),95619:a.r(25,a.y(0,3),a.z(2,1)),95620:a.q(a.acq(a.cb(0,a.a([a.y(0,0),a.z(2,1)]),a.ge(1),1),a.tw(a.cb(0,a.o([a.pc_(4,"164"),a.af_u(["properties","classifications_watson","keywords"],a.s_(5,"date anniversary"))]),a.ge(1),1),2592e6))),96740:a.r(87,1,1,7,"animals-pets"),96742:a.r(87,1,1,7,"architecture-and-design"),96743:a.r(87,1,1,7,46),96744:a.r(87,1,1,7,"boxing-mma"),96745:a.r(84,7,["california-recall-election","californian",187]),96747:a.r(87,1,1,7,190),96748:a.r(87,1,1,7,"classical-music"),96749:a.r(87,1,1,7,194),96750:a.r(84,7,[102,101,47]),96752:a.r(87,1,1,7,"drinks"),96753:a.r(87,1,1,7,198),96754:a.r(87,1,1,7,1049),96755:a.r(87,1,1,7,"emmys"),96756:a.r(87,1,1,7,7),96757:a.r(87,1,1,7,203),96758:a.r(87,1,1,7,204),96759:a.r(87,1,1,7,206),96761:a.r(87,1,1,7,"golden-globes"),96762:a.r(87,1,1,7,"grammys"),96763:a.r(87,1,1,7,1080),96764:a.r(87,1,1,7,"home-garden"),96765:a.r(87,1,1,7,210),96766:a.r(87,1,1,7,1091),96767:a.r(87,1,1,7,"las-vegas"),96768:a.r(87,1,1,7,"mexican"),96769:a.r(87,1,1,7,1104),96770:a.r(87,1,1,7,1107),96772:a.r(84,7,[1118,"oscar-roundtables"]),96773:a.r(87,1,1,7,1124),96775:a.r(87,1,1,7,232),96776:a.r(87,1,1,7,233),96777:a.r(87,1,1,7,52),96778:a.r(88,1,1),96780:a.r(87,1,1,7,"transportation"),96781:a.r(87,1,1,7,"unshaken"),96782:a.r(87,1,1,7,1170),96783:a.r(87,1,1,7,53),96784:a.r(87,1,1,7,124),98292:a.r(74,"CAL_TIMES_PERMUTIVE_DMP","0005",!1,"98292"),98293:a.r(74,"CAL_TIMES_PERMUTIVE_DMP","1005",!1,"98293"),98948:a.r(74,"CAL_TIMES_PERMUTIVE_DMP","0010",!1,"98948"),98949:a.r(74,"CAL_TIMES_PERMUTIVE_DMP","1010",!1,"98949"),99464:a.r(68,"1013","99464","1012","99464","1005","99464"),99465:a.r(68,"0013","99465","0011","99465","0012","99465"),99466:a.r(21,"1011","99466","1012","99466","1013","99466"),99467:a.r(21,"0011","99467","0012","99467","0014","99467"),99468:a.r(74,"CALTIMES_PERUMTIVE_DMP","0016",!1,"99468"),99469:a.r(74,"CALTIMES_PERUMTIVE_DMP","0015",!1,"99469"),99676:a.r(69,a.a([a.af_u(["properties","classifications_watson","keywords"],a.o([a.s_(5,15),a.s_(5,48),a.s_(5,"marketing"),a.s_(5,"sales"),a.s_(5,"stocks"),a.s_(5,120)])),a.ref(19)]),1,1,0,a.a([a.y(2,1),a.pc_(16,"IAB3"),a.ref(19)]),1,1),99677:a.r(70,[a.s_(5,46),a.s_(5,200),a.s_(5,111),a.s_(5,221),a.s_(5,9),a.s_(5,52)],"IAB1"),99678:a.r(70,[a.s_(5,"badminton"),a.s_(5,1012),a.s_(5,1013),a.s_(5,1063),a.s_(5,1071),a.s_(5,1097),a.s_(5,115),a.s_(5,1136),a.s_(5,6),a.s_(5,17),a.s_(5,1151),a.s_(5,"volleyball")],"IAB17"),99681:a.r(91,a.os(a.cx,4,["386","379"]),a.ref(19),2,1,3,5),99685:a.r(92,4,"42"),99688:a.r(92,16,"IAB19")}||{},queriesByEvent:{"!UpdateLookalikeModels":["106605","106606","107234","107235","107236","107237","107238","107485","107486","107487","141648","141997"],"!UpdateSecondPartyData":["104166","104167","104168","104169","104623","104624","107200","107201","107202","107203","107204","107205","107206","107207","107208","107209","124051","124052","124059","128113","134115","134117","137094","139079","163475","163476","164547","86184","87566","94814","94815","94816","95370","95371","95373","95375","98292","98293","98948","98949","99464","99465","99466","99467","99468","99469"],"!UpdateThirdPartyData":["92894","92895","92898","93052","93053","93055","95491"],LinkClick:["104241","104242","105844","116923","92208","93054","93679","93680","95604","95605"],Pageview:["10000000","10000001","10000002","10000003","10000004","10000005","10000006","10000007","10000008","10000010","10000011","10000012","10000013","10000014","10000015","10000016","10000017","10000018","10000019","10000020","10000021","10000022","10000023","10000024","10000025","10000026","10000035","10000036","10000037","10000038","10000039","10000040","10000041","10000042","10000043","10000044","10000045","10000046","10000047","10000048","10000049","10000050","10000051","10000052","10000053","10000054","10000055","10000056","10000057","10000058","10000059","10000060","10000061","10000062","10000063","10000064","10000065","10000066","10000067","10000068","10000069","10000070","10000071","10000072","10000073","10000074","10000075","10000076","10000077","10000078","10000079","10000080","10000081","10000082","10000083","10000084","10000085","10000086","10000087","10000088","10000089","10000090","10000324","10000325","10000327","10000328","10000329","10000330","10000687","10000688","10000689","10000690","10000691","10000692","10000693","10000694","10000695","10000696","10000697","10000698","10000699","10000700","10000701","10000702","10000703","10000704","10000705","10000706","10000707","10000708","10000709","10000710","10000711","10000712","10000713","10000714","10000715","10000716","10000717","10000718","10000719","10000720","10000721","10000722","10000723","10000724","10000725","10000726","10000727","10000728","10000729","10000730","10000731","10000732","10000733","10000734","10000735","10000736","10000737","10000738","10000739","10000740","10000741","10000742","10000743","10000744","10000745","10000746","10000747","10000748","10000749","10000750","10000751","10000752","10000753","10000754","10000755","10000756","10000757","10000758","10000759","10000760","10000761","10000762","10000763","10000764","10000765","10000766","10000767","10000768","10000769","10000770","10000771","10000772","10000773","10000774","10000775","10000776","10000777","10000778","10000779","10000780","10000781","10000782","10000783","10000784","10000785","10000786","10000787","10000788","10000789","10000790","10000791","10000792","10000793","10000794","10000795","10000796","10000797","10000798","10000799","10000800","10000801","10000802","10000803","100190","103007","103821","104241","104242","104243","104907","104920","104921","104922","104923","104924","104925","104934","105097","105201","105459","105463","105468","105469","105470","105471","105491","105784","105787","105791","105844","105850","105855","105856","105857","105858","105859","105860","105861","105862","106373","106594","106595","107418","107419","107597","107697","107698","107699","107700","107701","107702","107703","107704","107705","107706","107709","107710","107711","107712","107941","108460","108462","110017","110018","110806","112065","112066","112067","112069","112070","113388","113390","113609","115817","116437","117413","118207","118812","119319","119320","119321","120730","121177","121577","122077","122078","122133","122528","124717","124718","127273","127274","127661","127663","128773","129527","129528","131335","131361","131845","132444","135599","135708","135715","135716","135717","136339","137071","137072","137073","137074","137075","137076","137077","137078","137079","137080","137083","137084","137085","137608","137859","137860","141647","142390","143929","145736","145852","146373","146374","146375","147818","148079","148146","148315","148316","149079","149081","154471","154472","155947","156319","84255","85689","85691","85694","85695","85696","86184","87697","87698","87699","87700","87703","87704","87705","87706","87709","87710","87711","87712","87715","87716","87718","87721","87724","87725","87727","87728","87730","87733","87734","87751","88614","88621","89520","89521","89641","90306","90307","90308","90309","90310","90311","90312","90313","90314","90315","90316","90317","90318","90319","90320","90321","90322","90323","90324","90325","90326","90327","90328","90329","90330","90331","90332","90333","90334","90335","90336","90337","90338","90339","90340","90341","90342","90343","90344","90345","90346","90347","90348","90349","90350","90351","90352","90353","90354","90355","90356","90357","90358","90359","90360","90803","90943","90944","90945","90946","90947","90948","90949","90950","90951","90952","90953","90954","90955","90956","90957","90958","90959","90960","90961","90962","90964","90965","90966","90967","90969","90970","90971","90972","90973","90974","90975","90976","90977","90978","90979","90980","90981","90982","90983","90984","90985","90986","90987","92177","92178","92179","92180","92182","92183","92196","92204","92205","92206","92207","92208","92209","92210","92211","92212","92213","92214","92883","92894","92895","92898","93050","93051","93052","93053","93054","93055","93058","93383","93384","93521","93650","93651","93653","93654","93655","93656","93658","93659","93672","93673","93674","93676","93677","93678","93679","93680","93681","93682","93683","93684","93685","93686","93687","93688","93689","93691","93692","93693","93694","93696","93697","93698","94503","94902","95491","95587","95592","95596","95597","95599","95602","95604","95605","95606","95607","95610","95611","95612","95613","95615","95617","95618","95619","95620","96740","96742","96743","96744","96745","96747","96748","96749","96750","96752","96753","96754","96755","96756","96757","96758","96759","96761","96762","96763","96764","96765","96766","96767","96768","96769","96770","96772","96773","96775","96776","96777","96778","96780","96781","96782","96783","96784","99676","99677","99678","99681","99685","99688"],PageviewComplete:["87751"],PageviewEngagement:["87751"],PrebidBid:["103007","104907","105097","107597","118207","118517","118812","122528","136339","142390","154472","155947","93677"],SegmentEntry:[],SegmentExit:[],SlotClicked:["103007","119319","119320","119321","127274","142390","147320"],SlotViewable:["141647","142390","147319","149079","149081","92883","93677"]}||{}}}();function Cr(e){return((e,n)=>M(Lr(e,n),(n=>Object.assign(Object.assign({},n),{userId:e.userId}))))(e,jr)}function Or(e,n){const r=M((e=>mr(e,((e,n)=>n.state?W({[n.checksum]:n.state}):Y)))(e),Sn,hn((e=>i(new Map)))),t=M(Sn(n),hn((e=>i(new Map))));return M(function(e,n){return ur("delta",e,n)}(r,t),(e=>xn(e)))||{}}!function(e){const n=self;function r(e,r,t,a){function o(r){if("function"!=typeof n.postMessage)return e.ports[0].postMessage(r);n.postMessage(r)}if(!t)return o([r,null,a]);"undefined"!=typeof console&&"error"in console&&console.error("Worker caught an error:",t),o([r,t])}n.addEventListener("message",(function(n){if(t=n,!Array.isArray(t.data)||2!==t.data.length)return;var t;const a=n.data,[o,i]=a;if("function"==typeof e)return function(e,n,t,a){const o=function(e,n){try{return{res:e(n)}}catch(e){return{err:e}}}(n,a);return Boolean(null===(i=o)||void 0===i?void 0:i.err)?r(e,t,o.err):!(s=o.res)||"object"!=typeof s&&"function"!=typeof s||"function"!=typeof s.then?r(e,t,null,o.res):void o.res.then((function(n){r(e,t,null,n)}),(function(n){r(e,t,n)}));var i,s}(n,e,o,i);r(n,o,new Error("Please pass a function into register()."))}))}((e=>"QLE"===e.engine?Cr(e):function(e){switch(e.type){case"delta":return Or(e.stateMap,e.lastSentStateMapWithChecksum);case"noop":return{}}}(e)))})()})();',"Worker",void 0,void 0)}},477:e=>{e.exports=function(e,t,n,r){var a=self||window;try{try{var i;try{i=new a.Blob([e])}catch(t){(i=new(a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||a.MSBlobBuilder)).append(e),i=i.getBlob()}var s=a.URL||a.webkitURL,o=s.createObjectURL(i),c=new a[t](o,n);return s.revokeObjectURL(o),c}catch(r){return new a[t]("data:application/javascript,".concat(encodeURIComponent(e)),n)}}catch(e){if(!r)throw Error("Inline worker is not supported");return new a[t](r,n)}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={},_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_0__;_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3992),(0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_0__.ho)(!0),(0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_0__.HJ)((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,333))))})();